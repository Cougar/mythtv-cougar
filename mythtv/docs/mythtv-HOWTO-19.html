<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>Installing and using MythTV: Miscellaneous. </TITLE>
 <LINK HREF="mythtv-HOWTO-18.html" REL=previous>
 <LINK HREF="mythtv-HOWTO.html#toc19" REL=contents>
</HEAD>
<BODY>
Next
<A HREF="mythtv-HOWTO-18.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc19">Contents</A>
<HR>
<H2><A NAME="s19">19.</A> <A HREF="mythtv-HOWTO.html#toc19">Miscellaneous. </A></H2>

<H2><A NAME="ss19.1">19.1</A> <A HREF="mythtv-HOWTO.html#toc19.1">I'd like to watch the files without using MythTV / I'd like to convert the files to some other format. </A>
</H2>

<P>Matthew Zimmerman has created a patch for MPlayer / Mencoder 
<A HREF="http://www.mplayerhq.hu">http://www.mplayerhq.hu</A> that allows
you view the files created by MythTV.  MythTV doesn't use standard
Nupplevideo files, which is why you MPlayer complains if you try to view
them.</P>
<P>Download the patch to MPlayer from Matt's website. 
<A HREF="http://dijkstra.csh.rit.edu:8088/~mdz/mythtv/">http://dijkstra.csh.rit.edu:8088/~mdz/mythtv/</A>.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ wget http://dijkstra.csh.rit.edu:8088/~mdz/mythtv/mplayer-0.90pre10+mythtv.patch
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download the source to MPlayer and patch:
<BLOCKQUOTE><CODE>
<PRE>
$ wget http://ftp.lug.udel.edu/MPlayer/releases/MPlayer-0.90rc1.tar.bz2
$ tar -xjf MPlayer-0.90rc1.tar.bz2
$ cp mplayer-0.90pre10+mythtv.patch MPlayer-0.90rc1
$ cd MPlayer-0.90rc1
$ patch -p1 &lt; mplayer-0.90pre10+mythtv.patch
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>At this point, you can read the MPlayer documentation and start the compile
process.</P>

<H2><A NAME="ss19.2">19.2</A> <A HREF="mythtv-HOWTO.html#toc19.2">I'd like to use some other window manager.</A>
</H2>

<P>MythTV is not dependent on any particular window manager.  If you wish to
run a lightweight window manager, the <CODE>configfiles/</CODE> directory has an
example of a <CODE>.twmrc</CODE> and <CODE>.fvwmrc</CODE> file you may use.</P>

<H2><A NAME="ss19.3">19.3</A> <A HREF="mythtv-HOWTO.html#toc19.3">I'd like MythTV to automatically startup.</A>
</H2>

<P>Here's an example submitted to the mythtv-dev list by Pat Pflaum
<A HREF="mailto:pat@netburp.com">mailto:pat@netburp.com</A> using fvwm:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cat > .xinitrc
fvwm &amp;
mythfrontend
^D
$ cat > .fvwmrc
Style "myth*"      NoTitle, NoHandles, Sticky, WindowListSkip, BorderWidth 0
^D
$
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="capture_resolution_"></A> <A NAME="ss19.4">19.4</A> <A HREF="mythtv-HOWTO.html#toc19.4">What capture resolution should I use?  How does video work?</A>
</H2>

<P>While MythTV allows you to set various GUI and capture resolutions, not
all combinations make sense.</P>
<P>First, analog video signals have a defined vertical resolution.  In NTSC,
the video standard specifies that there are 525 vertical scan lines.  Once
the "extra" lines are removed (they're used to synchronize the video signal,
and encode closed captioning data), you have 480 vertical lines.</P>
<P>In PAL, there are 625 "raw" lines of resolution, with a net of 576 vertical
lines.</P>
<P>Horizontally, the maximum you can expect from a Bt8X8 chip is 720.</P>
<P>With this in mind, there are certain commonly accepted values for
resolution.  While other values may be accepted, they will cause scan lines
to be repeated or dropped.</P>
<P>From "best" to "worst", in NTSC:
<UL>
<LI>720x480 (but more commonly, 704x480.  "DVD" resolution)</LI>
<LI>640x480 4:3</LI>
<LI>544x480 (TiVo high resolution)</LI>
<LI>480x480 (Video CD resolution)</LI>
<LI>352x480 (ReplayTV "Standard" quality)</LI>
<LI>320x480 </LI>
<LI>544x240</LI>
<LI>480x240 </LI>
<LI>352x240 </LI>
<LI>320x240</LI>
</UL>
</P>
<P>As you can see, the lower quality values are half of the better ones. 
720x240 is possible, but isn't a good tradeoff relative to the number of
vertical lines lost.  In a PAL country, the you would use values like
720x576 or x288.</P>
<P>The higher resolutions will be more CPU intensive. If the CPU is overtaxed,
frames will be dropped causing uneven motion. You will likely see the best
results at resolutions which average at least 10% CPU idle time.  You can
use system tools such as <CODE>top</CODE> or <CODE>sar</CODE> to check the CPU %
idle while recording.  If the CPU average usage is consistently exceeding
90%, frames will need to be dropped during peak times when more than 100% of
the available CPU would be needed to process all of the frames.</P>
<P>If you'd like to read more on this, go to the vcdhelp website at 
<A HREF="http://www.vcdhelp.com/forum/userguides/94382.php">http://www.vcdhelp.com/forum/userguides/94382.php</A>.</P>

<H2><A NAME="ss19.5">19.5</A> <A HREF="mythtv-HOWTO.html#toc19.5">MythTV GUI and X Display Sizes.</A>
</H2>

<P>MythTV is designed to be run as dedicated full screen TV application
but can also be run as a desktop application on a computer
monitor. Here are a few consideration for configuring sizes to best
suit you needs.</P>
<P>There are three sizes that are important for matching the MythTV GUI and
full screen TV playback to fit the screen:</P>
<P>
<UL>
<LI>the X display size</LI>
<LI>the X Desktop (virtual) dimensions</LI>
<LI>the MythTV GUI dimensions</LI>
</UL>
</P>
<P>The MythTV GUI uses its GUI dimensions regardless of the other two and is
anchored to the upper left corner of the X Desktop.</P>
<P>The MythTV full screen mode uses the X display size dimensions regardless of
the other two and is anchored to the upper left corner of the X display.</P>

<H3>X Dimensions</H3>

<P>For output to a Television, common resolutions are 640x480, 800x600, and
some rare devices support 1024x768. Generally, higher resolutions are
better. However, you may find that you prefer the picture quality at one of
the lower resolutions. Everything in MythTV is scalable and should 'fit'
regardless of the resolution you choose.</P>
<P>Edit your X configuration file, usually "XF86Config-4", so that the the
resolution you want to use is listed first in the lists under "Screen". If
this resolution is higher than the resolutions supported by your output
device, you will see a 'panning' effect where moving the mouse to the edge
will scroll around a desktop area which is larger than the display size. If
this happens, edit your X configuration file to match the display size then
restart X.</P>

<H3>MythTV Dimensions</H3>

<P>In 0.8, from "mythfrontend" go to Setup->Appearance.  The default for the
height and width on 0.8 is "0" - this will cause MythTV to automatically
size itself to full screen. To ensure that your new dimension settings take
effect, exit and restart MythTV.</P>
<P><B>NOTE</B>: When the GUI is full screen, you may need to set your window
manager to 'Click to Focus' for windows to stack properly.</P>
<P>The fonts for the GUI and OSD will scale to whatever sizes you use. Most
font sizes can be changed in setup selections. Make sure to use fonts large
enough to be read on a TV screen from a distance.</P>
<P>The full screen TV size is based on the X display size. For Xinerama, you
can specify a screen in Setup->General. The picture will be stretched to fit
the entire screen regardless of the 
<A HREF="#capture_resolution_">capture resolutions</A> used.</P>

<H3>Overscan Dimensions</H3>

<P>Because picture edges can be ragged and screen edges aren't straight,
Television is designed to project an image larger than the physical screen.
This is called "overscan". Underscan is fitting the entire image inside the
screen. This is useful for computer monitors so that toolbars and scrollbars
at the edges can be seen.</P>
<P>For best results, match the X display area as close as possible to the edges
of the physical screen. This can only be adjusted by your tv-out device or
by the settings for the television set. Many sets have these adjustments in
a 'service mode'.</P>
<P>MythTV has settings for "Overscan" in Setup->Playback. These can not, and do
not, cause the image to display beyond the edge of the X display area. The
purpose of these settings are to cut off rough edges and to expand the image
so that objects will appear to be the same size as a normal overscanned TV
picture.</P>

<H3>MythTV on the Desktop</H3>

<P>When using MythTV on a high resolution desktop monitor, set the MythTV
GUI dimensions to something much smaller than your X display resolution but
still large enough to read the fonts. The GUI screens will always be in the
upper left hand corner. However, your window manager may be able to minimize
these (ALT-F4 in KDE for example).</P>
<P>The TV picture will start in full screen mode. Press "f" to put the picture
in a window that can be moved and resized. By default, the picture uses the
recording resolution for its dimensions. If you check the box "Fixed
Aspect Ratio" in Setup->Playback, the windowed picture will always be
resized to normal 4:3 shape.</P>

<H2><A NAME="ss19.6">19.6</A> <A HREF="mythtv-HOWTO.html#toc19.6">I'd like to save or restore my database</A>
</H2>

<P>See the <B>mysqldump</B> manpage for more information.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysqldump -u mythtv --password=mythtv mythconverg > mythtv_backup.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To restore:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u mythtv --password=mythtv mythconverg &lt; mythtv_backup.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss19.7">19.7</A> <A HREF="mythtv-HOWTO.html#toc19.7">I'd like to delete the mysql database.</A>
</H2>

<P><B>NOTE</B>:  Performing this step will remove the entire database. 
You will lose all of your settings and will need to re-run the mc.sql script
to setup the database structure before running the setup program.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root
mysql> drop database mythconverg;
mysql> quit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="btaudio"></A> <A NAME="ss19.8">19.8</A> <A HREF="mythtv-HOWTO.html#toc19.8">btaudio </A>
</H2>

<P>btaudio allows you to obtain the audio data from your tuner card directly
over the PCI bus without using a soundcard.  This is useful if you would
like to use multiple tuner cards in a system without adding a soundcard for
each one, or if your existing soundcard is not capable of full-duplex
operation.</P>
<P>In order to use btaudio, your tuner card will need certain hardware
installed on it, and that hardware must be wired correctly.  The chip that
will allow you to use the btaudio module is the MSP34xx.  However, having a
MSP34xx is no guarantee that you will be able to use the btaudio module.</P>
<P>As of 2003-03-31, this is the current list of cards and their status:
Works with btaudio:</P>
<P>
<UL>
<LI>Hauppauge WinTV-radio with dbx-TV stereo, model 401</LI>
<LI>Hauppauge WinTV-Theater, model 495</LI>
<LI>ATI TV Wonder</LI>
</UL>
</P>
<P>The following cards do not work:
<UL>
<LI>Pinnacle Studio PCTV Pro - note: this has a MSP34xx, but it's not
wired correctly to the BT878 chip.</LI>
<LI>ATI TV Wonder VE</LI>
<LI>Leadtek Winfast 2000 XP (PAL, UK and NTSC)</LI>
<LI>I/O Magic PC-PVR.  No MSP34xx chip.</LI>
</UL>
</P>
<P>The following cards have been reported to work, but have issues:
<UL>
<LI>Avermedia AVerTV Studio (no digital DSP output, "whiney noise" on
analog)</LI>
</UL>
</P>
<P>See <CODE>contrib/example.modules.conf.for.btaudio</CODE> for an example file on
how to configure btaudio on your system.</P>
<P>Once btaudio loads, it should register additional <CODE>/dev/dsp</CODE> and
<CODE>/dev/mixer</CODE> devices.  Typing <CODE>$ dmesg</CODE> will let you know
what's going on.</P>

<H2><A NAME="ss19.9">19.9</A> <A HREF="mythtv-HOWTO.html#toc19.9">Removing unwanted channels.</A>
</H2>

<P>If <B>mythfilldatabase</B> grabbed a channel which you do not want to
include in your TV listings, you can remove the entries from the xmltv
config file and the mysql database.  This often happens with premium
channels; for example, HBO or Showtime may be available on your cable TV
system, but is scrambled because you're not a subscriber to that channel. 
Since you can never watch it, you want to get rid of it.</P>
<P>First, comment out the channel from the &nbsp;/.mythtv/&lt;sourcename&gt;.xmltv file by
inserting a "#" in front of the unwanted entry. This will prevent
<B>mythfilldatabase</B> from grabbing future listings.</P>
<P>Next, delete the unwanted item from the channel table so that it will not
appear in the EPG or when changing channels.  The channels will always have
"1000" added to them, so for example, assuming that HBO is channel 15:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> delete from channel where chanid = '1015';
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Old program data will be removed over the course of a week. However, you may
want to immediately delete any current program listings for the channel that
has been removed:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> delete from program where chanid = '1015';
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<A NAME="pvr250"></A> </P>
<H2><A NAME="ss19.10">19.10</A> <A HREF="mythtv-HOWTO.html#toc19.10">I'd like to use a hardware MPEG-2 encoder.</A>
</H2>

<P><B>NOTE</B>:  THE FOLLOWING DOCUMENTATION IS PROVIDED AS-IS AND IS
NOT GUARANTEED TO WORK WITH YOUR DISTRIBUTION.  FOR IVTV DRIVER ASSISTANCE,
SEE THE IVTV MAILING LIST.  
<A HREF="https://lists.sourceforge.net/lists/listinfo/ivtv-devel">https://lists.sourceforge.net/lists/listinfo/ivtv-devel</A></P>
<P>These instructions work for Mandrake 9.1 on a backend machine which is
hosting a single PVR-250 capture card.</P>
<P>Install the Mandrake kernel source.  If you are using a different Mandrake
kernel level (ie, not 2.4.21-0.16mdk as in the example below, then alter the
<B>urpmi</B> command appropriately.)</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ uname -a
Linux pvr 2.4.21-0.16mdk #1 Fri Apr 11 06:51:54 CEST 2003 i686 unknown
unknown GNU/Linux

$ su
# urpmi kernel-source
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>NOTE</B>:  You do not need to recompile your kernel.</P>
<P>Download the IVTV driver from CVS:
<BLOCKQUOTE><CODE>
<PRE>
$ cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/ivtv login
&lt;enter> as password
$ cvs -z3 -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/ivtv co ivtv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>This should create an ivtv directory.  Switch to it and perform the
following commands:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cd ivtv/ivtv/utils
$ wget http://hauppauge.lightpath.net/software/pvr250/pvr250_16_21062.exe
$ su
# ./ivtvfwextract pvr250_16_21062.exe
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The <B>ivtvfwextract</B> program extracts the firmware required for the
card.  You may want to go to the website and downloaded the latest Windows
driver if the <B>wget</B> command fails.</P>
<P>Place a copy of the <CODE>videodev2.h</CODE> file in the ivtv driver
subdirectory.  This is the only reason that we installed the kernel-source
above.  In the future, the ivtv driver may include the <CODE>videodev2.h</CODE>
file in the distribution.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cp /usr/src/linux/include/linux/videodev2.h ~/ivtv/ivtv/driver/
$ cd ~/ivtv/ivtv/driver
$ make
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Add the following to <CODE>/etc/modules.conf</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
alias char-major-81     videodev
alias char-major-81-0   ivtv
options ivtv
options tuner type=2
options msp3400 once=1 simple=1
add below ivtv msp3400 saa7115 tuner
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>NOTE</B>:  You must specify the tuner type manually.  See
<CODE>~/ivtv/ivtv/driver/tuner.h</CODE> for a listing of tuners.  In the above
example, <CODE>tuner type=2</CODE> is a Phillips NTSC.  Use an appropriate tuner
type for your system and video standard.</P>
<P>Next, copy the files that were compiled in the driver directory into the
appropriate modules directory:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cd /lib/modules/2.4.21-0.16mdk/kernel/drivers/media/video
# cp ~/ivtv/ivtv/driver/msp3400.o .
# cp ~/ivtv/ivtv/driver/saa7115.o .
# cp ~/ivtv/ivtv/driver/ivtv.o .
# depmod -a
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>NOTE</B>:  <CODE>depmod</CODE> may give errors at this point, but it doesn't
seem to impact functionality.</P>
<P>Finally, load the ivtv driver:
<BLOCKQUOTE><CODE>
<PRE>
# modprobe ivtv
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Check that the card is being recognized on the PCI bus:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ lspci -v
&lt;snip>

00:0c.0 Multimedia video controller: Internext Compression Inc iTVC15 MPEG-2
Encoder (rev 01)
        Subsystem: Hauppauge computer works Inc.: Unknown device 4801
        Flags: bus master, medium devsel, latency 32, IRQ 11
        Memory at d0000000 (32-bit, prefetchable) [size=64M]
        Capabilities: &lt;available only to root>
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you don't see your card on the PCI bus, make sure that it's been
installed in a bus-master slot.  For some motherboards, only the PCI slots
closest to the AGP slot are bus-mastering.</P>
<P>Check that the ivtv driver has created a new video device:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ ls -l /dev/v4l/vi*
crw-------    1 mythtv   sys       81,   0 Dec 31  1969 /dev/v4l/video0
crw-------    1 mythtv   root      81,  32 Dec 31  1969 /dev/v4l/video32
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>In this case, the ivtv device is <CODE>video0</CODE>.</P>
<P>Go into <CODE>setup/setup</CODE> on the machine hosting the hardware MPEG2 card.
When you add a new capture card, ensure that you are using the
<CODE>video0</CODE> device.  </P>
<P><B>NOTE</B>:  As of 2003-04-25 the ivtv driver does not support VBI, so
closed-captioning is not available.</P>
<P>Leave the VBI device, audio device and audio sampling rate limit at the
default values.  Change the default input to an appropriate setting for your
configuration.  Change the card type to "Hardware MPEG Encoder Card" and
press ENTER.</P>
<P>The remaining setup is just like a standard V4L card; define a video source
if you have not already done so, and assign the video source to a video card
input on the Input Connections screen.</P>

<HR>
Next
<A HREF="mythtv-HOWTO-18.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc19">Contents</A>
</BODY>
</HTML>
