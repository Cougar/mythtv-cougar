<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>Installing and using MythTV: MySQL.</TITLE>
 <LINK HREF="mythtv-HOWTO-7.html" REL=next>
 <LINK HREF="mythtv-HOWTO-5.html" REL=previous>
 <LINK HREF="mythtv-HOWTO.html#toc6" REL=contents>
</HEAD>
<BODY>
<A HREF="mythtv-HOWTO-7.html">Next</A>
<A HREF="mythtv-HOWTO-5.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc6">Contents</A>
<HR>
<H2><A NAME="s6">6.</A> <A HREF="mythtv-HOWTO.html#toc6">MySQL.</A></H2>

<H2><A NAME="ss6.1">6.1</A> <A HREF="mythtv-HOWTO.html#toc6.1">Mandrake 9.0</A>
</H2>

<P>If this is the system maintaining the database, make sure that mysql is
running and started at boot.  Click on Mandrake Control
Center->System->Services, find mysql and click the "On Boot" button and the
"Start" button if the mysql status shows that it isn't running yet.</P>
<P><B>NOTE</B>:  There have been reports that mysql isn't starting at boot.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# chkconfig --level 35 mysql on
# /etc/rc.d/init.d/mysql start
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss6.2">6.2</A> <A HREF="mythtv-HOWTO.html#toc6.2">Red Hat Linux 8.0</A>
</H2>

<P>If this is the system maintaining the database, make sure that mysql is
running and started at boot. Click on Redhat menu>Server Settings>Services
and enter the root password when asked. Check "mysqld" and then click Start.
Click Save, then close the window.</P>

<H2><A NAME="ss6.3">6.3</A> <A HREF="mythtv-HOWTO.html#toc6.3">Gentoo</A>
</H2>

<P>After installing mysql you need to initialise the database by running
mysql_install_db as root. </P>

<H2><A NAME="ss6.4">6.4</A> <A HREF="mythtv-HOWTO.html#toc6.4">Setting up the initial database.</A>
</H2>

<P>This step is only required on the system maintaining the database, which
may or may not be one of your MythTV boxes.  If the database is on a
non-MythTV machine, then copy the <CODE>database/mc.sql</CODE> file to it.</P>
<P>To setup the initial mysql databases:
<BLOCKQUOTE><CODE>
<PRE>
$ cd database
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Mandrake 9.0</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root &lt; mc.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Debian 3.0</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql &lt; mc.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Red Hat Linux 8.0</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# mysql &lt; mc.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Gentoo</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# mysql &lt; /usr/share/mythtv/database/mc.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you've already got a copy of the database installed and need to update the
schema, use the <CODE>-f</CODE> flag to force <B>mysql</B> to continue setting
up the tables even if they already exist.  By default, <B>mysql</B> will
stop at the first error.</P>

<H3><A NAME="modify_perm_mysql"></A> Modifying access to the MySQL database for multiple systems </H3>

<P>If you're going to have multiple systems accessing a master database,
you must grant access to the database from remote systems.  By default, the
<CODE>mc.sql</CODE> script is only granting access to the localhost.</P>
<P>To allow other hosts access to your master database, you can either set it
up for no security at all, or with more granularity.  Note that the "%" is
the wildcard character in MySQL.</P>
<P><B>NOTE</B>:  The "no security" option is <EM>very</EM> dangerous unless
you're in a controlled environment.</P>
<P>This example has no security at all, and allows access from any host.
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> grant all on mythconverg.* to mythtv@"%" identified by "mythtv";
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>For a more secure setup, you can restrict which machines or subnets have
access. If you have a complete DNS system operational, you could do the
following:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> grant all on mythconverg.* to mythtv@"%.mydomain.com" identified by "mythtv";
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Finally, if you just want to restrict by IP subnet:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> grant all on mythconverg.* to mythtv@"192.168.1.%" identified by "mythtv";
</PRE>
</CODE></BLOCKQUOTE>
</P>

<HR>
<A HREF="mythtv-HOWTO-7.html">Next</A>
<A HREF="mythtv-HOWTO-5.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc6">Contents</A>
</BODY>
</HTML>
