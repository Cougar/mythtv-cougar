<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>Installing and using MythTV: Checking prerequisites. </TITLE>
 <LINK HREF="mythtv-HOWTO-4.html" REL=next>
 <LINK HREF="mythtv-HOWTO-2.html" REL=previous>
 <LINK HREF="mythtv-HOWTO.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="mythtv-HOWTO-4.html">Next</A>
<A HREF="mythtv-HOWTO-2.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3.</A> <A HREF="mythtv-HOWTO.html#toc3">Checking prerequisites. </A></H2>

<H2><A NAME="ss3.1">3.1</A> <A HREF="mythtv-HOWTO.html#toc3.1">Hardware. </A>
</H2>

<P>MythTV is a software video encoder, which means that it uses a fairly
generic "dumb" video capture card to get frames of video, encodes them using
the CPU on your motherboard and writes them to disk.  High-end video capture
cards and devices like the Tivo and RePlay have dedicated encoder chips
which use specialized hardware to convert the video stream to the MPEG-2
format without using the motherboard CPU.  The main CPU has the
responsibility of running the Operating System and reading and writing the
encoded frames to the disk.  These tasks have fairly low CPU requirements
compared to encoding video, which is why a device like a Series 1 Tivo can
run with only 16MB of RAM and a 54Mhz CPU.</P>
<P>
<HR>
<PRE>
The IvyTV project &lt;url url="http://ivtv.sourceforge.net/"
name="http://ivtv.sourceforge.net/"> has an alpha-quality driver for MPEG-2
encoder cards which use the iTVC15 chip or Conexant CX23415/CX23416 MPEG
Codec, such as the Hauppauge WinTV-PVR250/350.  As of 2003-03-24, MythTV can
not use these cards as an input device.  If support is integrated into
MythTV, this will substantially reduce the CPU requirements for the capture
system.
</PRE>
<HR>
</P>
<P>There are many variables that go into the question: "How fast a CPU do I
need to run MythTV"?  Obviously, the faster your CPU, the better your
experience will be with MythTV.  Performing the "Watch TV" function, where
the CPU is both encoding and decoding video simultaneously to allow Pause,
Fast Forward and Rewind functions for live TV requires more CPU then just
encoding or decoding.  MythTV also supports multiple encoder cards in a
single PC, thereby increasing the CPU requirements if you plan on
simultaneously encoding multiple programs.</P>
<P>Here are a few data points:
<UL>
<LI>A PIII/733Mhz system can encode one video stream using the MPEG-4
codec using 480x480 capture resolution.  This does not allow for live TV
watching, but does allow for encoding video and then watching it later.</LI>
<LI>The developer states that his AMD1800+ system can <B>almost</B>
encode two MPEG4 video streams and watch one program simultaneously.</LI>
<LI>A PIII/800Mhz system with 512MB RAM can encode one video
stream using the RTJPEG codec with 480x480 capture resolution and play it back
simultaneously, thereby allowing live TV watching.</LI>
<LI>A dual Celeron/450Mhz is able to view a 480x480 MPEG4/3300Kbps file
created on a different system with 30% CPU usage.</LI>
</UL>
</P>
<P><B>NOTE</B>:  You <EM>must</EM> use DMA for hard drive access to prevent
choppy or jittery video.  Red Hat Linux 8.0 apparently does not enable DMA
at boot time.  See the Troubleshooting Section for 
<A HREF="mythtv-HOWTO-18.html#Setting_DMA">instructions</A> on how to do this.</P>
<P>Mark Cooper has setup a hardware database at 
<A HREF="http://www.goldfish.org/~mcooper/pvrhw/">http://www.goldfish.org/~mcooper/pvrhw/</A>.  The website will let you
browse what other users have reported as their hardware configuration, and
how happy they are with the results.</P>

<H2><A NAME="ss3.2">3.2</A> <A HREF="mythtv-HOWTO.html#toc3.2">Software.</A>
</H2>

<P>There are a few ways of installing programs on Linux systems; you can either
use the graphical tools that come with your distribution, or you can use
command-line utilities.  Either system will get the job done, and it all
depends on your comfort level with Linux.</P>
<P><B>NOTE</B>: you must have the MySQL database software installed on a
system to store the master database.  This does not necessarily mean that
MySQL must run on one of the MythTV boxes.</P>
<P>In order to compile MythTV, we need to make sure that the software it needs
is installed.  As of 2003-03-15, this list includes <B>perl</B> (for
XMLTV), <B>mysql</B>, <B>gcc</B>, <B>freetype2-devel</B>,
<B>XFree86-devel</B>, <B>qt-devel</B> and <B>lame</B>.  If you're going to use a
remote control with MythTV, you're going to need the <B>cdialog</B>
package in order to compile <B>lircd</B> if your distribution doesn't have
a pre-packaged <B>lirc</B>.</P>
<P><B>NOTE</B>:  QT v3.1 is recommended, but not required.</P>
<P><B>NOTE</B>:  If you are going to be using RPMs to install various
components, you should be aware that not all packages include the necessary
headers for compiling packages.  If you're having trouble compiling, ensure
that you've installed the <CODE>-devel</CODE> version of a prerequisite.</P>
<P><B>NOTE</B>:  Other than where noted, Mandrake 9.1 users may follow the
Mandrake 9.0 instructions.</P>
<P>There appears to be issues with ALSA and simultaneously recording and
playing sound, which is a core requirement for MythTV.  If you are not
running ALSA 0.9.0rc6 or higher and experience lock-ups of your system when
trying to use MythTV, then please check the main ALSA website and upgrade to
the latest version, or see if your distribution has already packaged the
latest ALSA drivers.</P>

<H3><A NAME="graphicinstalltools_"></A> Graphical installation tools. </H3>

<H3>Mandrake 9.0</H3>

<P>On systems running KDE, a tool which will allow you to see what packages
are available and if they're installed on your system can be accessed by
clicking K->Configuration->Packaging->KPackage</P>
<P>While the graphical tools are nice, the command line tool is actually easier
to use.  It's recommended that you use the command line tool.</P>
<P>There are many inter-related modules, so make sure that you've got the
main package for each one, and not a sub package for an unrelated item.  For
example, there are many modules that have "perl" in them; some are a part of
the apache web server, others are a part of the perl distribution.  In each
case, we're looking to make sure that the primary module is getting
installed.</P>
<P>Click the magnifying glass or press <B>CTRL-F</B> and enter "perl" as your
search term.  You should find it under the "Perl" folder.  You need at least
the perl 5.80 base package installed.  If not, click on the "Mark" button.</P>
<P>If you are going to be installing mysql on this system, search for mysql -
it should be under "Databases".  Make sure that mysql and mysql-clients are
installed.  If not, click on "Mark".</P>
<P>Search for gcc.  You're going to need gcc and gcc-c++ installed.</P>
<P>Search for freetype2.  Make sure that you've got freetype2 and
freetype2-devel installed.</P>
<P>Search for XFree86-devel.</P>
<P>Finally, check for qt.  You'll need libqt3-devel (under folder "KDE and
Qt") and libqt3 ("Libraries").</P>
<P>
<HR>
<PRE>
NOTE for Mandrake 9.1 users:  Mandrake 9.1 has removed the MySQL modules from the default
installation.  Ensure that you install libqt3-mysql.
</PRE>
<HR>
</P>
<P>Make sure that cdialog is installed if you want to use MythTV with a remote
control if you need to compile <B>lirc</B> from source.</P>
<P>alsa-utils is needed for setting the volume.  MythTV now has native volume
support, but you may have a special configuration that necessitates an
external program to adjust your volume settings.  If this is the case, then
you can disable native volume support.</P>
<P>If you marked anything to install, click on Install Marked.  Click "Yes" or
OK if you get a message about satisfying dependencies.</P>

<H3>Red Hat Linux 8.0 </H3>

<P>Red Hat Linux 8.0 does not have the same graphical package manager used
by other distributions, so you will need to use Red Hat's package
manager.  This is the same utility you saw upon installation from the Red
Hat Linux 8.0 installation CD, and it allows you to select packages at
installation time, or once the system is up and running.  You can access
this program by selecting 
<PRE>
RedHatMenu>System Settings>Packages
</PRE>
</P>
<P>If you did a typical Desktop install of Red Hat Linux 8.0 make sure you have
selected:</P>
<P>
<UL>
<LI>KDE Desktop Environment</LI>
<LI>SQL Database Server -  you will have to click on "details" and make 
sure "mysql-server" is checked.  (only required on the master system)</LI>
<LI>Development Tools</LI>
<LI>X Software Development</LI>
<LI>KDE Software Development</LI>
<LI>Kernel Development</LI>
</UL>
</P>
<P>Click Install to continue.</P>
<P>You can not install qt-MySQL, a necessary prerequisite, graphically. To  
install this package using the command line do</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ up2date --solvedeps qt-MySQL
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<A NAME="RH_XFree86-devel"></A> 
<B>NOTE</B>:  ensure that the correct symlinks have been created for the
XFree-86 development libraries:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# ln -s /usr/X11R6/lib/libXext.so.6 /usr/X11R6/lib/libXext.so
# ln -s /usr/X11R6/lib/libX11.so.6 /usr/X11R6/lib/libX11.so
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3><A NAME="CLIinstalltools_"></A> Command-line installation. </H3>

<P> This section details the various methods for installing pre-requisites
from the command line.</P>

<H3>Mandrake</H3>

<P><B>urpmi</B> is the simplest tool for installation of packages from the
command line.  The difficult part is the configuration aspect.  The
following website 
<A HREF="http://plf.zarb.org/~nanardon/urpmiweb.php">http://plf.zarb.org/~nanardon/urpmiweb.php</A> will allow you to choose
a mirror site and then present the command-line configuration text for that
mirror.  You will most likely need to add a "Contrib" mirror to your setup. 
If you add a site from the "Penguin Liberation Front", you will be able to
load the <CODE>lame</CODE> library without compiling from source.</P>

<H3>Special instructions for Mandrake 8.2 </H3>

<P>Mandrake 8.2 does not have a pre-packaged libqt3-devel, so you must compile
and install this manually.  The following command will install the
pre-requisites for qt3, so don't skip this step.  The simplest tool for
installing packages from the command line is urpmi.</P>
<P>Open a shell, and execute the following.  You may get asked a number of
questions regarding dependencies.  It's best to answer "YES".</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ urpmi mesa-common-devel libmng1-devel mysql-devel libunixodbc2-devel
$ urpmi postgresql-devel xfree86-static-libs
</PRE>
</CODE></BLOCKQUOTE>

Once all of the pre-requisites have been installed, the next step is to
obtain and compile the source RPM.</P>
<P>Go to 
<A HREF="http://www.rpmfind.net">http://www.rpmfind.net</A> and search for
<CODE>qt3</CODE>.  There will be a number of different versions available.  As
of 2002-12-02, the latest version for Mandrake is called
<CODE>qt3-3.0.5-7mdk.src.rpm</CODE>. Unless you are running <B>Mandrake
Cooker</B> (the beta version of the next release of Mandrake), make sure to
download the standard "Mandrake" release.  Download the <CODE>.src.rpm</CODE>
file to a directory that you can find.  
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cp qt3-3.0.5-7mdk.src.rpm /usr/src/RPMS/SRPMS
# cd /usr/src/RPMS/SRPMS
# rpm --rebuild qt3-3.0.5-7mdk.src.rpm
# cd ../RPMS
# ls -l
</PRE>
</CODE></BLOCKQUOTE>

The "ls -l" command will show you a directory listing.  There should be two
files, one will be named "qt3" and the other will be "qt3-devel".  The full
filenames will vary, so one you know the filename, you can install them with
<BLOCKQUOTE><CODE>
<PRE>
# rpm -Uvh [filename1]
# rpm -Uvh [filename2]
</PRE>
</CODE></BLOCKQUOTE>

Once this has completed (it can take a while, so please be patient),
continue by following the Mandrake 9.0 instructions.</P>

<H3>Mandrake 8.2 and 9.0</H3>

<P>The simplest tool for installing packages from the command line is
<B>urpmi</B>.</P>
<P>Open a shell, and execute the following, all on the same line. You may get
asked a number of questions regarding dependencies.  It's best to answer
"YES".</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# urpmi perl mysql gcc gcc-c++ freetype2-devel cdialog alsa-utils
# urpmi XFree86-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<HR>
<PRE>
NOTE for Mandrake 8.2 users: do not execute the following
command.  You've already manually installed the files in the previous
section.
</PRE>
<HR>
</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libqt3-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<HR>
<PRE>
NOTE for Mandrake 9.1 users: execute the following command.

# urpmi libqt3-mysql
</PRE>
<HR>
</P>
<P>However, you might get this when you execute the command above:
<BLOCKQUOTE><CODE>
<PRE>
[root@pvr root]# urpmi perl mysql gcc gcc-c++ freetype2-devel libqt3-devel alsa-utils XFree86-devel
everything already installed
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>In that case, you're ready to move to the next 
<A HREF="mythtv-HOWTO-4.html#Setting_up_paths">section</A>.</P>
<H3>Red Hat Linux 8.0</H3>

<P>[Please submit instructions]</P>

<H3>Gentoo. </H3>

<P>If KDE has not been installed on your system: Edit
<CODE>/etc/make.conf</CODE> and locate the "USE" variable. If the line is
commented out, remove the comment. The line should have at least:
<BLOCKQUOTE><CODE>
<PRE>
USE="mysql qt alsa"
</PRE>
</CODE></BLOCKQUOTE>

Next you need to build KDE. If you don't plan on using the ebuilds as 
described in the Gentoo section then you also need to install lame.
<BLOCKQUOTE><CODE>
<PRE>
$ emerge kde lame mysql
</PRE>
</CODE></BLOCKQUOTE>

If KDE has already been installed, by default, QT libraries with SQL support 
are not built. To enable SQL support, add "mysql qt" to your USE variable in 
<CODE>/etc/make.conf</CODE> and rebuild QT by running
<BLOCKQUOTE><CODE>
<PRE>
$ emerge qt
</PRE>
</CODE></BLOCKQUOTE>

Install MySQL if this is the master system:
<BLOCKQUOTE><CODE>
<PRE>
$ emerge mysql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>All the necessary files will be downloaded and built. This will take a lot
of time, even on a fast machine if you have to do a full KDE build.</P>

<HR>
<A HREF="mythtv-HOWTO-4.html">Next</A>
<A HREF="mythtv-HOWTO-2.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc3">Contents</A>
</BODY>
</HTML>
