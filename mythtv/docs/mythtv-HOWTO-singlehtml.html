<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Installing and using MythTV</TITLE>
</HEAD>
<BODY>
<H1>Installing and using MythTV</H1>

<H2>Robert Kulagowski, 
<A HREF="mailto:rkulagow@rocketmail.com">mailto:rkulagow@rocketmail.com</A></H2>2004-05-06, v0.14.11
<HR>
<EM>Initially, installation of MythTV seems like a huge task.  There are lots
of dependencies, and various distributions seem to do the same thing
different ways.  This document will attempt to give general installation
instructions, as well as including distribution-specific instructions where
necessary.</EM>
<HR>
<P>
<H2><A NAME="toc1">1.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s1">How to obtain this document. </A></H2>

<UL>
<LI><A NAME="toc1.1">1.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss1.1">Mailing lists / getting help.</A>
<LI><A NAME="toc1.2">1.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss1.2">IRC.</A>
<LI><A NAME="toc1.3">1.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss1.3">Contributing to this document.</A>
</UL>
<P>
<H2><A NAME="toc2">2.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s2">Introduction.</A></H2>

<P>
<H2><A NAME="toc3">3.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s3">Checking prerequisites. </A></H2>

<UL>
<LI><A NAME="toc3.1">3.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss3.1">Hardware. </A>
<LI><A NAME="toc3.2">3.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss3.2">Software.</A>
</UL>
<P>
<H2><A NAME="toc4">4.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s4">System Configuration Requirements for Compiling MythTV </A></H2>

<UL>
<LI><A NAME="toc4.1">4.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss4.1">Software requirements for compiling MythTV</A>
<LI><A NAME="toc4.2">4.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss4.2">Shared-Library Requirements for MythTV </A>
<LI><A NAME="toc4.3">4.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss4.3">Environment variable Requirements for MythTV</A>
</UL>
<P>
<H2><A NAME="toc5">5.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s5">Downloading and compiling.</A></H2>

<UL>
<LI><A NAME="toc5.1">5.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss5.1">Notes on compiling on a system with non-Intel processors. </A>
<LI><A NAME="toc5.2">5.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss5.2">Building LAME.</A>
<LI><A NAME="toc5.3">5.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss5.3">XMLTV. </A>
<LI><A NAME="toc5.4">5.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss5.4">Configuring the Zap2It.com DataDirect service. </A>
<LI><A NAME="toc5.5">5.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss5.5">Manually building MythTV.</A>
<LI><A NAME="toc5.6">5.6</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss5.6">Gentoo. </A>
</UL>
<P>
<H2><A NAME="toc6">6.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s6">MySQL.</A></H2>

<UL>
<LI><A NAME="toc6.1">6.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss6.1">Mandrake 9.0</A>
<LI><A NAME="toc6.2">6.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss6.2">Red Hat Linux</A>
<LI><A NAME="toc6.3">6.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss6.3">Gentoo</A>
<LI><A NAME="toc6.4">6.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss6.4">Setting up the initial database.</A>
</UL>
<P>
<H2><A NAME="toc7">7.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s7">Configuring Sound.</A></H2>

<UL>
<LI><A NAME="toc7.1">7.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss7.1">Graphically setting up the mixer.</A>
<LI><A NAME="toc7.2">7.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss7.2">Setting the mixer from the command line.</A>
</UL>
<P>
<H2><A NAME="toc8">8.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s8">Setting up a remote control.</A></H2>

<UL>
<LI><A NAME="toc8.1">8.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.1">Gentoo</A>
<LI><A NAME="toc8.2">8.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.2">Mandrake 9.0</A>
<LI><A NAME="toc8.3">8.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.3">Red Hat Linux</A>
<LI><A NAME="toc8.4">8.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.4">Obtaining and compiling lirc.</A>
<LI><A NAME="toc8.5">8.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.5">Completing the lirc install. </A>
<LI><A NAME="toc8.6">8.6</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.6">Additional information for lirc.</A>
<LI><A NAME="toc8.7">8.7</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss8.7">Configuring lirc for use with an IR blaster.</A>
</UL>
<P>
<H2><A NAME="toc9">9.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s9">Configuring MythTV. </A></H2>

<UL>
<LI><A NAME="toc9.1">9.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss9.1">Configuring the Master backend system.</A>
<LI><A NAME="toc9.2">9.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss9.2">Post-configuration.</A>
<LI><A NAME="toc9.3">9.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss9.3">Configuring a non-master backend. </A>
<LI><A NAME="toc9.4">9.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss9.4">Configuring and running mythfilldatabase.</A>
</UL>
<P>
<H2><A NAME="toc10">10.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s10">Configuring mythfrontend.</A></H2>

<UL>
<LI><A NAME="toc10.1">10.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss10.1">General</A>
<LI><A NAME="toc10.2">10.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss10.2">Appearance</A>
<LI><A NAME="toc10.3">10.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss10.3">Program Guide</A>
<LI><A NAME="toc10.4">10.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss10.4">Playback </A>
<LI><A NAME="toc10.5">10.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss10.5">Recording </A>
<LI><A NAME="toc10.6">10.6</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss10.6">Xbox Frontends</A>
</UL>
<P>
<H2><A NAME="toc11">11.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s11">Using MythTV.</A></H2>

<UL>
<LI><A NAME="toc11.1">11.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss11.1">Keyboard commands.</A>
<LI><A NAME="toc11.2">11.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss11.2">Using themes with MythTV.</A>
<LI><A NAME="toc11.3">11.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss11.3">Adding DirecTV information to the database.</A>
<LI><A NAME="toc11.4">11.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss11.4">Adding support for an external tuner.</A>
<LI><A NAME="toc11.5">11.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss11.5">Using Shutdown/Wakeup</A>
</UL>
<P>
<H2><A NAME="toc12">12.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s12">MythWeb.</A></H2>

<UL>
<LI><A NAME="toc12.1">12.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss12.1">Installation and prerequisites.</A>
<LI><A NAME="toc12.2">12.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss12.2">Completing the installation.</A>
</UL>
<P>
<H2><A NAME="toc13">13.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s13">MythGallery.</A></H2>

<UL>
<LI><A NAME="toc13.1">13.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss13.1">Installation and prerequisites.</A>
<LI><A NAME="toc13.2">13.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss13.2">Using MythGallery.</A>
<LI><A NAME="toc13.3">13.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss13.3">Importing Pictures</A>
</UL>
<P>
<H2><A NAME="toc14">14.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s14">MythGame.</A></H2>

<P>
<H2><A NAME="toc15">15.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s15">MythMusic. </A></H2>

<UL>
<LI><A NAME="toc15.1">15.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.1">Manual installation of prerequisites.</A>
<LI><A NAME="toc15.2">15.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.2">Mandrake 9.0</A>
<LI><A NAME="toc15.3">15.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.3">Red Hat Linux 9</A>
<LI><A NAME="toc15.4">15.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.4">Compiling MythMusic. </A>
<LI><A NAME="toc15.5">15.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.5">Configuring MythMusic.</A>
<LI><A NAME="toc15.6">15.6</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.6">Using MythMusic. </A>
<LI><A NAME="toc15.7">15.7</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss15.7">Troubleshooting MythMusic.</A>
</UL>
<P>
<H2><A NAME="toc16">16.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s16">MythWeather.</A></H2>

<P>
<H2><A NAME="toc17">17.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s17">MythVideo.</A></H2>

<P>
<H2><A NAME="toc18">18.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s18">MythDVD.</A></H2>

<UL>
<LI><A NAME="toc18.1">18.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss18.1">Manual Compilation of Prerequisites.</A>
<LI><A NAME="toc18.2">18.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss18.2">Pre-compiled binaries.</A>
</UL>
<P>
<H2><A NAME="toc19">19.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s19">MythNews.</A></H2>

<P>
<H2><A NAME="toc20">20.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s20">Troubleshooting.</A></H2>

<UL>
<LI><A NAME="toc20.1">20.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.1">Illegal Instruction.</A>
<LI><A NAME="toc20.2">20.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.2">mythfilldatabase failing.</A>
<LI><A NAME="toc20.3">20.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.3">Fast CPU, choppy or jittery video. </A>
<LI><A NAME="toc20.4">20.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.4">I have a MPEG-2 encoder card and my video appears "jittery".</A>
<LI><A NAME="toc20.5">20.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.5">I have a MPEG-2 encoder card and my video is jumping up and down.</A>
<LI><A NAME="toc20.6">20.6</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.6">I keep losing all of my settings every time I compile!</A>
<LI><A NAME="toc20.7">20.7</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.7">Compile errors.</A>
<LI><A NAME="toc20.8">20.8</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.8">My screen goes blank, but comes back when I wiggle the mouse or use the keyboard.</A>
<LI><A NAME="toc20.9">20.9</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.9">I get segfaults / MythTV isn't doing anything.</A>
<LI><A NAME="toc20.10">20.10</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.10">Debugging with GDB.</A>
<LI><A NAME="toc20.11">20.11</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.11">MythTV makes my system crash. </A>
<LI><A NAME="toc20.12">20.12</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.12">Troubleshooting audio. </A>
<LI><A NAME="toc20.13">20.13</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.13">The mythbackend program told me to look at this section.</A>
<LI><A NAME="toc20.14">20.14</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.14">My remote doesn't work / works sometimes and not others / "ghost"</A>
<LI><A NAME="toc20.15">20.15</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.15">My PVR-250 card doesn't show inputs in the setup screen.</A>
<LI><A NAME="toc20.16">20.16</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.16">Where's my "canada-cable" entry gone to?</A>
<LI><A NAME="toc20.17">20.17</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.17">My channels are off by one.</A>
<LI><A NAME="toc20.18">20.18</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.18">Mythweb is showing a db_open error when I connect to it.</A>
<LI><A NAME="toc20.19">20.19</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.19">error: can't find a register in class 'BREG' while reloading 'asm'</A>
<LI><A NAME="toc20.20">20.20</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.20">make: *** No rule to make target /usr/lib/qt3/mkspecs/default/qmake.conf', needed by Makefile'.  Stop.</A>
<LI><A NAME="toc20.21">20.21</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.21">make: *** No rule to make target /mkspecs/default/qmake.conf', needed by Makefile'.  Stop.</A>
<LI><A NAME="toc20.22">20.22</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.22">My mouse pointer disappears when placed over the MythTV windows.</A>
<LI><A NAME="toc20.23">20.23</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.23">What does "strange error flushing buffer" mean on my console?</A>
<LI><A NAME="toc20.24">20.24</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.24">I can't change the channel when watching Live TV.</A>
<LI><A NAME="toc20.25">20.25</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.25">When trying to run setup, I get an error like this: "./setup: error while loading shared libraries:"</A>
<LI><A NAME="toc20.26">20.26</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.26">Troubleshooting the Hauppauge PVR-250 IR remote</A>
<LI><A NAME="toc20.27">20.27</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.27">MySQL not connecting correctly.</A>
<LI><A NAME="toc20.28">20.28</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.28">My screen goes black when I try to play something.</A>
<LI><A NAME="toc20.29">20.29</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.29">Poor performance with NVidia cards and XvMC.</A>
<LI><A NAME="toc20.30">20.30</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.30">My computer is loading a media player application when I insert a CD or DVD.</A>
<LI><A NAME="toc20.31">20.31</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss20.31">I can't change channels.</A>
</UL>
<P>
<H2><A NAME="toc21">21.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s21">Miscellaneous. </A></H2>

<UL>
<LI><A NAME="toc21.1">21.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.1">I'd like to watch the files without using MythTV / I'd like to convert the files to some other format. </A>
<LI><A NAME="toc21.2">21.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.2">I'd like to use some other window manager.</A>
<LI><A NAME="toc21.3">21.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.3">What capture resolution should I use?  How does video work?</A>
<LI><A NAME="toc21.4">21.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.4">MythTV GUI and X Display Sizes.</A>
<LI><A NAME="toc21.5">21.5</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.5">I'd like to save or restore my database. </A>
<LI><A NAME="toc21.6">21.6</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.6">I'd like to delete the MySQL database.</A>
<LI><A NAME="toc21.7">21.7</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.7">btaudio </A>
<LI><A NAME="toc21.8">21.8</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.8">Removing unwanted channels.</A>
<LI><A NAME="toc21.9">21.9</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.9">I'd like to use NFS.</A>
<LI><A NAME="toc21.10">21.10</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.10">Automatically starting mythfrontend at system boot time.</A>
<LI><A NAME="toc21.11">21.11</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.11">Automatically starting mythbackend at system boot time.</A>
<LI><A NAME="toc21.12">21.12</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.12">Advanced Backend Configurations. </A>
<LI><A NAME="toc21.13">21.13</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.13">What is this transcoder thing, and how do I use it?</A>
<LI><A NAME="toc21.14">21.14</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.14">Changing your hostname.</A>
<LI><A NAME="toc21.15">21.15</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.15">Can I run MythTV on my TiVo?</A>
<LI><A NAME="toc21.16">21.16</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.16">Can I run MythTV on my ReplayTV?</A>
<LI><A NAME="toc21.17">21.17</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.17">Can I use wireless between the frontend and the backend?</A>
<LI><A NAME="toc21.18">21.18</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.18">How can I burn shows that I have recorded to a DVD?</A>
<LI><A NAME="toc21.19">21.19</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss21.19">Migrating from XMLTV to DataDirect. </A>
</UL>
<P>
<H2><A NAME="toc22">22.</A> <A HREF="mythtv-HOWTO-singlehtml.html#s22">Example Configurations.</A></H2>

<UL>
<LI><A NAME="toc22.1">22.1</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss22.1">Hauppauge PVR-250/350 hardware MPEG-2 encoder. </A>
<LI><A NAME="toc22.2">22.2</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss22.2">Hauppauge PVR-250 remote and MythTV's native LIRC support.</A>
<LI><A NAME="toc22.3">22.3</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss22.3">Logical Volume Manager (LVM). </A>
<LI><A NAME="toc22.4">22.4</A> <A HREF="mythtv-HOWTO-singlehtml.html#ss22.4">Advanced Partition Formatting. </A>
</UL>

<HR>
<H2><A NAME="how_to_obtain"></A> <A NAME="s1">1.</A> <A HREF="#toc1">How to obtain this document. </A></H2>

<P>This HOWTO document is maintained at the primary MythTV website: 
<A HREF="http://www.mythtv.org">http://www.mythtv.org</A> by Robert
Kulagowski 
<A HREF="mailto:rkulagow@rocketmail.com">mailto:rkulagow@rocketmail.com</A>.  (Please note that I
am <EM>NOT</EM> the author/programmer of the MythTV application!)</P>
<P>This document is available as a single-page HTML document at 
<A HREF="http://www.mythtv.org/docs/mythtv-HOWTO-singlehtml.html">http://www.mythtv.org/docs/mythtv-HOWTO-singlehtml.html</A> or as a PDF
at 
<A HREF="http://www.mythtv.org/docs/mythtv-HOWTO.pdf">http://www.mythtv.org/docs/mythtv-HOWTO.pdf</A>.</P>
<P>This HOWTO is for MythTV v0.14.</P>

<H2><A NAME="ss1.1">1.1</A> <A HREF="#toc1.1">Mailing lists / getting help.</A>
</H2>

<P>It's recommended that you join the user list at 
<A HREF="http://www.mythtv.org/mailman/listinfo/mythtv-users">http://www.mythtv.org/mailman/listinfo/mythtv-users</A>.  The developer
list is at 
<A HREF="http://mythtv.org/cgi-bin/mailman/listinfo/mythtv-dev">http://mythtv.org/cgi-bin/mailman/listinfo/mythtv-dev</A>.  Please keep
the developer list strictly for development-related issues.</P>
<P>Searchable archives for the lists are available at 
<A HREF="http://www.gossamer-threads.com/archive/MythTV_C2/">http://www.gossamer-threads.com/archive/MythTV_C2/</A>.</P>

<H2><A NAME="ss1.2">1.2</A> <A HREF="#toc1.2">IRC.</A>
</H2>

<P>There are two IRC channels dedicated to MythTV which can be found on
irc.freenode.net
<UL>
<LI>mythtv</LI>
<LI>mythtv-users</LI>
</UL>
</P>
<P>The <CODE>mythtv</CODE> channel is where the developers discuss code.  It is not
a user-support channel.  Please don't ask non-development related questions
there.</P>

<H2><A NAME="ss1.3">1.3</A> <A HREF="#toc1.3">Contributing to this document.</A>
</H2>

<P>Contributions to the HOWTO are welcome, but as the maintainer I retain
the right to edit or choose not to use your submission.</P>
<P>If you would like to submit an update or contribution, please send it as
either SGML or as plain text. <EM>NO HTML</EM>.  The source used to create
the HOWTO is in SGML / Linuxdoc.  See the Linuxdoc HOWTO at 
<A HREF="http://www.tldp.org/HOWTO/Howtos-with-LinuxDoc.html">http://www.tldp.org/HOWTO/Howtos-with-LinuxDoc.html</A> for information
on the linuxdoc format itself, or look at the <CODE>mythtv-HOWTO.sgml</CODE>
file as an example.</P>
<P>SGML patch files are the easiest.  Run a <B>diff -u origfile newfile >
doc.patch</B> and mail it to the address above.</P>

<H2><A NAME="s2">2.</A> <A HREF="#toc2">Introduction.</A></H2>

<P>This HOWTO document will focus on manually building MythTV in a North
American environment. If you have installation instructions for a different
region or Linux distribution, please send them to the author so that it can
be included in other versions of this document.</P>

<P>Pre-compiled binaries are available for a number of distributions.  See
section 
<A HREF="#precompiled">Software::Pre-compiled packages</A> for
more information.</P>
<P>Custom mini-distributions are also available to make it easier to install
MythTV.  A mini-distribution removes many of the "general purpose"
workstation / server software packages that may be installed by default if
you use one of the big-name OS packages.</P>
<P>See 
<A HREF="http://linpvr.org/">http://linpvr.org/</A> if you'd like
to install MythTV onto a VIA Epia M machine.</P>
<P>See 
<A HREF="http://mysettopbox.tv">http://mysettopbox.tv</A> if you'd
like to install a custom version of Knoppix optimized for MythTV.</P>

<H2><A NAME="s3">3.</A> <A HREF="#toc3">Checking prerequisites. </A></H2>

<P>You must ensure that any firewalls (either hardware, or a software
firewall installed by your distribution) will not block access to the ports
that will be used by the MythTV clients and servers on the "inside" LAN. 
The ports for MySQL (TCP port 3306) and mythbackend (TCP ports 6543 and
6544) must be open.  It is <EM>strongly</EM> recommended that you do
<EM>not</EM> expose the MythTV and MySQL ports to the Internet or your
"Outside" LAN.</P>

<H2><A NAME="ss3.1">3.1</A> <A HREF="#toc3.1">Hardware. </A>
</H2>

<P>Hardware selection is a complex topic, one this HOWTO will only discuss
briefly and in general terms. The following subsections offer some general 
guidance but stop short of offering specific recommendations.</P>
<P>For more detail about actual configurations that others have used, Mark
Cooper has setup a hardware database at 
<A HREF="http://pvrhw.goldfish.org/">http://pvrhw.goldfish.org/</A>. The
website will let you browse what other users have reported as their hardware
configuration, and how happy they are with the results.</P>
<P>If you have specific questions about the suitability of specific hardware
choices, you can consult the archives of the mythtv-users mailing list at
<A HREF="http://www.gossamer-threads.com/archive/MythTV_C2/Users_F11/">http://www.gossamer-threads.com/archive/MythTV_C2/Users_F11/</A> or
post a question to the list.</P>
<H3>CPU Type and Speed</H3>

<P>Selection of CPU type and speed is one of the trickiest elements of
hardware selection, mainly because there are so many tradeoffs which can be
made.  For example, if you have plenty of CPU, you can use higher bitrates
or capture sizes, etc.</P>
<P>MythTV has two modes of operation.  First, it can function as a software video
encoder, which means that it uses a fairly generic "dumb" video capture card
to get frames of video, encodes them using the CPU on your motherboard and
writes them to disk.  High-end video capture cards and devices like the TiVo
and ReplayTV have dedicated encoder chips which use specialized hardware to
convert the video stream to the MPEG-2 format without using the motherboard
CPU.  The main CPU has the responsibility of running the Operating System
and reading and writing the encoded frames to the disk.  These tasks have
fairly low CPU requirements compared to encoding video, which is why a
device like a Series 1 TiVo can run with only 16MB of RAM and a 54MHz CPU.</P>
<P>There are many variables that go into the question: "How fast a CPU do I
need to run MythTV"?  Obviously, the faster your CPU, the better your
experience will be with MythTV.  If you are using the software MPEG-4
encoder and performing the "Watch TV" function, where the CPU is both
encoding and decoding video simultaneously to allow Pause, Fast Forward and
Rewind functions for live TV requires more CPU then just encoding or
decoding.  MythTV also supports multiple encoder cards in a single PC,
thereby increasing the CPU requirements if you plan on simultaneously
encoding multiple programs.  As a general guideline, plan on 1GHz per
encoder if you are doing software-based encoding, less if you are using a
hardware-based encoder.</P>
<P>Here are a few data points:
<UL>
<LI>A PIII/733MHz system can encode one video stream using the MPEG-4
codec using 480x480 capture resolution.  This does not allow for live TV
watching, but does allow for encoding video and then watching it later.</LI>
<LI>A developer states that his AMD1800+ system can <B>almost</B>
encode two MPEG-4 video streams and watch one program simultaneously.</LI>
<LI>A PIII/800MHz system with 512MB RAM can encode one video
stream using the RTjpeg codec with 480x480 capture resolution and play it back
simultaneously, thereby allowing live TV watching.</LI>
<LI>A dual Celeron/450MHz is able to view a 480x480 MPEG-4/3300kbps file
created on a different system with 30% CPU usage.</LI>
<LI>A P4 2.4GHz machine can encode two 3300Kbps 480x480 MPEG-4 files and
simultaneously serve content to a remote frontend.</LI>
</UL>
</P>
<P>The second mode of operation is where MythTV is paired with a hardware-based
video encoder, such as a Matrox G200 or a Hauppauge WinTV-PVR-250/350.  In
this mode, because the video encoding is being done by a dedicated video
processor, the host CPU requirements are quite low.  See the 
<A HREF="#video_capture_device">Video Capture Device</A> section for details.</P>
<P>If you have a Via M10000 series or a Hauppauge PVR-350, MythTV can use the
hardware-based video decoder for playback, which further reduces CPU
requirements.</P>

<H3>Memory</H3>

<P>A MythTV host that is both a backend and a frontend and using software
encoding with a single capture card should run adequately in 256MB of RAM.
Additional RAM above 256MB will not necessarily increase performance, but
may be useful if you are running multiple encoders.</P>

<H3>Hard Disk(s)</H3>

<P>Encoded video takes up a lot of hard disk space. The exact amount depends
on the encoding scheme, the size of the raw images, and the frames per
second, but typical values for MythTV range from 700 megabytes/hour to 2
gigabyte/hour for MPEG-4 and larger for MPEG-2 and RTjpeg.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  You <EM>must</EM> use DMA for hard drive access to prevent
choppy or jittery video.  Not all distributions enable DMA at boot time. See the Troubleshooting Section for 
<A HREF="#Setting_DMA">instructions</A> on how to do this.</CAPTION>
</FIGURE>
</P>
<P>Writing video to disk is sensitive to timing issues; RTjpeg requires less
CPU with the tradeoff being larger files and needing to write to the disk
faster.  MPEG-4 requires more CPU, but the files are smaller.  At the
default resolution, MPEG-2 creates the largest files of all with almost no
CPU impact.</P>
<P>See the Troubleshooting 
<A HREF="#Setting_DMA">section</A> for more
information.</P>

<H3>Filesystems</H3>

<P>MythTV creates large files, many in excess of 2GB.  You <EM>must</EM> use a
filesystem that will allow you to create large files.  Filesystems known to
have problems with large files are FAT and FAT32.</P>
<P>Because of the size of these files, it may be useful to plan for future
expansion right from the beginning.  If your case and power supply have the
capacity for additional hard drives, read through the 
<A HREF="#LVM">LVM</A> and 
<A HREF="#advancedpartitionformatting">Advanced Partition Formatting</A> sections for some pointers.</P>
<P>
<A NAME="video_capture_device"></A> </P>
<H3>Video Capture Device </H3>

<P>In order to capture video, MythTV will need one or more video capture
devices with Linux drivers.  There are a number of classes of hardware
available for capturing video.  </P>
<H3>Frame Grabbers.</H3>

<P>This class of card is the simplest and is usually the cheapest.  There is no
on-board encoding of the analog video; hardware known as a Digital-Analog
Converter (DAC) takes the video and presents it to the computer in an
essentially raw digital form.</P>
<P>For a list of video capture cards known to work with Linux, please see
<CODE>/usr/src/linux/Documentation/video4linux/bttv</CODE> for a partial
listing; even if your specific card is not listed, it may be that the vendor
is actually using a standard reference design and placing their own name on
it.  See the video4linux mailing list (
<A HREF="https://listman.redhat.com/mailman/listinfo/video4linux-list">https://listman.redhat.com/mailman/listinfo/video4linux-list</A>) for
more information and for specific hardware questions.</P>
<P>The most common inexpensive cards available use the Bt848 or Bt878 video
capture chip; examples are the "Hauppauge WinTV Go" card and the "AverTV
Desktop PVR" card, both of which use the bttv kernel module.</P>
<P>
<HR>
<PRE>
NOTE:  The ATI TV Wonder series and the ATI All-in-Wonder series of cards
are not the same.  The All-in-Wonder cards will not work with MythTV.
</PRE>
<HR>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
</FIGURE>

<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: The ATI All-in-Wonder cards (which are not the same
as the ATI TV Wonder, TV Wonder VE or TV Wonder Pro) <EM>will not</EM> work
as a MythTV capture device because the GATOS 
<A HREF="http://gatos.sourceforge.net">http://gatos.sourceforge.net</A>
drivers that are available provide only a limited subset of the V4L API. The TV Wonder series of cards are supported by the Bt8x8 Video4Linux driver.</CAPTION>
</FIGURE>
</P>
<P>Newer cards may use the CX23881 series of chips; a driver is available at
<A HREF="http://bytesex.org/cx88/">http://bytesex.org/cx88/</A>.</P>
<P>After you have installed a suitable capture device, you can check that 
the kernel sees it with <CODE>lspci</CODE>. Look for an entry labeled "Multimedia 
video controller". To get more detailed information about the card, use 
<CODE>lspci -v</CODE> or <CODE>lspci -vv</CODE>.  Ensure that your system is loading
the bttv modules by typing:
<BLOCKQUOTE><CODE>
<PRE>
# lsmod |grep bttv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>You want to see the <CODE>bttv</CODE> module listed.</P>
<H3>Hardware MPEG-2 encoders.</H3>

<P>While inexpensive video-capture cards simply capture raw frames, leaving
encoding to software, some higher-end cards incorporate hardware-based
encoding. Using either a G200 MJPEG encoder card, or a MPEG-2 encoder card
supported by the IvyTV project 
<A HREF="http://ivtv.sourceforge.net/">http://ivtv.sourceforge.net/</A> such as the Hauppauge PVR-250, PVR-350,
Avermedia M179, Hauppauge "Freestyle" or Yuan M600 cards will allow you to
use dedicated hardware encoders rather than your CPU. Release 0.14 of MythTV
is able to use these MPEG-2 encoders as an input device for live TV and for
scheduled recordings.  (The PVR-350 can simultaneously be used as an output
device.) Using the on-board MPEG-2 encoder drastically reduces the CPU
requirements for encoding.</P>
<P>Here are some data points for encoding:
<UL>
<LI>A Celeron 450 uses 2% CPU for encoding a 480x480 16Mbps MPEG-2 stream.</LI>
</UL>
</P>
<P>Here are some data points for decoding:</P>
<P>
<UL>
<LI>An Athlon 1800XP can decode a 720x480 8Mbps MPEG-2 file using 10% CPU</LI>
<LI>An Athlon 1GHz can decode a 720x480 16Mbps MPEG-2 file using 30-50%
CPU, can decode a 480x480 16Mbps MPEG-2 using 30% CPU and approximately 30%
for Live TV at 416x480.</LI>
<LI>A P3-550 can decode a 480x480 16Mbps MPEG-2 file with 55% CPU.</LI>
<LI>A Celeron 450 (no SSE) can decode a 480x480 16Mbps MPEG-2 file with
80% CPU.</LI>
</UL>

See the 
<A HREF="#pvr250">Hauppauge PVR-250/350 hardware MPEG-2 encoder.</A> section for information on installing a PVR-250 on Mandrake 9.1. 
The information contained in the section will also apply to other MPEG-2
encoder cards supported by the IVTV driver.</P>

<H3>DVB capture cards.</H3>

<P>DVB is a video standard primarily found in Europe.  MythTV supports DVB;
see the pages maintained by Martin Smith 
<A HREF="mailto:martin@ethics-gradient.net">martin@ethics-gradient.net</A>
at 
<A HREF="http://www.ethics-gradient.net/myth/mythdvb.html">http://www.ethics-gradient.net/myth/mythdvb.html</A> for more
information.  To see if your DVB card is supported, see the list of cards at
<A HREF="http://www.linuxtv.org/download/dvb/CARDS">http://www.linuxtv.org/download/dvb/CARDS</A> for more information.</P>
<P>In the United States, you may use a card such as the TwinHan to obtain
unencrypted Free-To-Air satellite channels.</P>

<H3>HDTV.</H3>

<P>Currently there is only one HDTV card with Linux drivers which is known
to operate in the United States - the card available from 
<A HREF="http://www.pchdtv.com/">http://www.pchdtv.com/</A>.  This card can
only be used to capture over-the-air HDTV.  There are no known capture
devices which will allow you to capture the HDTV output from a set-top box
commonly found with digital cable systems or satellite systems.</P>
<P>To playback HDTV content, plan on a powerful CPU.  "How powerful?" depends
on a number of factors, such as the capture resolution, whether the video is
progressive or interlaced, and whether your display card has hardware-assist
support for Linux. For 720p content (1280x720), a 2.4GHz P4 should be
sufficient.</P>
<P>For 1920x1080i->1920x1080p with the better deinterlacing methods
done in real time a 2.4GHz CPU is taxed, but should work if you use "Bob and
Weave" deinterlacing, or if you have an NVIDIA card with MPEG-2 hardware
accelleration.  If you enable the hardware accelleration, you may be able to
use a 1.8GHz processor.</P>

<H3>Hardware known NOT to work and other issues.</H3>

<P>
<UL>
<LI>Hauppauge WinTV-D or -HD (no driver)</LI>
<LI>Hauppauge WinTV-USB series</LI>
<LI>Hauppauge WinTV-PVR-usb, usb2 or PCI cards (no driver - this is not the PVR-250/350
series of cards supported by the IvyTV driver)</LI>
<LI>ATI All-in-Wonder series</LI>
</UL>
</P>
<P>There are no known capture cards for digital cable.  You must use the
set-top box provided by your digital cable provider and capture the analog
video output using either composite or S-Video.</P>
<P>There are no known capture cards for HDTV content.</P>
<P>There are no known capture cards for component (RGB or YPbPr) video.</P>
<H3>Sound card</H3>

<P>The system needs a sound card or an on-board equivalent on the motherboard
to play back and in most cases, to record sound. Any sound card that can be
operated by the ALSA (Advanced Linux Sound Architecture) kernel modules will
work with MythTV.  However, some cards and drivers will provide better
quality or compatibility than others.  In particular, many audio
devices included on motherboards can be problematic.</P>
<P>The usual practice for capturing the audio associated with the video
is to run a cable from an audio output on the video capture card to
the Line input on a sound card. However, some video capture cards
provide on-board audio capabilities that work with the kernel
<CODE>btaudio</CODE> module instead, thereby eliminating the need for a
cable.  This is useful if you will be using multiple capture cards in
a single chassis, since each capture card will not need its own sound
card.  Note that a separate sound card is still required for playback
when using <CODE>btaudio</CODE>, and that often the audio recorded in this
way will be mono only.  See the 
<A HREF="#btaudio">btaudio</A>
section for more information.</P>
<P>
<FIGURE>
<EPS FILE="warning">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:  The MPEG-2 cards supported by the IVTV driver do not require
a sound card for audio capture.</CAPTION>
</FIGURE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Plugging a Line-level device into the Mic input is
not recommended.  Line-level devices have higher voltages and can damage the
sound card.  In addition, even if it doesn't break your card, you will be
getting Mono sound.  See the Linux MP3 HOWTO at 
<A HREF="http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html_single/MP3-HOWTO.html#toc8">http://www.ibiblio.org/pub/Linux/docs/HOWTO/other-formats/html_single/MP3-HOWTO.html#toc8</A>
for additional information.</CAPTION>
</FIGURE>
</P>

<H3>Video Display Card</H3>

<P>MythTV will work with just about any video card.  However, it is highly
recommended that you use a card which supports XVideo (XV) extensions. If
your card does not support XV, color conversion and scaling will be
performed by your CPU rather than the video card.  This is very CPU
and memory intensive and will often result in dropped frames and a
corresponding degradation of quality.  Check the XFree86 documentation
for details if you are uncertain about your preferred card.  You may
also run <CODE>xvinfo</CODE>; look for your video card to be listed as one
of the adapters.</P>

<P>If you want to use MythTV with a standard television, you will need a
physical connection from your video card to your TV set, which can either be
a TV-out port on the card itself or an external adapter that converts the
VGA signal to an appropriate video signal. "Appropriate" depends on a number
of factors, such as video standard (NTSC vs PAL) type of input connection
(Composite vs SVideo), etc.</P>
<P>Note that with some video cards and X drivers, XVideo extensions are
only supported on the VGA output, and not on the TV output.</P>

<H3>Cards with TV out</H3>

<P>The next section deals with a number of cards that are known to have
TV-out ports.  The list is unlikely to be complete, so if you know of
others, please post a message to the mythtv-users mailing list so the
information can be included in future versions of the HOWTO. The list is
organized by manufacturer.</P>
<P>Reports here are based on what users of the cards have posted on the
mythtv-users mailing list, so if you need configuration details, please
search the archives at 
<A HREF="http://www.gossamer-threads.com/archive/MythTV_C2/Users_F11/">http://www.gossamer-threads.com/archive/MythTV_C2/Users_F11/</A> using
the card name in your search string.</P>

<H3>ATI</H3>

<P>ATI makes many cards with TV-out capability, but ATI offers no official
support for their use with Linux. The standard XFree86 ati driver does not
support TV-out.</P>
<P>The enhanced ati.2 X driver created by the GATOS 
<A HREF="http://gatos.sourceforge.net">http://gatos.sourceforge.net</A>
project offers some support for TV-out, but only in its "experimental"
version, available through CVS. There have been reports from people who say
they have made this driver work with one or another ATI card. For example,
Bruce Markey 
<A HREF="mailto:bjm@lvcm.com">mailto:bjm@lvcm.com</A> writes (on the mythtv-users
mailing list): "I got this to work. You can quote me on that. I've used
TV-out on several models of ATI cards both All-In-Wonder and regular cards
with TV-out." See the "Adventurous Setup" section of 
<A HREF="http://gatos.sourceforge.net/watching_tv.php">http://gatos.sourceforge.net/watching_tv.php</A> for details. Also see
<A HREF="http://www.retinalburn.net/linux/tvout.html">http://www.retinalburn.net/linux/tvout.html</A> for more information.</P>
<P>Specific cards:
<UL>
<LI>ATI Rage II+DVD (Mach 64). Ports not described. Reported to work, but
no details reported.</LI>
<LI>Rage 128 VIVO. Ports not described. Reported to work, but no details reported.</LI>
<LI>Radeon 7500. Ports not described. Reported to work, but no details reported.</LI>
</UL>
</P>

<H3>Matrox</H3>

<P>The standard Matrox driver included with XFree86 does not support TV-out.</P>
<P>Older Matrox cards can be used with a proprietary X driver provided by 
Matrox, and it does simultaneously support TV out and XVideo on some cards. 
See 
<A HREF="http://www.matrox.com/mga/support/drivers/files/lnx_21.cfm">http://www.matrox.com/mga/support/drivers/files/lnx_21.cfm</A> for details.</P>
<P>Newer Matrox cards can be run with a set of kernel patches (for kernel 
2.4.19) and a customized X driver, but this arrangement does not support 
XVideo on TV-out. See 
<A HREF="http://www.bglug.ca/matrox_tvout/g450_tvout_howto.html">http://www.bglug.ca/matrox_tvout/g450_tvout_howto.html</A> for details.</P>
<P>Specific cards:
<UL>
<LI>Matrox G400 AGP. Uses external adapter to provide Composite and
SVideo ports. Reported to work with the proprietary Matrox X driver.</LI>
<LI>Matrox Millennium 450GX AGP. Uses external adapter to provide
Composite and SVideo ports. TV-out implementation does <EM>NOT</EM> support XVideo.</LI>
<LI>Matrox Millennium 550GX AGP. Uses external adapter to provide
Composite and S-Video ports. TV-out implementation does <EM>NOT</EM> support XVideo.</LI>
</UL>
</P>

<H3>NVIDIA</H3>

<P>Some NVIDIA cards with TV-out can be run using the standard nv driver in 
XFree86, combined with the userspace application <B>nvtv</B> to control the TV-out 
port. See 
<A HREF="http://sourceforge.net/projects/nv-tv-out/">http://sourceforge.net/projects/nv-tv-out/</A> for details.  Recent
versions of the NVIDIA driver have better support for overscan and other
features useful with TV-Out, so the <B>nvtv</B> application may not be
required.</P>
<P>Some NVIDIA cards can be run with a proprietary NVIDIA X driver made
available by NVIDIA. See 
<A HREF="http://www.nvidia.com/view.asp?IO=linux">http://www.nvidia.com/view.asp?IO=linux</A> for more information.</P>
<P>Specific cards:
<UL>
<LI>GeForce4 MX440-SE AGP. Has Composite and SVideo ports. Works using the
NVIDIA X driver.</LI>
<LI>GeForce2 GTS 64 MB DDR 4x AGP. Has SVideo port. Works using the NVIDIA X 
driver. Reportedly works using the nv driver plus nvtv.</LI>
<LI>GeForce4 MX420 PCI (BFG Asylum). Has SVideo port.</LI>
</UL>
</P>

<H3>Savage</H3>

<P>The standard savage X driver supports TV out on some Savage cards. 
Unfortunately, XVideo support for the Savage 2000 card (a very common and 
inexpensive Savage card with TV out) is broken. See 
<A HREF="http://www.probo.com/timr/savage40.html">http://www.probo.com/timr/savage40.html</A> for details.</P>
<P>Specific cards:
<UL>
<LI>Savage 2000 AGP. Has Composite and SVideo ports. Does not support XVideo.</LI>
<LI>S3 Savage IX 8MB AGP. Has SVideo output. Reported to work.</LI>
</UL>
</P>

<H3>Hauppauge PVR-350</H3>

<P>MythTV supports the TV-out and MPEG-2 decoder functions in the IvyTV driver.</P>

<H3>Other Options</H3>

<P>Some devices with on-board TV-out capability, such as XBoxes converted to 
Linux and some laptops, can be used as MythTV frontends to display on a 
television screen. Please consult the mythtv-users mailing list for messages 
that report the details of these special arrangements.</P>

<H3>External Adapters</H3>

<P>External adapters convert standard VGA output to a form suitable for 
display on a television. The output format varies by region, since 
different countries have different TV standards. People on the mythtv-users 
list have mentioned these adapters:</P>
<P>
<UL>
<LI>AITech Web Cable Plus, powered by external transformer or takes power
from PS/2 keyboard connector, support resolutions up to 1024x768, outputs
composite and SVideo, provides position adjustment.</LI>
<LI>Averkey lite, powered by a USB port, has Composite, SVideo, YPbPr
outputs; pan, brightness, overscan/underscan controls; supports up to
1024x768 outputs; and supports PAL and NTSC.</LI>
<LI>ADS TV Elite XGA</LI>
<LI>AverKey iMicro (comments are generally favorable)</LI>
<LI>AITech Web Cable (comments are generally unfavorable, different than
the "Plus" version above)</LI>
<LI>TVIEW Gold (mentioned once, favorably)</LI>
</UL>
</P>

<H2><A NAME="ss3.2">3.2</A> <A HREF="#toc3.2">Software.</A>
</H2>

<P>There are a few ways of installing programs on Linux systems; you can
either use a pre-compiled package, or install from a tarball after
satisfying any prerequisites.</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>: you must have the MySQL database software installed on a
system to store the master database.  This does not necessarily mean that
MySQL must run on one of the MythTV boxes.</CAPTION>
</FIGURE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  The following distributions have issues which may prevent a
successful MythTV installation:</CAPTION>
</FIGURE>

<UL>
<LI>Suse 8.2 - Broken Qt package</LI>
<LI>Red Hat 8 - does not meet minimum version requirement for Qt (3.1)</LI>
</UL>
</P>

<H3><A NAME="precompiled"></A> Pre-compiled packages. </H3>

<P>A number of people have created pre-compiled packages for MythTV that may
make your installation easier.</P>
<P><B>BIG FAT WARNING</B>:  This HOWTO assumes that you have <EM>not</EM>
installed MythTV from a package.  All example command lines and file
locations are based on the MythTV tarball defaults.  Some packagers have
modified the filenames, binaries and file locations to match what is
commonly found in that distribution.  Any issues with MythTV installed via a
pre-compiled package <B>MUST</B> be raised with the packager.</P>
<P>If you use any of the pre-compiled packages you may not need to perform any
additional configuration steps in this HOWTO.  The next logical step is 
<A HREF="#mysql">configuring MySQL</A>, which you may or may not have to
perform.  See your package documentation.</P>

<H3><A NAME="atrpms"></A> Red Hat Linux</H3>

<P>Red Hat Linux 9 packages for MythTV and most of its add-on modules and
some themes have been packaged by 
<A HREF="mailto:Axel.Thimm@physik.fu-berlin.de">mailto:Axel.Thimm@physik.fu-berlin.de</A> and are available at 
<A HREF="http://atrpms.physik.fu-berlin.de/topic/multimedia/">http://atrpms.physik.fu-berlin.de/topic/multimedia/</A>. All of the
prerequisites for MythTV (such as XMLTV) are available as RPM packages. If
you have problems with the RPMs, please send him email directly.</P>
<P>Given the large number of dependent RPMs you are advised to use tools like
apt or yum for automatic retrieval and installation of the required RPMs.
(
<A HREF="http://atrpms.physik.fu-berlin.de/install.html">http://atrpms.physik.fu-berlin.de/install.html</A>) In this case a
special meta-package called mythtv-suite will allow you to install all of
MythTV and its add-ons, plus all dependencies.</P>
<P>If you don't have <B>apt</B> or <B>yum</B> on your machine, download and
install the 
<A HREF="http://atrpms.physik.fu-berlin.de/dist/rh9/atrpms-kickstart/">atrpms-kickstart package</A>.
Install the package with:
<BLOCKQUOTE><CODE>
<PRE>
# rpm -Uvh atrpms-kickstart*
</PRE>
</CODE></BLOCKQUOTE>

Then update your <B>apt</B> package listings:
<BLOCKQUOTE><CODE>
<PRE>
# apt-get update
</PRE>
</CODE></BLOCKQUOTE>

And finally:
<BLOCKQUOTE><CODE>
<PRE>
# apt-get install mythtv-suite
</PRE>
</CODE></BLOCKQUOTE>
        
These steps however, do NOT perform the installation of any drivers required
for <B>ALSA</B>, capture cards, <B>lirc</B>, etc., nor do they set up
your MythTV database. Check 
<A HREF="http://atrpms.physik.fu-berlin.de/topic/multimedia/">ATrpms</A> for
the drivers you need.</P>
<P>Further documentation on using ATrpms packages can be found in Jarod
Wilson's 
<A HREF="mailto:jcw@wilsonet.com">mailto:jcw@wilsonet.com</A>
"HOWTO Build a MythTV System on Red Hat Linux 9 w/ATrpms" document, 
<A HREF="http://pvrhw.goldfish.org/tiki-page.php?pageName=rh9pvr250">http://pvrhw.goldfish.org/tiki-page.php?pageName=rh9pvr250</A>.
Instructions for Fedora may be found at 
<A HREF="http://wilsonet.com/mythtv/">http://wilsonet.com/mythtv/</A> Just
like 3rd-party packages, any 3rd-party documentation problems should be
brought up with the maintainer.</P>

<H3>Mandrake</H3>

<P>Thac has created RPMs for MythTV for Mandrake 9.0, 9.1 and 9.2 which may
be obtained from 
<A HREF="http://rpm.nyvalls.se/">http://rpm.nyvalls.se/</A> If you have problems with the RPMs, please
send him email directly at 
<A HREF="thac@nyvalls.se">thac@nyvalls.se</A>.</P>

<H3>Debian</H3>

<P>Debian packages for MythTV and most of its add-on modules are maintained
by Matt Zimmerman 
<A HREF="mailto:mdz@debian.org">mailto:mdz@debian.org</A> and are available at 
<A HREF="http://dijkstra.csh.rit.edu/~mdz/debian/dists/unstable/mythtv/">http://dijkstra.csh.rit.edu/~mdz/debian/dists/unstable/mythtv/</A>. 
Installation instructions can be found on those pages as well. All of the
prerequisites for MythTV are available as Debian packages, most of them from
the official Debian archive.</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:  Due to the requirement for Qt 3.1, there are no packages for
Debian woody/stable.</CAPTION>
</FIGURE>
</P>

<P>The Debian packages are configured such that MythTV programs should be
run as the <CODE>mythtv</CODE> user, which is automatically created during
installation.  This user has access to write new recordings to disk in the
default directory, read and write the database, access the audio and video
devices, and everything else that MythTV needs to do.</P>

<P>See <CODE>/usr/share/doc/<I>packagename</I>/README.Debian</CODE> for more
information, including copies of the MythTV documentation.  The
<CODE>mythtv-doc</CODE> package contains a copy of this HOWTO in
<CODE>/usr/share/doc/mythtv-doc</CODE>.</P>

<H3>Manual installation</H3>

<P>You may use the graphical tools that come with your distribution, or you
can use command-line utilities.  Either system will get the job done, and it
all depends on your comfort level with Linux.</P>
<P>In order to compile MythTV, we need to make sure that the software it needs
is installed.  As of 2003-03-15, this list includes <B>mysql</B>,
<B>gcc</B>, <B>freetype2-devel</B>, <B>XFree86-devel</B>,
<B>qt-devel</B> and <B>lame</B>.  If you're going to use a remote
control with MythTV, you're going to need the <B>cdialog</B> package in
order to compile <B>lircd</B> if your distribution doesn't have a
pre-packaged <B>lirc</B>.  If you are using <B>XMLTV</B> as a grabber,
you will need <B>perl</B>.</P>
<P>
<HR>
<PRE>
NOTE:  Qt v3.1 is required.

NOTE:  If you are going to be using RPMs to install various
components, you should be aware that not all packages include the necessary
headers for compiling packages.  If you're having trouble compiling, ensure
that you've installed the -devel version of a prerequisite.

NOTE:  Other than where noted, Mandrake 9.1 users may follow the
Mandrake 9.0 instructions.
</PRE>
<HR>
</P>
<P>There appears to be issues with ALSA and simultaneously recording and
playing sound, which is a core requirement for MythTV.  If you are not
running ALSA 0.9.0rc6 or higher and experience lock-ups of your system when
trying to use MythTV, then please check the main ALSA website and upgrade to
the latest version, or see if your distribution has already packaged the
latest ALSA drivers.</P>

<H3><A NAME="graphicinstalltools_"></A> Graphical installation tools. </H3>

<H3>Mandrake 9.0</H3>

<P>On systems running KDE, a tool which will allow you to see what packages
are available and if they're installed on your system can be accessed by
clicking K->Configuration->Packaging->KPackage</P>
<P>While the graphical tools are nice, the command line tool is actually easier
to use.  It's strongly recommended that you use the command line tool.</P>
<P>There are many inter-related modules, so make sure that you've got the
main package for each one, and not a sub package for an unrelated item.  For
example, there are many modules that have "perl" in them; some are a part of
the apache web server, others are a part of the perl distribution.  In each
case, we're looking to make sure that the primary module is getting
installed.</P>
<P>Click the magnifying glass or press <B>CTRL-F</B> and enter "perl" as your
search term.  You should find it under the "Perl" folder.  You need at least
the perl 5.80 base package installed.  If not, click on the "Mark" button.</P>
<P>If you are going to be installing MySQL on this system, search for mysql -
it should be under "Databases".  Make sure that mysql and mysql-clients are
installed.  If not, click on "Mark".</P>
<P>Search for gcc.  You're going to need gcc and gcc-c++ installed.</P>
<P>Search for freetype2.  Make sure that you've got freetype2 and
freetype2-devel installed.</P>
<P>Search for XFree86-devel.</P>
<P>Finally, check for qt.  You'll need libqt3-devel (under folder "KDE and
Qt") and libqt3 ("Libraries").</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION>NOTE for Mandrake 9.1 users:  Mandrake 9.1 has removed the MySQL modules
from the default installation.  Ensure that you install libqt3-mysql.</CAPTION>
</FIGURE>
</P>
<P>Make sure that cdialog is installed if you want to use MythTV with a remote
control if you need to compile <B>lirc</B> from source.</P>
<P>alsa-utils is needed for setting the volume.  MythTV now has native volume
support, but you may have a special configuration that necessitates an
external program to adjust your volume settings.  If this is the case, then
you can disable native volume support.</P>
<P>If you marked anything to install, click on Install Marked.  Click "Yes" or
OK if you get a message about satisfying dependencies.</P>

<H3><A NAME="CLIinstalltools_"></A> Command-line installation. </H3>

<P> This section details the various methods for installing prerequisites
from the command line.</P>

<H3>Mandrake</H3>

<P><B>urpmi</B> is the simplest tool for installation of packages from the
command line, but properly configuring it can be difficult.  The
following website 
<A HREF="http://plf.zarb.org/~nanardon/urpmiweb.php">http://plf.zarb.org/~nanardon/urpmiweb.php</A> will allow you to choose
a mirror site and then present the command-line configuration text for that
mirror.  You will most likely need to add a "Contrib" mirror to your setup. 
If you add a site from the "Penguin Liberation Front", you will be able to
load the <CODE>lame</CODE> library without compiling from source.</P>

<H3>Mandrake 9.0</H3>

<P>The simplest tool for installing packages from the command line is
<B>urpmi</B>.</P>
<P>Open a shell, and execute the following, all on the same line. You may get
asked a number of questions regarding dependencies.  It's best to answer
"YES".
<BLOCKQUOTE><CODE>
<PRE>
$ su
# urpmi mysql gcc gcc-c++ freetype2-devel cdialog alsa-utils
# urpmi XFree86-devel perl
# urpmi libqt3-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<HR>
<PRE>
NOTE for Mandrake 9.1 users: execute the following command.

# urpmi libqt3-mysql
</PRE>
<HR>

However, you might get this when you execute the command above:
<BLOCKQUOTE><CODE>
<PRE>
[root@pvr root]# urpmi mysql gcc gcc-c++ freetype2-devel libqt3-devel alsa-utils XFree86-devel perl
everything already installed
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>In that case, you're ready to move to the next 
<A HREF="#Setting_up_paths">section</A>.  Once you have completed installing the pre-requisites,
exit out of the shell and start a new one to ensure that any environment
variables setup by the installation have a chance to take effect.</P>
<H3>Gentoo. </H3>

<P>If Qt has not been installed on your system: Edit
<CODE>/etc/make.conf</CODE> and locate the "USE" variable. If the line is
commented out, remove the comment. The line should have at least:
<BLOCKQUOTE><CODE>
<PRE>
USE="mysql alsa"
</PRE>
</CODE></BLOCKQUOTE>

Next you need to build Qt. If you don't plan on using the ebuilds as 
described in the Gentoo section then you also need to install lame.
<BLOCKQUOTE><CODE>
<PRE>
# emerge lame mysql qt
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you have already installed Qt: you will need to rebuild because the
default installation doesn't include MySQL support, a requirement for MythTV.  
To enable SQL support, add "mysql" to your USE variable in 
<CODE>/etc/make.conf</CODE> and rebuild Qt by running
<BLOCKQUOTE><CODE>
<PRE>
# emerge qt
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>All the necessary files will be downloaded and built. Even on a fast machine
this may take a lot of time if you need to do a full Qt build.</P>
<H3>Debian.</H3>

<P>See 
<A HREF="http://dijkstra.csh.rit.edu/~mdz/debian/dists/unstable/mythtv/">http://dijkstra.csh.rit.edu/~mdz/debian/dists/unstable/mythtv/</A> for
up-to-date information for Debian.</P>
<P>Build-dependencies for MythTV can be satisfied by adding the following to
your <CODE>/etc/apt/sources.list</CODE>
<BLOCKQUOTE><CODE>
<PRE>
# MythTV
deb http://dijkstra.csh.rit.edu/~mdz/debian unstable mythtv
deb-src http://dijkstra.csh.rit.edu/~mdz/debian unstable mythtv

# Christian Marillat's packages (mplayer, lame)
deb ftp://ftp.nerim.net/debian-marillat/ unstable main
</PRE>
</CODE></BLOCKQUOTE>

and executing:
<BLOCKQUOTE><CODE>
<PRE>
sh-2.05b# apt-get build-dep mythtv
Reading Package Lists...
Building Dependency Tree...
The following NEW packages will be installed:
  debconf-utils debhelper file fontconfig gettext html2text intltool-debian
  libaudio2 libexpat1 libfontconfig1 libfontconfig1-dev libfreetype6
  libfreetype6-dev libglib2.0-0 libjpeg62 libjpeg62-dev liblame-dev liblame0
  liblcms1 liblcms1-dev libmagic1 libmng-dev libmng1 libmysqlclient-dev
  libmysqlclient12 libogg-dev libogg0 libpng12-0 libpng12-dev libqt3-headers
  libqt3-mt-dev libqt3c102-mt libvorbis-dev libvorbis0a libvorbisenc2
  libvorbisfile3 libxcursor-dev libxcursor1 libxft2 libxft2-dev libxrender-dev
  libxrender1 mysql-common pkg-config po-debconf qt3-dev-tools xfree86-common
  xlibmesa-gl-dev xlibmesa-glu-dev xlibmesa3-gl xlibmesa3-glu xlibs xlibs-dev
  zlib1g-dev
0 upgraded, 54 newly installed, 0 to remove and 0 not upgraded.
Need to get 0B/24.0MB of archives.
After unpacking 78.7MB of additional disk space will be used.
Do you want to continue? [Y/n] 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H2><A NAME="Setting_up_paths"></A> <A NAME="s4">4.</A> <A HREF="#toc4">System Configuration Requirements for Compiling MythTV </A></H2>

<P>Before you compile MythTV from the current source tarball or from CVS, you 
may need to modify your system configuration in a few ways.</P>
<P>In general, if you install MythTV from pre-packaged binaries for your Linux
distribution/version, you don't need to be too concerned about the issues in
this section of the HOWTO - the install script for the packages should take
care of them. However, this section is still recommended reading which may
help if the packager skipped a step in their packaging.</P>

<H2><A NAME="ss4.1">4.1</A> <A HREF="#toc4.1">Software requirements for compiling MythTV</A>
</H2>

<H3>General requirements</H3>

<P>MythTV is written in C++ and requires a fairly complete, but standard, 
compilation environment, including a recent g++ compiler, <CODE>make</CODE>, and 
appropriate headers files for shared libraries. Any standard Linux 
distribution should be able to install a suitable compilation environment 
from its packaging system. Section 3.2 of this HOWTO provides some details 
of how to install the required environment for many distributions.</P>
<P>Subsequent sections of this chapter address the few oddities that you may 
have to adjust by hand before you compile MythTV.</P>
<P>The reference compilation system for MythTV is Debian.</P>

<H3>Distribution-Specific Notes </H3>

<P>None </P>
<H2><A NAME="ss4.2">4.2</A> <A HREF="#toc4.2">Shared-Library Requirements for MythTV </A>
</H2>

<H3><A NAME="modifying_ld.so.conf"></A> Modifying /etc/ld.so.conf </H3>

<P>The runtime manager for shared libraries, <B>/lib/ld.so</B>, gets
information about the locations and contents of shared libraries from
<CODE>/etc/ld.so.cache</CODE>, a file created by <B>ldconfig</B> from
information in <CODE>/etc/ld.so.conf</CODE>.  Because MythTV installs some
shared libraries in <CODE>/usr/local/lib</CODE>, that directory needs to be
added to the list of directories for <B>ld.so</B> to search when doing
runtime linking of programs, if it is not already there.
You do this, as root, by editing <CODE>/etc/ld.so.conf</CODE>, then
running <B>ldconfig</B>. There are many ways to do this; one that
works is to enter this series of commands:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su -
# echo /usr/local/lib >> /etc/ld.so.conf
# /sbin/ldconfig
# exit
$
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Distribution-Specific Notes</H3>

<P>None.</P>
<H2><A NAME="ss4.3">4.3</A> <A HREF="#toc4.3">Environment variable Requirements for MythTV</A>
</H2>

<H3>General requirements</H3>

<H3>QT libraries and binaries</H3>

<P>The compiler needs to be able to locate QT binaries and libraries in
order to compile MythTV. QTDIR needs to be set and the directory holding the
QT binaries needs to be added to your PATH.  Your distribution may already
be making these changes as a part of the installation of the software
prerequisites detailed earlier.</P>
<P>One way to do this is as follows: 
<A NAME="Checking_that_it_worked"></A> </P>
<P>Open a shell and execute the following:
<BLOCKQUOTE><CODE>
<PRE>
$ echo $PATH
/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/usr/games:/usr/lib/qt3/bin:/home/mythtv/bin:/usr/lib/qt3/bin
$ echo $QTDIR
/usr/lib/qt3
$ which qmake
/usr/lib/qt3/bin/qmake
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>For Mandrake, you should see a value like <CODE>/usr/lib/qt3</CODE> for
<CODE>QTDIR</CODE> and <CODE>/usr/lib/qt3/bin</CODE> should be in $PATH.</P>
<P>If you don't, do not proceed past this step until you have resolved this
error. You may need to manually specify the QTDIR and PATH at the shell
prompt before compiling.</P>
<P>Also, check that there has been a link created in
<CODE>/usr/lib/qt3/mkspecs</CODE> (<CODE>/usr/share/qt3/mkspecs</CODE> for Debian)
called <CODE>default</CODE>. If not, you'll get errors during the compile. See
the Troubleshooting Section for more information.</P>
<H3>Distribution-Specific Notes</H3>

<H3>Mandrake</H3>

<P>The following instructions work for Mandrake 9.0 and 9.1 using
<B>bash</B> as the shell, and may be applicable for a distribution which
uses <CODE>/etc/profile.d</CODE>.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Mandrake 10 installs a <CODE>/etc/profile.d/qtdir3.sh</CODE>
file, but it doesn't include the addition of the PATH variable.  If you're
running Mandrake 10, don't create a <CODE>mythtv.sh</CODE> file as detailed
below; edit the <CODE>qtdir3.sh</CODE> file and add the PATH statement within
the if / fi block.</CAPTION>
</FIGURE>

As root, create the following file in <CODE>/etc/profile.d</CODE> The example
filename is "mythtv.sh". Use what you feel is appropriate.</P>
<P>Open a shell, and switch to superuser mode. </P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>: ^D means press CTRL and d at the same time.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
$ su
# cd /etc/profile.d
cat > mythtv.sh
export QTDIR=/usr/lib/qt3
export PATH=$PATH:/usr/lib/qt3/bin
^D

# chmod a+x mythtv.sh
# exit
$ exit
</PRE>
</CODE></BLOCKQUOTE>

The last two commands are to exit out of the shell. This way, when you next 
open a shell your new commands
will take effect.</P>
<H3>Red Hat Linux 9</H3>

<P>Red Hat Linux 9 use a default locale with UTF-8 encoding.
Date::Manip, a perl module used by XMLTV, is not UTF-8 safe. As a result,
whenever you run setup or mythfilldatabase you will get a lot of UTF-8
warnings. There is an 
<A HREF="http://membled.com/work/patches/DateManip/">http://membled.com/work/patches/DateManip/</A> updated version of
Date::Manip at the XMLTV site fixing this and other XMLTV related
bugs.</P>

<H3>Debian</H3>

<P>Debian source packages are available from the same place as the
binary packages.  These can be used to build customized packages, and
to automatically satisfy MythTV's build-time dependencies.
<BLOCKQUOTE><CODE>
<PRE>
[...]
sh-2.05b# cd /tmp
sh-2.05b# apt-get source mythtv
Reading Package Lists...
Building Dependency Tree...
Need to get 3085kB of source archives.
Get:1 http://dijkstra.csh.rit.edu unstable/mythtv mythtv 0.11-4 (dsc) [507B]
Get:2 http://dijkstra.csh.rit.edu unstable/mythtv mythtv 0.11-4 (tar) [3071kB]
Get:3 http://dijkstra.csh.rit.edu unstable/mythtv mythtv 0.11-4 (diff) [13.9kB]
Fetched 3085kB in 0s (8120kB/s)
dpkg-source: extracting mythtv in mythtv-0.11
sh-2.05b# cd mythtv-0.11
[customize settings.pro, etc.]
[edit debian/changelog and increment the version number]
sh-2.05b# dpkg-buildpackage -rfakeroot -us -uc -b
[...]
dpkg-deb: building package `mythtv-backend' in `../mythtv-backend_0.11-4_i386.deb'.
dpkg-deb: building package `mythtv-frontend' in `../mythtv-frontend_0.11-4_i386.deb'.
dpkg-deb: building package `libmyth-0.11' in `../libmyth-0.11_0.11-4_i386.deb'.
dpkg-deb: building package `libmyth-0.11-dev' in `../libmyth-0.11-dev_0.11-4_i386.deb'.
 dpkg-genchanges -b
dpkg-genchanges: binary-only upload - not including any source code
dpkg-buildpackage: binary only upload (no source included)
sh-2.05b# ls -l ../*.deb
-rw-r--r--    1 root     root        31734 Sep  6 19:07 ../libmyth-0.11-dev_0.11-4_i386.deb
-rw-r--r--    1 root     root       408444 Sep  6 19:07 ../libmyth-0.11_0.11-4_i386.deb
-rw-r--r--    1 root     root      3324966 Sep  6 19:07 ../mythtv-backend_0.11-4_i386.deb
-rw-r--r--    1 root     root        15350 Sep  6 19:07 ../mythtv-common_0.11-4_all.deb
-rw-r--r--    1 root     root        17978 Sep  6 19:07 ../mythtv-database_0.11-4_all.deb
-rw-r--r--    1 root     root       422232 Sep  6 19:07 ../mythtv-doc_0.11-4_all.deb
-rw-r--r--    1 root     root      4900474 Sep  6 19:07 ../mythtv-frontend_0.11-4_i386.deb
-rw-r--r--    1 root     root        12372 Sep  6 19:07 ../mythtv_0.11-4_all.deb
</PRE>
</CODE></BLOCKQUOTE>
</P>

<P>If building from CVS instead of the source package, then the QTDIR
environment variable must be set when building.  On Debian unstable, QTDIR
should be set to <CODE>/usr/share/qt3</CODE>.  Edit the <CODE>/etc/profile</CODE>
file using your favorite text editor and add something like:
<BLOCKQUOTE><CODE>
<PRE>
PATH="/usr/local/bin:/usr/bin:/bin:/usr/bin/X11:/usr/games"
QTDIR="/usr/share/qt3"
.
.
.
export PATH QTDIR
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3><A NAME="devperms"></A> Device Permissions.</H3>

<P>MythTV will need access to the video4linux devices on your system.  By
default, your distribution may restrict access to these devices to the
logged-in user, so if you will be automatically starting
<B>mythbackend</B> from a script rather than an interactive terminal
session you will need to make some adjustments.</P>
<P><B>NOTE</B>: The following instructions are accurate for Mandrake.</P>
<P>Check for a file called <CODE>/etc/security/console.perms</CODE>.  Open the file
in your favorite text editor and look for a line that has:
<BLOCKQUOTE><CODE>
<PRE>
&lt;console>  0600 &lt;v4l>        0600 root.video
</PRE>
</CODE></BLOCKQUOTE>

and replace it with
<BLOCKQUOTE><CODE>
<PRE>
&lt;console>  0666 &lt;v4l>        0666 root.video
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>What we're doing is allowing read and write access to the files in the
video4linux directory.</P>
<H2><A NAME="s5">5.</A> <A HREF="#toc5">Downloading and compiling.</A></H2>

<P>Get MythTV from the 
<A HREF="http://www.mythtv.org">mythtv.org</A>
web site.  There are two installation methods you may choose from.  The
first is to download the latest release in tarball format and compile.  The
tarball release of MythTV should work on a wide variety of systems and
should be the preferred method for new users.  If you wish to use the CVS
version of MythTV you may obtain it from CVS this way:
<A NAME="cvs"></A> 
<BLOCKQUOTE><CODE>
<PRE>
$ mkdir mythtv
$ cd mythtv
$ cvs -d :pserver:mythtv@cvs.mythtv.org:/var/lib/mythcvs login
Logging in to :pserver:mythtv@cvs.mythtv.org:/var/lib/mythcvs
CVS password: mythtv
$ cvs -z3 -d :pserver:mythtv@cvs.mythtv.org:/var/lib/mythcvs checkout mythtv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:  You may get an error about cvs not finding a
<CODE>.cvspass</CODE> file the very first time you run it.  This is normal.</CAPTION>
</FIGURE>

The other MythTV modules may be downloaded from CVS the same way; replace
"mythtv" with "mythweather", "mythgallery", "mythmusic", etc.</P>
<P>If you wish to stay up-to-date with CVS, you may replace "checkout mythtv"
with <CODE>update mythtv</CODE> after you've done your initial download.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: If you are going to use CVS to compile MythTV rather than
using the distribution tarball, it is <B>strongly</B> recommended that you
join the 
<A HREF="http://www.mythtv.org/mailman/listinfo/mythtv-commits/">http://www.mythtv.org/mailman/listinfo/mythtv-commits/</A> and 
<A HREF="http://www.mythtv.org/mailman/listinfo/mythtv-dev/">http://www.mythtv.org/mailman/listinfo/mythtv-dev/</A> mailing lists.</CAPTION>
</FIGURE>
</P>
<P><B>CVS only</B>: If you are in North America you will use the DataDirect
grabber which is built-in to MythTV.  You <EM>do not</EM> need to install
XMLTV, but you need <B>wget</B> version 1.9.1 or higher.</P>
<P>Get XMLTV from 
<A HREF="http://xmltv.sourceforge.net">http://xmltv.sourceforge.net</A>.  Download the latest version (0.5.32).</P>
<P>
<HR>
<PRE>
NOTE for Mandrake users:  If you have added a "PLF" mirror, you may skip the
next step and type:

# urpmi libmp3lame0 libmp3lame0-devel

NOTE for Red Hat users: If you are installing with apt or yum, you may skip
this step, it will be taken care of. Otherwise get lame and lame-devel from
FreshRPMS: http://freshrpms.net/rpm/lame/

After downloading, be sure to install both:
# rpm -Uvh lame*
</PRE>
<HR>
</P>
<P>Get lame from 
<A HREF="http://www.mp3dev.org/mp3">http://www.mp3dev.org/mp3</A>.  Download the source code to v3.93.1 by
following the links to sourceforge.net</P>

<H2><A NAME="nonintelcpu_"></A> <A NAME="ss5.1">5.1</A> <A HREF="#toc5.1">Notes on compiling on a system with non-Intel processors. </A>
</H2>

<P>If you've got a system with an AMD K6-2 or a VIA C3 processor, make the
following change in the <CODE>settings.pro</CODE> file.</P>
<P>Look for 
<PRE>
-march=pentiumpro
</PRE>
 
and replace it with
<PRE>
-march=i586
</PRE>
 
before you compile.</P>
<P>Recent AMD processors, like the Duron, Thunderbird and Athlon don't need this
change.</P>

<H2><A NAME="ss5.2">5.2</A> <A HREF="#toc5.2">Building LAME.</A>
</H2>

<P>Open a shell and switch to the directory where you saved lame.
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf lame-3.93.1.tar.gz
$ cd lame-3.93.1
$ ./configure
$ make
$ make test
$ su
# make install
</PRE>
</CODE></BLOCKQUOTE>

Check that it worked:
<BLOCKQUOTE><CODE>
<PRE>
# ls -l /usr/local/lib
-rw-r--r--    1 root     root       381706 Nov  4 14:22 libmp3lame.a
-rwxr-xr-x    1 root     root          674 Nov  4 14:22 libmp3lame.la*
lrwxrwxrwx    1 root     root           19 Nov  4 14:22 libmp3lame.so ->
libmp3lame.so.0.0.0*
lrwxrwxrwx    1 root     root           19 Nov  4 14:22 libmp3lame.so.0 ->
libmp3lame.so.0.0.0*
-rwxr-xr-x    1 root     root       360197 Nov  4 14:22
libmp3lame.so.0.0.0*

# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss5.3">5.3</A> <A HREF="#toc5.3">XMLTV. </A>
</H2>

<H3>Red Hat Linux 9:</H3>

<P>RPMs for <B>XMLTV</B> and all of its dependencies can be obtained from
<A HREF="http://atrpms.physik.fu-berlin.de/name/xmltv/">http://atrpms.physik.fu-berlin.de/name/xmltv/</A>. The web page has a
list of all the dependent packages you must download and install.
<BLOCKQUOTE><CODE>
<PRE>
# rpm -Uvh xmltv* perl*
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you install from this location you may skip to 
<A HREF="#manually_building_mythtv">Manually building MythTV</A>.</P>
<H3>Mandrake</H3>

<P>RPMs for <B>XMLTV</B> and all of its dependencies are located in
Mandrake's "contrib".  If you have added a contrib mirror, try installing
<B>XMLTV</B>:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi xmltv xmltv-grabbers
</PRE>
</CODE></BLOCKQUOTE>

If this does not work, it is possible that contrib for your Mandrake version
does not have <B>XMLTV</B>, so you may install the XMLTV prerequisites by typing:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi perl-xml-twig perl-xml-writer perl-datemanip perl-libwww-perl
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>and skip straight to the XMLTV compilation step.</P>

<H3>Other distributions and manual installation.</H3>

<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: SuSE 8.1 users, you <EM>must</EM> download and install an
updated version of libexpat.  The version that ships with SuSE 8.1 (version
1.95.4) is buggy, and will cause problems with XML::Twig. All other
distributions may skip this step and proceed with 
<A HREF="#untarring_xmltv">untar'ing</A> the xmltv file.</CAPTION>
</FIGURE>

If you get errors installing XML::Twig or other XMLTV prerequisites,  
try deleting the old versions of libexpat
<BLOCKQUOTE><CODE>
<PRE>
$ su
# rm -f /usr/lib/libexpat*
# /sbin/ldconfig
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download version 1.95.5 from sourceforge.net:  
<A HREF="http://sourceforge.net/projects/expat/">http://sourceforge.net/projects/expat/</A></P>
<P>Open a shell prompt:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf expat-1.95.5.tar.gz
$ cd expat-1.95.5
$ ./configure
$ make
$ su
# make install
# /sbin/ldconfig
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Continuing on:</P>
<P>
<A NAME="untarring_xmltv"></A> Untar the xmltv file:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf xmltv-0.5.32.tar.bz2
</PRE>
</CODE></BLOCKQUOTE>

Install the xmltv prerequisites:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# perl -MCPAN -e shell
cpan> install XML::Twig
cpan> install Date::Manip
Date::Manip is up to date.
cpan> install LWP
cpan> install XML::Writer
cpan> exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Change to the XMLTV directory and compile it:
<BLOCKQUOTE><CODE>
<PRE>
$ cd xmltv-0.5.32
$ perl Makefile.PL
</PRE>
</CODE></BLOCKQUOTE>

You can answer "N" to the tv_check, tv_pick_cgi questions.  Say "yes" to
the grabber required for your location.</P>
<P>You may get errors about modules not being installed.  They shouldn't matter
if you're installing North America and have followed the instructions to
this point.
<BLOCKQUOTE><CODE>
<PRE>
$ make
$ make test
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ConfigureDD"></A> <A NAME="ss5.4">5.4</A> <A HREF="#toc5.4">Configuring the Zap2It.com DataDirect service. </A>
</H2>

<P><B>CVS Only</B></P>
<P>Zap2It DataDirect is a service provided by Zap2It, a subsidiary of
Tribune Media Services.  TMS is one of the primary providers for program
listing data in the United States and Canada.  There are a number of
advantages to using DataDirect rather than the standard XMLTV
<CODE>tv_grab_na</CODE> grabber.</P>
<P>
<UL>
<LI>It's much faster, because the grabber isn't downloading hundreds of
HTML pages and trying to parse the program data out of the HTML.</LI>
<LI>It contains more program information.</LI>
<LI>It's easier on the Zap2It servers, since they're not generating
hundreds of custom HTML pages when you scrape their listings.</LI>
<LI>The <CODE>tv_grab_na</CODE> grabber is no longer supported and will not be
fixed when problems occur.</LI>
<LI>The service is available free of charge by periodically filling in
surveys similar to the one presented during registration, and the data
provider has no intention of charging for it in the future.</LI>
</UL>
</P>
<P>If you wish to use Zap2It DataDirect, you'll need to establish a user
account.  Go to 
<A HREF="http://labs.zap2it.com">http://labs.zap2it.com</A> and click on the "New User? Sign Up" link. 
Read the license terms, and if you agree with them click "Accept".  The next
screen is the subscription registration.  In the "Certificate Code" field,
enter <B>ZIYN-DQZO-SBUT</B>.</P>
<P>Fill in the survey, then proceed to the lineup choices and configure your
account for your particular location and the channels that you have.  This
configuration will be imported into MythTV when you first run the
<B>setup</B> program.</P>
<P>See the section called 
<A HREF="#MigratingtoDD">Migrating from XMLTV to DataDirect</A> for instructions on moving to to DataDirect if you are
currently using XMLTV.  If you are starting from a fresh installation, the
simplest thing is to immediately start using DataDirect.</P>
<P>
<A NAME="manually_building_mythtv"></A> </P>
<H2><A NAME="ss5.5">5.5</A> <A HREF="#toc5.5">Manually building MythTV.</A>
</H2>

<P>Unpack MythTV
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf mythtv-0.14.tar.bz2
$ cd mythtv-0.14
$ ./configure
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>On a single cpu machine, you would type the following to compile MythTV:
<BLOCKQUOTE><CODE>
<PRE>
$ qmake mythtv.pro
$ make
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you want to build MythTV on a multi-CPU machine (or with
<B>distcc</B>), you may run into issues with the standard build in MythTV.
The easiest solution is to build the libraries first.  In the following
example, we will have two concurrent jobs executing.  Do not set the number
of jobs too high, or your compile will actually take longer to complete than
it would if you did a "normal" build.
<BLOCKQUOTE><CODE>
<PRE>
$ qmake mythtv.pro
$ make qmake
$ make -C libs/libavcodec -j2
$ make -C libs/libavformat -j2
$ make -C libs/libmyth -j2 
$ make -C libs/libmythtv -j2
$ make -C libs -j2
$ make -j2
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you are using <B>distcc</B>, and you had two other host machines (red, blue)
participating, you would do something like:
<BLOCKQUOTE><CODE>
<PRE>
$ export DISTCC_HOSTS='localhost red blue'
$ qmake mythtv.pro
$ make qmake
$ make -C libs/libavcodec -j6 CC=distcc
$ make -C libs/libavformat -j6 CC=distcc
$ make -C libs/libmyth -j6 CXX=distcc
$ make -C libs/libmythtv -j6 CXX=distcc
$ make -C libs -j6 CXX=distcc
$ make -j6 CXX=distcc
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Explicitly specifying the directories ensures that <B>make</B> has all
dependencies satisfied before proceeding.  For example, <CODE>libmyth</CODE> may
fail to compile if <CODE>libavformat</CODE> hasn't finished yet.</P>
<P>The actual speed-up, if any, is dependant on a number of factors, such as
number of CPUs / hosts, etc.  The <B>distcc</B> documentation recommends
using a <CODE>-j</CODE> value of twice the number of CPUs available to keep all
of them busy.</P>
<P>Some timing information.  The following should only be used for
illustration; your actual results may vary.  The test involves a complete
<CODE>make distclean</CODE> to the final binary.
<UL>
<LI>Celeron 2.4Ghz and PIII/733 running distcc, -j4:  17m:57s</LI>
<LI>Celeron 2.4Ghz, -j4:  26m:57s</LI>
<LI>Celeron 2.4Ghz, "regular" make:  26m:55s</LI>
</UL>
</P>
<P>In the above example, we see that with a single CPU, a multi-stage
<B>make</B> does not decrease compile time.</P>
<P>Once the compile is done, switch to superuser:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  subsequent configuration steps assume that you are within
the MythTV directory that you <CODE>cd</CODE>'d to above.</CAPTION>
</FIGURE>
</P>
<H3><A NAME="frontend-only"></A> Frontend-only configuration </H3>

<P>Since MythTV uses a client/server architecture, multiple frontend
computers can simultaneously access content on a Myth system.  Live TV,
watching and scheduling recordings, etc. are all possible from multiple
frontends.</P>
<P>To get a better picture of what is needed to run a frontend, note the
following:
<LI>You do NOT need the MySQL server installed on your remote frontend</LI>
<LI>You do NOT need XMLTV installed on your remote frontend</LI>
<LI>You do NOT need to run the MythTV setup program on
your frontend machine</LI>
</P>
<P>Other than the exclusion of the MySQL server and XMLTV, the MythTV
compilation procedure is the same as when you're setting up both a backend
and a frontend.  However, you <EM>will</EM> need to install the database
access libraries.</P>
<P>Once MythTV is compiled and installed, you must change your
<CODE>/usr/local/share/mythtv/mysql.txt</CODE> or <CODE>~/.mythtv/mysql.txt</CODE>
file's "DBHostName" field to point to your Master backend's IP address.</P>
<P>Run the MythTV setup program on your Master backend. Under the "General"
menu, change the IP address of the current machine (by default, "127.0.0.1")
to the real external IP address - 127.0.0.1 is the loopback address and no
external machine can access it. Change the Master Server IP setting to the
same IP address as well.</P>

<H2><A NAME="Gentoo_build"></A> <A NAME="ss5.6">5.6</A> <A HREF="#toc5.6">Gentoo. </A>
</H2>

<P>Installation of MythTV on Gentoo consists of simply emerging the desired
ebuild because all of the packages are now part of the official Portage tree.
<BLOCKQUOTE><CODE>
<PRE>
$ su -
# emerge --sync # make sure portage is up to date.
# vi /etc/make.conf
</PRE>
</CODE></BLOCKQUOTE>

Add mysql to your USE variable.  i.e. <CODE>USE="mysql ...."</CODE>
<BLOCKQUOTE><CODE>
<PRE>
# emerge mythtv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H2><A NAME="mysql"></A> <A NAME="s6">6.</A> <A HREF="#toc6">MySQL.</A></H2>

<H2><A NAME="ss6.1">6.1</A> <A HREF="#toc6.1">Mandrake 9.0</A>
</H2>

<P>If this is the system maintaining the database, make sure that MySQL is
running and started at boot.  Click on Mandrake Control
Center->System->Services, find MySQL and click the "On Boot" button and the
"Start" button if the MySQL status shows that it isn't running yet.</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:  There have been reports that MySQL isn't starting at boot.
If this is happening to you, try running the following commands.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
$ su
# chkconfig --level 35 mysql on
# /etc/rc.d/init.d/mysql start
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss6.2">6.2</A> <A HREF="#toc6.2">Red Hat Linux</A>
</H2>

<P>If this is the system maintaining the database, make sure that MySQL is
running and started at boot. Click on Redhat menu>Server Settings>Services
and enter the root password when asked. Check "mysqld" and then click Start.
Click Save, then close the window.</P>
<P>This can be done from the command line by typing:
<BLOCKQUOTE><CODE>
<PRE>
# /sbin/chkconfig mysqld on
# /sbin/service mysqld start
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss6.3">6.3</A> <A HREF="#toc6.3">Gentoo</A>
</H2>

<P>After installing MySQL you need to initialize the database by running
mysql_install_db as root. </P>

<H2><A NAME="ss6.4">6.4</A> <A HREF="#toc6.4">Setting up the initial database.</A>
</H2>

<P>This step is only required on the system maintaining the database, which
may or may not be one of your MythTV boxes.  If the database is on a
non-MythTV machine you'll need to copy the <CODE>database/mc.sql</CODE> file to it.</P>
<P>To setup the initial MySQL databases:
<BLOCKQUOTE><CODE>
<PRE>
$ cd database
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Mandrake 9.0 and Red Hat Linux</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root &lt; mc.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Debian 3.0</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ mysql &lt; mc.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H3>Gentoo</H3>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# mysql &lt; /usr/share/mythtv/database/mc.sql
</PRE>
</CODE></BLOCKQUOTE>

<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: It is good practice to set a root password for MySQL. Instructions for doing so can be found on MySQL's web site at 
<A HREF="http://www.mysql.com/doc/en/Security.html">http://www.mysql.com/doc/en/Security.html</A>.</CAPTION>
</FIGURE>
</P>
<H3><A NAME="modify_perm_mysql"></A> Modifying access to the MySQL database for multiple systems </H3>

<P>If you're going to have multiple systems accessing a master database,
you must grant access to the database from remote systems.  By default, the
<CODE>mc.sql</CODE> script is only granting access to the local host.</P>
<P>To allow other hosts access to your master database, you can either set it
up for no security at all, or with more granularity.  Note that the "%" is
the wildcard character in MySQL.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  The "no security" option is <EM>very</EM> dangerous unless
you're in a controlled environment.</CAPTION>
</FIGURE>

This example has no security at all, and allows access from any host.
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> grant all on mythconverg.* to mythtv@"%" identified by "mythtv";
mysql> flush privileges;
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>For a more secure setup, you can restrict which machines or subnets have
access. If you have a complete DNS system operational, you could do the
following:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> grant all on mythconverg.* to mythtv@"%.mydomain.com" identified by "mythtv";
mysql> flush privileges;
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Finally, if you just want to restrict by IP subnet:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> grant all on mythconverg.* to mythtv@"192.168.1.%" identified by "mythtv";
mysql> flush privileges;
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="s7">7.</A> <A HREF="#toc7">Configuring Sound.</A></H2>

<P>If your video doesn't appear to be in-sync with your audio, it could be
because you are listening to the real-time audio from your video card rather
than after it's been processed and synchronized to the video by MythTV. 
Because MythTV is a personal video recorder, "Live TV" isn't really live -
to let you pause live TV, MythTV is actually encoding the video, saving to
disk, and then playing it back.  This procedure puts your MythTV "live" TV
about 2 seconds behind real-time, so it's important that you're not
listening to the live audio.  However, if you're having an issue where the
audio and video aren't synchronized by small but varying amount, it's most
likely because the sound driver that you're using doesn't have the
DSP_CAP_REALTIME capability.  This was the case with ALSA (0.5), but not
with newer versions (0.9).  See the 
<A HREF="#Troubleshooting_Audio">Troubleshooting Audio</A> section for more information if you're having
issues with sound.  Also, ensure that no other programs are grabbing the
audio output, like <B>arts</B> or <B>esd</B>.</P>
<P>What you need to do is to mute the "line-in" of your sound card and also
set it as the recording source.</P>
<P>There are two ways to do this.  Graphically, and from the command line.</P>

<H2><A NAME="ss7.1">7.1</A> <A HREF="#toc7.1">Graphically setting up the mixer.</A>
</H2>

<H3>Mandrake 9.0 and Red Hat Linux</H3>

<P>Open Kmix by clicking K->Multimedia->Sound->Kmix for Mandrake, or
<PRE>
RedHat Menu>Sound &amp; Video>Volume Control
</PRE>
 on Red Hat.</P>
<P>Click on Settings->Configure  Make sure that "Tick Marks" and "Show
labels" have "X"'s in them.  This will make it easier to find the correct
audio source.  Click OK.</P>
<P>On the mixer page, look for Line-In on your sound card.  You should see
two LED's - a green one at the top, and a red one at the bottom.  The green
one at the top is for muting; you want to make sure that the green LED is a
dark green, meaning that it's "off".  You also want to click on the red LED
so that it turns bright red, indicating that it's "ON"; this insures that
the Line-in is used as the source.  Click OK, and make sure that you save
the settings so that this is your default.</P>

<H3>Using OSS drivers.</H3>

<P>Red Hat Linux 8.0 ships with OSS sound drivers rather than the ALSA
drivers recommended by the MythTV team. The OSS drivers do work for many
people, and for many cards. We recommend that you give OSS a try since it is
already included in Red Hat 8. However, some people report problems (sync
and jitter) with OSS, and in addition it does not support full duplex on
some cards.  Full duplex is required if you want to record and play sound
using just one sound card. ALSA has good full duplex support, and also has
drivers for some built-in (motherboard) sound cards that OSS does not.
Installing ALSA is less painful than you might think, so if OSS does not
work for you, installing ALSA is not too difficult. For those of you who do
not wish to install ALSA you must do this:</P>
<P>To configure sound to work with MythTV, select 
<PRE>
RedHat Menu>Sound &amp;
Video>Volume Control
</PRE>
 to open up a mixer. Make sure your global volume
(on the far left) is up. Also make sure that the "line in" section has
"mute" and "record" checked and that the gain is turned up. You may have to
experiment with volume/gain levels to get the best sound.  </P>

<H3>Using ALSA drivers.</H3>

<P>For those of you who do want to install ALSA please follow the 
directions below, compiled with much assistance from Gregorio Gervasio.</P>
<P>First you must find out the name of your driver, which isn't necessarily the
same as the name of your sound card. Go to 
<A HREF="http://www.alsa-project.org/alsa-doc/">http://www.alsa-project.org/alsa-doc/</A>, find your sound card on the
list and click "details". Near the top it will say something like "The
module options for snd-XXX", where XXX is the name of your driver. In the
instructions below, replace "XXX" with the name of your driver.</P>
<P>Download the development release (0.9.x) from the ALSA web site 
<A HREF="http://www.alsa-project.org">http://www.alsa-project.org</A>.  You
need at least three files:
<UL>
<LI>alsa-driver-0.9.x.tar.bz2</LI>
<LI>alsa-lib-0.9.x.tar.bz2</LI>
<LI>alsa-utils-0.9.x.tar.bz2</LI>
</UL>
</P>
<P>Start with the alsa-driver package:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf alsa-driver-0.9.x.tar.bz2
$ cd alsa-driver-0.9.x
$ ./configure --with-cards=XXX --with-sequencer=yes
</PRE>
</CODE></BLOCKQUOTE>

<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: Red Hat users, you may need to perform the following step to
allow the compile to continue:</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
mkdir -p include/linux
touch include/linux/workqueue.h
</PRE>
</CODE></BLOCKQUOTE>

Continuing on:
<BLOCKQUOTE><CODE>
<PRE>
$ make
$ su
# make install
# ./snddevices
# exit
$
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>This will compile and install the kernel modules and initialization
scripts, as well as create device nodes in /dev.</P>
<P>Install the rest of the packages:
<BLOCKQUOTE><CODE>
<PRE>
$ cd ~
$ tar -xjf alsa-lib-0.9.x.tar.bz2
$ cd alsa-lib-0.9.x
$ ./configure
$ make
$ su
# make install
# exit
$ cd ..
$ tar -xjf alsa-utils-0.9.x.tar.bz2
$ cd alsa-utils-0.9.x
$ ./configure
$ make
$ su
# make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Next, you must edit <CODE>/etc/modules.conf</CODE> so that the ALSA modules are
loaded automatically. The first step is to remove your old OSS
configuration to ensure that you don't end up with mysterious conflicts in
the future.  You should end up with a <CODE>/etc/modules.conf</CODE> file that has
this configuration:
<BLOCKQUOTE><CODE>
<PRE>
alias char-major-116 snd
alias snd-card-0 snd-XXX
# module options should go here
# OSS/Free portion
alias char-major-14 soundcore
alias sound-slot-0 snd-card-0
# card #1
alias sound-service-0-0 snd-mixer-oss
alias sound-service-0-1 snd-seq-oss
alias sound-service-0-3 snd-pcm-oss
alias sound-service-0-8 snd-seq-oss
alias sound-service-0-12 snd-pcm-oss
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>"XXX" should be the ALSA driver name for your sound card/chip. In some rare
cases you need to supply extra options to the driver. These options are
descried in the "INSTALL" file in the alsa-driver directory or at 
<A HREF="http://www.alsa-project.org/alsa-doc/">http://www.alsa-project.org/alsa-doc/</A>.</P>
<P>For now we will assume that no extra options are required.  The next step is
to ensure that the ALSA drivers are started during boot-up.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cd /etc/rc.d/init.d
# /sbin/chkconfig --add alsasound
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The next set of instructions will cause the ALSA volume/mixer/etc. state to
be saved when the machine is shut down properly. Note that the mixer
settings won't get restored the next time you boot unless you ran the
shutdown script or you've explicitly saved the state which you can do
as root with:
<BLOCKQUOTE><CODE>
<PRE>
# alsactl -f /etc/asound.state store
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Reboot your machine.  Login and adjust the sound levels using "alsamixer". 
You should increase the main volume (the first slider) and the PCM volume,
and unmute them by hitting "m".  For MythTV, if your tuner card audio output
is patched to the Line-In input of your sound card, set the Line input for
capture by pressing SPACE at the slider and mute it by pressing "M". If
you've patched your tuner card to the Mic-In port of your sound card, follow
the same instructions but make sure that you're on the Mic slider.</P>
<P>Test the driver by playing a simple file:
<BLOCKQUOTE><CODE>
<PRE>
$ aplay /usr/share/sounds/info.wav
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If it works, you're done installing ALSA!</P>

<H2><A NAME="ss7.2">7.2</A> <A HREF="#toc7.2">Setting the mixer from the command line.</A>
</H2>

<P>If you have installed the alsa-utils package, then the <B>amixer</B>
program can be used to setup the mixer.  The "Master" volume setting is only
required on a frontend machine to ensure that the sound channels are unmuted
and configured for outputting sound.  The "Line" and "Capture" controls are
required for your sound card to actually capture audio from the external
Line-in.  Not all sound cards have a "Capture" control, but if yours does
and you don't set it then MythTV will not capture audio.</P>
<P>
<HR>
<PRE>
Note the spelling in the following commands.
</PRE>
<HR>

<BLOCKQUOTE><CODE>
<PRE>
$ amixer set Master,0 100%,100% unmute
$ amixer set Line,0 75%,75% mute captur
$ amixer set Capture,0 100%,100% mute captur
$ su
# alsactl store
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you have multiple sound cards, then use the <CODE>-c</CODE> parameter to
specify which card to adjust.  Note that the first card will be "0", the
second will be "1", etc.</P>
<P>That takes care of setting the volume correctly, and the ALSA startup script
will restore the volume after a reboot.  If you find that your sound is
distorted, it's possible that the levels in the above examples are too high
for your particular hardware combination.  Try reducing the percentages by
5-10% and checking again.  Once you're satisfied, re-run the <CODE>alsactl
store</CODE> command.</P>
<P>You may also use the <B>alsamixer</B> program to set the volume.  First,
start <B>alsamixer</B> from the command line.  You should start out on the
"Master" volume control slider.  Use the up and down cursor to set the
master volume to around 75%.  Next, use the left and right cursor keys to
move around on the screen until you find the "Line" slider.  Press SPACE to
set it as the capture source, set the level to around 50-75% and press "M"
to mute it.  You can now press ESC to exit out of the <B>alsamixer</B>
program.  You can also have MythTV manage all volume and mute settings, but
this will only affect the "Master" or PCM volume, not the capture volume.  See
the mythfrontend setup page for options.</P>

<H2><A NAME="s8">8.</A> <A HREF="#toc8">Setting up a remote control.</A></H2>

<P>MythTV does not have native remote control receiver and decoder software
built-in.  Instead, remote control functions are implemented by cooperating
with <B>lirc</B>, the Linux Infrared Remote Control program.  <B>lirc</B>
handles the IR hardware and passes keystrokes to MythTV, which then acts as
if the user had pressed the keys on the keyboard.  The file
<CODE>keys.txt</CODE> describes the keys used to control MythTV.</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:If you are running Mandrake 9.1, you may install
<B>lirc</B> by executing: <CODE># urpmi lirc lirc-remotes</CODE> and bypass
the manual compilation steps described below by jumping to the 
<A HREF="#completing_lirc_install">Completing the lirc install</A> section. See the contrib/mandrake91.etc.sysconfig.lircd file for an example of how to
configure lircd.</CAPTION>
</FIGURE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  If you wish to use the remote control that comes with the
Hauppauge PVR-250/350 cards, you will need to run the lirc 0.7.0pre2 code. See the example installation in the "Hauppauge PVR-250 remote and MythTV's
native LIRC support" 
<A HREF="#hauppauge_remote">section</A>.</CAPTION>
</FIGURE>

Some IR devices require a kernel recompile, and some don't. However, all at
least require having the kernel source available as a resource for the lirc
build process. </P>

<H2><A NAME="ss8.1">8.1</A> <A HREF="#toc8.1">Gentoo</A>
</H2>

<P>To install lirc on Gentoo, all you need to do is:
<BLOCKQUOTE><CODE>
<PRE>
# emerge lirc
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss8.2">8.2</A> <A HREF="#toc8.2">Mandrake 9.0</A>
</H2>

<P>lircd has two prerequisites:  <B>dialog</B>, available in Mandrake
through the "cdialog" RPM, and the kernel source.  Mandrake 9.0 is using the
2.4.19 kernel, so either install the kernel sources from the installation CD
or go to 
<A HREF="http://www.kernel.org">http://www.kernel.org</A> and
download the full 2.4.19 tar file from 
<A HREF="http://www.kernel.org/pub/linux/kernel/v2.4/">http://www.kernel.org/pub/linux/kernel/v2.4/</A>.</P>

<H3>Obtaining the kernel.</H3>

<P>Install using urpmi.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# urpmi kernel-source
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss8.3">8.3</A> <A HREF="#toc8.3">Red Hat Linux</A>
</H2>

<P>You should already have the source from the "Kernel Development" package
you installed in section 3.2. Ensure that a symlink has been created:
<BLOCKQUOTE><CODE>
<PRE>
$ cd /usr/src
$ su
# ln -s linux-2.4 /usr/src/linux
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss8.4">8.4</A> <A HREF="#toc8.4">Obtaining and compiling lirc.</A>
</H2>

<P>You're going to need to download and compile <B>lircd</B>.  Go to 
<A HREF="http://www.lirc.org">http://www.lirc.org</A> and download lirc; as
of 2002-11-07, the version available is 0.6.6.  Grab the remotes.tgz file as
well. 
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf lirc-0.6.6.tar.bz2
$ cd lirc-0.6.6
$ ./setup.sh
</PRE>
</CODE></BLOCKQUOTE>

You're going to need to know what sort of receiver you have and where it's
connected.  In the case of the Pinnacle Studio TV card, with the IR receiver
connected to COM1 (/dev/ttys0), once the configuration menu comes up,
perform the configuration by going to Driver Configuration->Other Serial
Port Devices->Pinnacle Systems Receiver->OK and on the next page select
COM1->OK.</P>
<P>Each remote is different; some remote receivers connect directly to your
capture card and not to a serial port, so make sure that you've got the
correct one.</P>
<P>You then click "Save Configuration and run configure" to continue.</P>
<P>Make sure you read the last text generated by the configure step. It will
tell you if you require a kernel recompile, and what the name of your kernel
module will be (if necessary). For instance a home-built receiver may
require a kernel recompile, so you would be notified that you will have to
load the lirc_serial module. If you did not get any such messages skip the
kernel recompile steps below and go directly to making and installing the
lirc driver.</P>
<P>Once the configuration step is complete:
<BLOCKQUOTE><CODE>
<PRE>
$ make
$ su
# make install
# chmod 666 /dev/lircd
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>At this point, if you're using a serial receiver, check that there's a
<CODE>lirc</CODE> device in <CODE>/dev</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
$ ls -l /dev/li*
lr-xr-xr-x    1 root     root            5 Jan 27 09:00 /dev/lirc -> ttyS0
srw-rw-rw-    1 root     root            0 Jan 27 15:01 /dev/lircd=
prw-r--r--    1 root     root            0 Jan 27 09:00 /dev/lircm|
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>As you can see, there's a link from /dev/lirc to ttyS0, a.k.a. "COM1", which is
appropriate for the Pinnacle Systems PCTV Pro.  However, you may notice
something like this:
<BLOCKQUOTE><CODE>
<PRE>
crw-------    1 root     root      61,   0 Dec 31  1969 lirc
</PRE>
</CODE></BLOCKQUOTE>

Some IR receivers (including some homebrew units) use a character device as
their data interface as opposed to a link to a serial port.  If the <CODE>make
install</CODE> step has created a character device for you, don't replace it
with a link to a COM port.</P>
<P>So, if the link or character device was not created (but should have been),
ensure that you ran the <CODE>make install</CODE> step as root.  If it still
doesn't work, then there are three options.  The first option is to re-read
the <B>lirc</B> documentation to determine whether your IR receiver is a
character device or should be a link to a serial port and to create the
link/character device manually.  In this example, the IR device is connected
to ttyS0.  If it were connected to "COM2", then use ttyS1, etc.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cd /dev
# ln -sf ttyS0 lirc
# exit
$
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  The above example assumes that your receiver uses the
standard serial driver.  Some receivers do not, including receivers that
plug into a TV capture card.  Check the lirc documentation, but it may be
necessary to replace the link created above with a a character pipe:</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
# mknod /dev/lirc c 61 0
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>See the lirc documentation for additional information.  The lirc
installation <EM>should</EM> create this for you, so manually creating it
indicates that your lirc installation may have other issues.</P>
<P>The second option is to post your issue to the <EM>lirc</EM> list, not the
mythtv-users list.  The lirc programmers will be the ones that can assist
you best.</P>
<P>The third option is to dispense with lirc altogether by purchasing an IR
keyboard (various options exist, although Chicony appears to work for some
people) and a learning remote control.  The IR keyboard receiver plugs into
the PS/2 keyboard port on your PC and you would train your learning remote
to emulate the various keystrokes from <CODE>keys.txt</CODE> of your IR
keyboard.  Using this method removes lirc entirely from the picture - your
remote will be sending keypresses that your PC "sees" on the keyboard port.</P>

<H3>Recompiling your kernel on Red Hat Linux</H3>

<P>Don't Panic! Red Hat makes a kernel recompile very easy. They provide  
configuration files that make it so you can recompile your kernel with  
Red Hat defaults. And as a side benefit, your kernel will be compiled  
specifically for your architecture. For a more detailed description (or  
if you run into trouble) of how to do this go to  
<A HREF="http://www.redhat.com/docs/manuals/linux/RHL-8.0-Manual/custom-guide/ch-custom-kernel.html">http://www.redhat.com/docs/manuals/linux/RHL-8.0-Manual/custom-guide/ch-custom-kernel.html</A></P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>: Suitable Red Hat kernels for MythTV (i2c update, v4l2 API,
CONFIG_SERIAL modularized) are available from ATrpms: 
<A HREF="http://atrpms.physik.fu-berlin.de/name/kernel/">http://atrpms.physik.fu-berlin.de/name/kernel/</A>. You will also find
suitable kernel modules for ALSA, lirc, bttv, ivtv, saa7134 etc. there. See
also the 
<A HREF="#atrpms">main Red Hat section</A>.</CAPTION>
</FIGURE>

For the impatient:
Make sure you have an emergency floppy boot disk available!
<BLOCKQUOTE><CODE>
<PRE>
$ cd /usr/src/linux
$ su
# make mrproper
# cd configs
# ls
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>at this point you must look at the file names and determine which  
config file is right for you. For instance if you have an Athlon XP you  
should choose "kernel-2.4.18-athlon.config" but if you have a dual  
processor P4 you might choose "kernel-2.4.18-i686-smp.config"
<BLOCKQUOTE><CODE>
<PRE>
# cp yourconfig.config ../.config
# cd ../
# make xconfig
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>At this point you will get a graphical configuration utility. All that  
you must do to make lirc work is go to the "character devices" section  
and change "Standard/generic (8250/16550 and compatible UARTs) serial  
support" from "y" to "m". Now if you want you can have a look around.  
For instance, you might wish to turn off ham radio support, or perhaps  
turn off PCMCIA support if you are not on a laptop. But be careful!  
Only change things you know you can change. If you are not sure, just  
stick to the one required change. Click "save and exit".
Next:
<BLOCKQUOTE><CODE>
<PRE>
# make dep
# make clean
# make bzImage modules
# make modules_install
# make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>if you are using <B>grub</B>, that should be it, reboot and select your custom  
kernel upon boot. If you are using <B>lilo</B>, change your lilo configuration  
according to  
<A HREF="http://www.redhat.com/docs/manuals/linux/RHL-8.0-Manual/custom-guide/  s1-custom-kernel-bootloader.html">http://www.redhat.com/docs/manuals/linux/RHL-8.0-Manual/custom-guide/  s1-custom-kernel-bootloader.html</A> Remember, if you have any custom  
kernel modules (ALSA, etc) you will have to recompile/reinstall those.</P>

<H2><A NAME="completing_lirc_install"></A> <A NAME="ss8.5">8.5</A> <A HREF="#toc8.5">Completing the lirc install. </A>
</H2>

<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE to Mandrake 9.1 users</B>: skip to the manual start paragraph
below.</CAPTION>
</FIGURE>
</P>
<P>If the lirc configure program / compile did not mention anything about a
kernel module, then you are finished. If it did mention a kernel module, you
must edit the <CODE>/etc/modules.conf</CODE> file. Add this line as the first
thing in the file.  It must come first, or it may not work.
<BLOCKQUOTE><CODE>
<PRE>
alias char-major-61 XXX
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>replace XXX with the name which you determined earlier, which in this
example was "lirc_serial"
<BLOCKQUOTE><CODE>
<PRE>
$ su
# modprobe lirc_serial
# /sbin/ldconfig
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Next, we're going to manually start lircd the first time.  Mandrake 9.1
users, type: <CODE># /etc/rc.d/init.d/lircd start</CODE> instead of:
<BLOCKQUOTE><CODE>
<PRE>
# /usr/local/sbin/lircd
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If this fails, complaining of a missing <CODE>lircd.conf</CODE> file, then you
must find or make one. First look for a pre-made configuration file at 
<A HREF="http://lirc.sourceforge.net/remotes/">http://lirc.sourceforge.net/remotes/</A>.  Mandrake 9.1 users, look in
<CODE>/usr/share/lirc-remotes</CODE>. If you find one your remotes either on the
website or in <CODE>/usr/share</CODE>, download or copy the file, name it
<CODE>lircd.conf</CODE> and put it in your <CODE>/etc</CODE> directory. If you
couldn't find your remote, you must make your own <CODE>lircd.conf</CODE> file.</P>
<P>To make your own <CODE>lircd.conf</CODE> file
<BLOCKQUOTE><CODE>
<PRE>
$ irrecord myremote
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Follow the on-screen directions to train your remote and define keys. If  
your remote ends up working well, you should consider submitting your  
<CODE>lircd.conf</CODE> file back to the lirc developers. Once finished:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cp myremote /etc/lircd.conf
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>now try to start lircd again:
<BLOCKQUOTE><CODE>
<PRE>
# /usr/local/sbin/lircd
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Now, we're going to add the commands necessary for lircd to run each time we
boot. Mandrake 9.1 users, you can execute:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# chkconfig --level 35 lircd on
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>All other distributions:
<BLOCKQUOTE><CODE>
<PRE>
# cd /etc/rc.d
# cat >> rc.local
echo "Starting lircd"
/usr/local/sbin/lircd
^D
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
 </P>
<P>This takes care of the lircd portion, which "listens" for the IR signals. If
everything went well, the install script for lircd put an appropriate
configuration file for your remote into <CODE>/etc/lircd.conf</CODE> This file
maps the buttons on the remote control to the IR pulses coming from the
receiver.</P>
<P>The next step is to convert those signals into something that can be used
to control MythTV.  MythTV now includes native support for lirc and can
interact directly with </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cd ~/mythtv-0.14/configfiles
$ cp lircrc.example ~/.lircrc
</PRE>
</CODE></BLOCKQUOTE>
 
or
<BLOCKQUOTE><CODE>
<PRE>
$ cp lircrc.example.pinnaclestudiopctv ~/.lircrc
</PRE>
</CODE></BLOCKQUOTE>

if you've got a Pinnacle Studio PCTV remote.
<BLOCKQUOTE><CODE>
<PRE>
$ irw
</PRE>
</CODE></BLOCKQUOTE>

Start pressing the keys on your remote; <B>irw</B> will
print the name of the button as it is defined in your
<CODE>/etc/lircd.conf</CODE>. If you don't see anything at this point, you need
to troubleshoot further by going back to the lirc home page and investigating
from there.</P>
<P>If it is working, then press <B>CTRL-C</B> to abort the program.  Once you
know that your remote is working, you can either recompile MythTV with
native lirc support (edit the <CODE>settings.pro</CODE> file and remove the "#"
from the lirc option, then make <CODE>distclean</CODE> and <CODE>make</CODE>) or you
need to run the <B>irxevent</B> program, which takes the key presses and
sends them to MythTV.  If you use native lirc support, you don't need to run
<B>irxevent</B>.  If you are going to use irxevent, then you need to run
it like this:
<BLOCKQUOTE><CODE>
<PRE>
$ irxevent &amp;
</PRE>
</CODE></BLOCKQUOTE>

If <B>irxevent</B> isn't running, then MythTV will not respond to your remote
control unless you're using native lirc support.</P>

<H2><A NAME="ss8.6">8.6</A> <A HREF="#toc8.6">Additional information for lirc.</A>
</H2>

<P>Take a look at the lircrc.example files in the <CODE>configfiles/</CODE>
directory.  In my case, (Pinnacle Studio card) the channel up and down functions
weren't working, due to the fact that the button names were different than
the default <CODE>lircrc.example</CODE> file that came with MythTV.</P>
<P>The <CODE>lircrc.example</CODE> file has this:
<BLOCKQUOTE><CODE>
<PRE>
begin
    prog = irxevent
    button = ChannelUp
    config = Key Up CurrentWindow
end

begin
    prog = irxevent
    button = ChannelDown
    config = Key Down CurrentWindow
end
</PRE>
</CODE></BLOCKQUOTE>

but the <CODE>/etc/lircd.conf</CODE> that comes in the lircd package 
defines the buttons for the Pinnacle Studio PCTV as:
<BLOCKQUOTE><CODE>
<PRE>
          channel+                 0x0000000000000017
          channel-                 0x000000000000001C
</PRE>
</CODE></BLOCKQUOTE>

rather than "ChannelUp" and "ChannelDown".  I added the 
following to my /home/[yourusername]/.lircrc file:
<BLOCKQUOTE><CODE>
<PRE>
begin
    prog = irxevent
    button = channel+
    repeat = 3
    config = Key Up CurrentWindow
end

begin
    prog = irxevent
    button = channel-
    repeat = 3
    config = Key Down CurrentWindow
end
</PRE>
</CODE></BLOCKQUOTE>

which took care of basic functionality.  Because the PCTV Studio remote
has additional buttons, look at the
<CODE>configfiles/lircrc.example.pinnaclestudiopctv</CODE> for an example of how
to define additional buttons, and how to debug potential button name
conflicts between the <CODE>lircrc.example</CODE> file and how <B>your</B>
remote defines the button names.</P>
<P>By examining the button names defined in <CODE>/etc/lircd.conf</CODE> and using
the <B>irw</B> program to make sure that your remote is working, you can
create the appropriate mappings in <CODE>.lircrc</CODE> to get excellent remote
functionality with MythTV.</P>
<P>Note the <B>repeat =</B> parameter.  This informs the <CODE>irxevent</CODE>
program to pass through every third keypress.  By default, <CODE>lirc</CODE>
will only send one keypress to the application, even if you're holding down
the key.  The actual <B>repeat =</B> number will vary from system to
system, so experiment and see which value works best for you.</P>

<H2><A NAME="ss8.7">8.7</A> <A HREF="#toc8.7">Configuring lirc for use with an IR blaster.</A>
</H2>

<P>By Carlos Talbot, 
<A HREF="mailto:carlos@talbot.net">mailto:carlos@talbot.net</A></P>
<P>Lirc has support for various IR transmitters. A popular model is the Actisys
IR-200L 
<A HREF="http://store.yahoo.com/snapstreammedia/irblasbun.html">http://store.yahoo.com/snapstreammedia/irblasbun.html</A>. It was
originally designed for IRDA communication, but can be used to transmit A/V remote
control codes. By using the lirc SIR driver, this device can easily be
integrated with MythTV. I have tested this device with an AT&amp;T DCT2000
digital cable box but the instructions can be used to configure other IRDA
devices and A/V remotes.</P>
<P>Follow the steps in the previous section.  When you run setup.sh, select
option 1, driver configuration. From here select option 6, IrDA hardware.
Select your appropriate device and the corresponding serial port, then Save
configuration &amp; run configure from the main menu. Once configure is done
type:
<BLOCKQUOTE><CODE>
<PRE>
$ make
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Please note: unlike the Pinnacle receiver above you will be compiling lircd
in addition to a kernel module for the SIR transmitter. Depending on whether
you have your serial port driver configured as a kernel module you might see
the following message during make:
<BLOCKQUOTE><CODE>
<PRE>
lirc_sir.c:56:2: warning: #warning
"******************************************"

lirc_sir.c:57:2: warning: #warning "Your serial port driver is compiled into "

lirc_sir.c:58:2: warning: #warning "the kernel. You will have to release the "

lirc_sir.c:59:2: warning: #warning "port you want to use for LIRC with:"

lirc_sir.c:60:2: warning: #warning "setserial /dev/ttySx uart none"

lirc_sir.c:61:2: warning: #warning
"******************************************"
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you do receive this statement make sure to run the <B>setserial</B> command
before you load the lirc_sir module. Follow this with the install:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>You will notice that lirc installs the kernel module in
<CODE>/lib/modules/uname -a/misc</CODE>. </P>
<P>The configuration for starting <B>lircd</B> differs if you're going to be
sending and receiving IR versus just receiving.
<BLOCKQUOTE><CODE>
<PRE>
 
# cd /etc/rc.d
# cat >> rc.local
echo "Starting lircd"
setserial /dev/ttySx uart none        # (if required)
modprobe lirc_sir
/usr/local/sbin/lircd
^D
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>At this point you have to populate the <CODE>/etc/lircd.conf</CODE> file with the proper
codes for your A/V remote. You should be able to find your remote within the
lirc remote tar file located at 
<A HREF="http://www.lirc.org/remotes.tar.bz2">http://www.lirc.org/remotes.tar.bz2</A>. In my case I
extracted the file from remotes/motorola/DCT2000 (gi-motorola-dct2000)</P>
<P>To test the lirc_sir module you can run <B>irw</B> to verify the codes are being
received. If everything is configured correctly
you should see something similar to the following:
<BLOCKQUOTE><CODE>
<PRE>
$ irw
0000000000007ff0 00 1 gi-motorola-dct2000
000000000000bff8 00 2 gi-motorola-dct2000
000000000000f7f0 00 ENTER gi-motorola-dct2000
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Once you've verified lirc is working you can press <B>CTRL-C</B> to exit
<B>irw</B> and configure the channel changing script.</P>
<P>The path to the channel changing script will need to be entered on the
mythbackend setup screen for Input Connections.</P>
<P>This csh script will be called each time MythTV needs to change the channel.
Below is a copy of the script followed by the corresponding perl script.
Make sure both are in your path. Also make sure you leave the #!/bin/csh
setting and not change it to Bourne or bash. This will create a frustrating
symptom to diagnose where MythTV cannot open /dev/device. Unlike Bourne or
bash, csh scripts automatically close parent file descriptors before they
start.
<BLOCKQUOTE><CODE>
<PRE>
$ cd /usr/local/bin
# su
# cat > change_channel.csh
#!/bin/csh
echo "changing to $1"
/usr/local/bin/channel.pl $1 &amp;
^D
# chmod a+x change_channel.csh
# exit
$ exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>See <CODE>contrib/channel.pl</CODE> for the actual file.  Copy it to
<CODE>/usr/local/bin/</CODE></P>
<P>The last statement within the perl script is the lirc rc command. This is
the command that transmits the code to your cable/DSS box. Make sure to have
the IRDA device within a few feet of the box.</P>

<H2><A NAME="Configuring_mythtv"></A> <A NAME="s9">9.</A> <A HREF="#toc9">Configuring MythTV. </A></H2>

<P>By this point, all of the compile-time prerequisites have been installed,
<B>mysql</B> is running and has had its initial database setup.  It's now
time to configure MythTV.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  If you're running Debian unstable and you have compiled
MythTV from source, you will need to install an additional package before
you will be able to run MythTV.  Execute the following to install the MySQL
driver for QT.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
$ su -
# apt-get install libqt3c102-mt-mysql
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss9.1">9.1</A> <A HREF="#toc9.1">Configuring the Master backend system.</A>
</H2>

<P>Open a shell and decide where you will store your video files.  By
default, MythTV will assume that you will be using <CODE>/mnt/store/</CODE>, but
if this directory doesn't exist, or it exists and you don't have write
privileges to it then MythTV will fail when you attempt to make a recording. 
The following example is specific for <CODE>/var/video</CODE>, but the same
instructions would apply if you want to keep the default but don't have the
directory structure setup yet.  See the 
<A HREF="#advancedpartitionformatting">Advanced Partition Formatting</A> section for hints on creating a
partition for MythTV.</P>
<P>If you create a <CODE>/var/video</CODE> subdirectory, change
<CODE>/mnt/store/</CODE> to <CODE>/var/video/</CODE> in the setup screens.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# mkdir /var/video
# chmod a+rwx /var/video
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The first thing to configure is the Master backend system.  If you are
running multiple backend systems, the Master backend will make all
decisions about which programs will be recorded on which tuners.  If you
have only one backend, then it will be its own master.</P>
<P>The Master backend will always choose the first available tuner in the same
order as you add cards through "setup". In other words, the second card you
add will only be used when there are two overlapping recordings, the third
when there are three, and so on. Therefore, you will want to have the
greatest amount of disk space on the Master backend because its tuner will
always be the first choice. You will then want to add your 
<A HREF="#nonmaster_backend">other backends</A> in the order of your
preference for recording.</P>
<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:  It is possible to <EM>not</EM> have the cards on the Master
backend be the first ones used.  However, if you are new to MythTV it is
easier to configure the Master backend first before moving on to the Slaves,
at least until you become more familiar with the MythTV system.  See 
<A HREF="#advanced_backend_config">Advanced Backend Configurations</A> for
information on configuring multiple backend systems in various ways.</CAPTION>
</FIGURE>

Because MythTV now uses a database to store all configuration variables,
part of the bootstrap of MythTV is to indicate the location of the MySQL
database server. If the frontend, backend and MySQL database server are all
going to be running on the same box, you can continue to the next step.  If
not, you'll need to edit the <CODE>/usr/local/share/mythtv/mysql.txt</CODE> file
and change the first line to the IP address of the database server. 
All other configuration is within the MythTV GUI screens.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Users that have been running the frontend and the backend on
different machines have stated that they have been having issues with remote
access to the MySQL database.  The following instructions may or may not
work.  Add the following to <CODE>/etc/my.cnf</CODE> on the backend machine and
restart MySQL.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
skip-innodb
set-variable=thread_stack=256k
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Switch to the setup directory and run the setup program:
<BLOCKQUOTE><CODE>
<PRE>
$ cd setup
$ ./setup
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The backend setup program will start and offer you a number of choices.  It
is <EM>strongly</EM> recommended that you go through them in order.</P>
<P>The first question will ask if you wish to clear out your existing
configurations for your capture cards.  Initially, you should say "YES" so
that there are no surprises later.</P>
<P>The next question will ask you if you wish to clear out your video source
information.  You should answer "YES" to this as well.</P>
<P>Once the graphical setup starts, you'll see that there are five choices.
<OL>
<LI>General</LI>
<LI>Capture Cards</LI>
<LI>Video Sources</LI>
<LI>Input Connections</LI>
<LI>Channel Editor</LI>
</OL>
</P>
<P>Use the arrow keys to move around, and press the space bar to select which
option you wish to configure.</P>

<H3>General</H3>

<P>The first screen of the General configuration deals with IP addresses of the
system that you're running setup on and any master backend you may have.  If
you've only got one machine, then the default values are fine and you can
move to the next page by pressing the space bar.  If you need to move around
the screen, use the arrow keys to move focus between settings, not the
mouse.</P>
<P>If you will have multiple backends, then <EM>do not</EM> use the "127.0.0.1"
IP address.</P>
<P>It is very strongly discouraged that you make any changes to the port
settings from the defaults.</P>
<P>Once you're satisfied with the values, move the focus down to Next and hit
the space bar.</P>
<P>The next screen details the Host-specific Backend setup.  This is where you
will set the specific directory paths for this particular backend.  Make
sure that you've followed the steps at the beginning of this section and
created a directory that exists and that MythTV will have write privileges
to.  When you're done, press Next to continue, taking you to the Global
Backend Setup.</P>
<P>On the Global Backend Setup configure your backend with the appropriate
settings.  Use the left and right arrow keys to iterate through the choices
available on each setting, and the up and down keys to move between
settings.  Move to Finish when you're done and press the space bar, taking
you back to the main configuration screen.</P>

<H3>Capture Cards</H3>

<P>You should have no capture cards defined, so the highlight will be on
(New Capture Card).  Press space to begin.</P>
<P>Choose the appropriate settings for your particular tuner.  Use the arrow
keys to move around and to make your choices, and press RETURN when
complete.  Pressing RETURN will take you back to the Capture Cards screen;
if you have additional capture cards in this machine, press the space bar
when the highlight is on the (New Capture Card) row to define another card. 
Once you have no additional cards to setup, press ESC.</P>

<H3><A NAME="VideoSources"></A> Video Sources </H3>

<P>When you start, the highlight should be on (New Video Source).  Press the
space bar to begin.  The first field asks for the name of the video source.
You may choose something easy to remember, like "Antenna" or "Cable".  Once
you've chosen a name, press the down arrow to move to the next field.  </P>
<P><B>CVS Only</B>
If you're in North America, change the grabber to "DataDirect", then
continue pressing the down arrow to move to the next field.  Fill in the
username and password that you have established with DataDirect, then move
to the "Retrieve Listings" button and press the space bar.  </P>
<P><B>NOTE</B>: You need <B>wget</B> version 1.9.1 or higher to use
DataDirect.</P>
<P>The setup program will contact the Zap2It servers and get your account
information.  Once you're done, you may click the Finish button and skip the
next few paragraphs, since they only apply to users that are using the
external XMLTV script to get their guide data.</P>
<P>If you wish to continue using the XMLTV grabber, then move to the Zip/postal
code field and put in the appropriate value.</P>
<P><B>NOTE</B>:  As of 2004-05-04, the <B>tv_grab_na</B> grabber still
works, but you are strongly discouraged from using it.</P>
<P>If you're outside of North America, then some manual interaction will be
required with XMLTV.</P>
<P>Once you have chosen your provider, press RETURN to continue.  XMLTV will
now begin collecting the initial data for your location.  The screen may
blank for a few seconds to several minutes, depending on the load of the
listings provider and the speed of your connection to the Internet.  Be
patient!</P>
<P>You will then be returned to the Video Sources screen.  If you have multiple
video sources available, such as Antenna, Cable, etc, go ahead and define
them all, even if they're not all going to be physically connected to the
master backend server.  Once you're done, press ESC to return to the main
screen.</P>

<H3>Input Connections</H3>

<P>The final configuration item is Input Connections.  On this screen, you will
associate the various video sources you defined earlier with a physical
input to a encoder card.  It's entirely possible that you have multiple
tuners, and each tuner has a different input, so on this screen you let
MythTV know which device will connect to which input source.</P>
<P>When you start this screen, you should see a listing of the various input
connections available on each of the Capture cards you defined earlier.  For
example, you may have a capture card with a tuner, a SVideo and a Composite
connection.  If you wanted to associate the tuner (a.k.a., "Television") with
an "Antenna" source you defined in Video Sources, you would move to the
/dev/videodevice (Television) -> line and press the space bar.  Using the
left and right arrow keys will show you the various choices you have already
created for video source.  In our case, you would use the left/right cursor
keys until "Antenna" was shown in the Video Source field.  Press down to
move to the next setting, all of which should be self-explanatory.</P>
<P>Once you're done, press RETURN to go back to the Input Connections screen. 
You would then finish associating the video sources to any other hardware
devices you have available.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Don't add a video source to a hardware input if you don't
actually have anything connected there.  For example, adding "Cable" to the
Tuner and to the Composite inputs without having something connected to
Composite will lead to blank recordings.</CAPTION>
</FIGURE>
</P>
<P>Press ESC to return to the main menu, and press ESC again if you have no
further items to configure, thereby returning you to the command line.</P>

<H3>Channel Editor</H3>

<P>The channel editor is used to globally alter channel information,
including items like hue, contrast, finetuning and others.  Users in North
America shouldn't run the channel editor until after completing initial
setup and running <B>mythfilldatabase</B> at least once to populate the
database.</P>

<H2><A NAME="ss9.2">9.2</A> <A HREF="#toc9.2">Post-configuration.</A>
</H2>

<P>Run the <CODE>mythfilldatabase</CODE> program as directed.  The master
backend will obtain guide data for all the video sources you defined during
setup.</P>
<P>Once <CODE>mythfilldatabase</CODE> has finished, start the master server before
continuing.
<BLOCKQUOTE><CODE>
<PRE>
$ mythbackend
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>mythbackend will print information about connections and what it's doing to
the console.  If you'd like to see the options that are available for
mythbackend, type <CODE>mythbackend -h</CODE> for help.</P>
<P>As of 2003-10-03, the available options are:
<BLOCKQUOTE><CODE>
<PRE>
$ mythbackend -h
Valid options are:
-l or --logfile filename       Writes STDERR and STDOUT messages to filename
-p or --pidfile filename       Write PID of mythbackend to filename
-d or --daemon                 Runs mythbackend as a daemon
-v or --verbose debug-level    Prints more information
                               Accepts any combination (separated by comma)
                               of all,none,quiet,record,playback,
                               channel,osd,file,schedule,network
--printexpire                  List of auto-expire programs
--printsched                   Upcoming scheduled programs
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Running mythbackend as a daemon and using the logfile option will allow you
to have mythbackend automatically start up during the boot process.  For
example, you may add this to your <CODE>rc.local</CODE> file, or you can follow
the steps outlined in the section called 
<A HREF="#mythbackend_autostart">I'd like to automatically start mythbackend at system boot time</A>.</P>

<H2><A NAME="nonmaster_backend"></A> <A NAME="ss9.3">9.3</A> <A HREF="#toc9.3">Configuring a non-master backend. </A>
</H2>

<P>Configuration of a non-master backend follows the same general procedure
as that of the master backend, with the exception that you skip over the
"Video Sources" step.  All possible video sources need to be defined on the
master backend system; only the master backend will query a listings
provider to obtain guide data for all the slave backends.</P>
<P>Make sure that the IP addresses on the General setup screen are accurate. 
If the slave backend can't communicate with the master backend due to IP
address misconfiguration then MythTV will not function properly.</P>
<P>Ensure that you've granted access to the master MySQL database for remote
backends as discussed in the section titled 
<A HREF="#modify_perm_mysql">Modifying access to the MySQL database for multiple systems</A> and that
you've edited the <CODE>/usr/local/share/mythtv/mysql.txt</CODE> file and put
the correct IP address for the database server.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: Do not run <CODE>mythfilldatabase</CODE> on a non-master backend.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="ss9.4">9.4</A> <A HREF="#toc9.4">Configuring and running mythfilldatabase.</A>
</H2>

<P>
<FIGURE>
<EPS FILE="warning.eps">
<IMG SRC="warning.png">
<CAPTION><B>NOTE</B>:  <B>mythfilldatabase</B> might take a while to complete,
depending on any number of factors, most of which you can't control.  It's
best to just let the program run to completion.</CAPTION>
</FIGURE>

<B>mythfilldatabase --help</B> will give a full listing of the options
available.  </P>
<P><B>mythfilldatabase --manual</B> is another option; the manual option will
allow you to fine tune channel frequencies and specify which channels will
be added to the database.  If you are not using the tv_grab_na grabber, you
must use the <B>--manual</B> option.</P>
<P><B>mythfilldatabase --file</B> is an option if there isn't an XMLTV grabber
for your country, but you <B>do</B> have an XML formatted listings file
created by some other program.</P>
<P><B>mythfilldatabase --xawchannels</B> is an option if you have used
<B>xawtv</B> to fine-tune your channels and would like to import the fine
tuning offsets into MythTV.</P>
<P><B>mythfilldatabase --refresh-today</B> will only pull guide data for
today (in case of late-breaking changes to the schedule).</P>


<H3>Periodically running <B>mythfilldatabase</B></H3>

<P>In order to keep your database filled, <B>mythfilldatabase</B> should be
run once a day.</P>
<P>There are three ways to accomplish this:  use the built-in capability of
MythTV to run the <B>mythfilldatabase</B> program (recommended, but only
available in CVS), as a user-based cron job, or as a system based cron.  If
you use a user-based cron, you can select the time that the cron job will be
run.  A system-based cron job will run at the same time as any other system
cron jobs.</P>

<H3>Using the built-in method.</H3>

<P>To use MythTV's built-in capability, you'll need to run the
<B>mythfrontend</B> Setup option.  From the MythFrontend, enter the
Setup>General screen and advance to "Mythfilldatabase", the fourth screen.
Select the checkbox, then complete the options as you see fit.  The
<B>mythbackend</B> program will now run <B>mythfilldatabase</B> at the
times you specify.</P>
<P><B>NOTE</B>:  Don't use the built-in and cron methods at the same time. 
If you switch to the native method, ensure that you've removed any user or
system cron jobs that you may have been using.</P>
<H3>Using the cron method.</H3>

<P>If you are a Mandrake 9.0 user and wish to use a system cron job, you can
perform the following steps:
<BLOCKQUOTE><CODE>
<PRE>
$ cd configfiles
$ su
# cp mythfilldatabasecron /etc/cron.daily
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you want to know what time your job will run, you can do the following:
<BLOCKQUOTE><CODE>
<PRE>
# cat /etc/crontab
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=root
HOME=/

# run-parts
01 * * * * root nice -n 19 run-parts /etc/cron.hourly
02 4 * * * root nice -n 19 run-parts /etc/cron.daily
22 4 * * 0 root nice -n 19 run-parts /etc/cron.weekly
42 4 1 * * root nice -n 19 run-parts /etc/cron.monthly
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>

We can see from the display that the cron.daily job will run at 0402 every
morning.</P>
<P>If you wish to specify a custom time, then the user-based cron job is the
better method.</P>
<P>The default <B>configfiles/mythcrontab</B> file will run the
<B>mythfilldatabase</B> program every day at 0430.  Placing a copy of the
default <B>configfiles/mythcrontab</B> into your <CODE>~/.mythtv</CODE>
directory will allow you to edit your copy and maintain the original if you
get into trouble. To change the time used to start the
<B>mythfilldatabase</B> process, open the <CODE>~/.mythtv/mythcrontab</CODE>
file in your favorite editor and modify it as you like.  Once you're
satisfied with the time that <B>mythfilldatabase</B> will run, save and
exit, and return to the shell prompt.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cp ~/mythtv/configfiles/mythfilldatabasecron ~/.mythtv
$ cp ~/mythtv/configfiles/mythcrontab ~/.mythtv
$ cd ~/.mythtv
$ crontab mythcrontab
$ crontab -l  NOTE: this is a lowercase L.
# The following will run the mythfilldatabase shell script at 0430
# every day.  Format is
# minutes hour day_of_month month day_of_week
# man 5 crontab for more information
# Need to use a shell script because the QTDIR environment variable isn't
# being honored by crontab?
# The next text should be all on the same line.
30 04 * * * /bin/bash $HOME/.mythtv/mythfilldatabasecron
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>As you can see, <B>mythfilldatabase</B> will now be run at 0430
every day.</P>
<P>If you decide to alter the time that the <B>mythfilldatabase</B> runs,
you can use the crontab command to open your existing job and edit it in
place.
<BLOCKQUOTE><CODE>
<PRE>
$ crontab -e
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The <B>crontab -e</B> command will allow you to edit the existing crontab.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  By default, the crontab will use <B>vi</B> as your
editor.  If you don't like to use <B>vi</B>, make sure that you've set
<CODE>VISUAL</CODE> to something other than <B>vi</B>.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
$ export VISUAL=/usr/bin/joe
$ crontab -e
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>This will cause <B>crontab</B> to use <B>joe</B>, a visual editor that
uses the Wordstar command sequence.  You may use <B>emacs</B>, or any
other editor that you're comfortable with.  You may also add the
<CODE>EXPORT</CODE> command to your <CODE>.bashrc</CODE> or to the
<CODE>/etc/profile.d/mythtv.sh</CODE> file.</P>

<H2><A NAME="s10">10.</A> <A HREF="#toc10">Configuring mythfrontend.</A></H2>

<P>Once you have completed configuration of your backend systems, the next
step is to configure the frontend client.  </P>
<P>When you start mythfrontend, you should have a number of choices.  Before
doing anything, go to TV, then to Setup and configure the frontend client.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  You should go through the various setup screens in
mythfrontend before using any other modules such as MythMusic, etc. to
correctly initialize the database.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="ss10.1">10.1</A> <A HREF="#toc10.1">General</A>
</H2>

<P>The General screen has configuration items that don't really fit anywhere
else.  The first few configuration items asks you to indicate the number of
seconds to record before or after a program, which is useful if the
broadcast network or your system clock are out of sync and will help prevent
you missing the beginning or end of a program.  </P>
<P>To change the value, use the left and right arrow keys to increment and
decrement the number of seconds.  When you're satisfied with the result, use
the down arrow to put the input focus on the Next button or press RETURN to
continue to the next page.</P>
<P>The next page has a number of options to do with how channels are displayed
on your system.  The help text will give you more information.  Move the
focus to Next and press the space bar to continue.</P>
<P>The final General page sets up some final configuration items.  See the help
text for more information.</P>

<H2><A NAME="ss10.2">10.2</A> <A HREF="#toc10.2">Appearance</A>
</H2>

<P>This set of screens is mostly concerned with how MythTV will look on your
system.  From here, you can choose different themes and set the resolution
of your system.</P>

<H2><A NAME="ss10.3">10.3</A> <A HREF="#toc10.3">Program Guide</A>
</H2>

<P>Fairly self explanatory.  Note that the alternate program guide does not
use the same font settings as defined in Appearance, so if the EPG is
unreadable this is where you make the adjustments to fonts, number of
elements displayed, etc.</P>

<H2><A NAME="deinterlace_"></A> <A NAME="ss10.4">10.4</A> <A HREF="#toc10.4">Playback </A>
 </H2>

<P>The one configuration item which may cause problems on your system is the
"Deinterlace playback" setting.  MythTV uses a linear blend algorithm for
deinterlacing, which will improve how the image looks on your screen. 
Deinterlacing requires that your processor support SSE. (Streaming SIMD
Extensions, aka "MMX2").  Early Intel Celeron (those that don't use the
Coppermine 0.18um core and are usually &lt;600MHz), Pentium Pro and Pentium II
CPUs do not have SSE, so make sure that you haven't enabled deinterlacing if
your processor doesn't support it. If you enable it, and your processor
doesn't support SSE, you will get "Illegal Instruction" errors.</P>
<P>To determine if you've got SSE on an Intel processor, you can:
<BLOCKQUOTE><CODE>
<PRE>
$ cat /proc/cpuinfo
[snip]
flags           : fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca
cmov pat pse36 mmx fxsr sse
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Notice the <B>sse</B> at the end of the line - this tells you that this
processor will be able to deinterlace correctly.</P>
<P>On an AMD processor, look for "3dnow" in the cpuinfo line; "3dnow" is AMD's
implementation of SSE instructions, so if your processor has 3dnow you
shouldn't have any issues with deinterlacing.</P>
<H3>Video Filters</H3>

<P>MythTV provides a facility to include video filters while recording and
during playback. These filters can be used to improve or modify the video
image, including hiding the effects of an interlaced image or reducing the
effects of noise in a poor video signal. The following is a brief
introduction to introduce you to the filters that are available in MythTV
version 0.14.</P>
<H3>Applying filters</H3>

<P>One or more filters can be included in a "filter chain". The filters to
be used are identified in a "filter string". A filter string is a group of
filter names and parameters separated by commas.  To include parameters, the
filter name is followed by "=" and the parameter information. There should
be no spaces in the filter string. Here is an example filter string:</P>
<P>With parameters: <CODE>kerneldeint=10:1,denoise3d=12</CODE></P>
<P>Without: <CODE>kerneldeint,denoise3d</CODE></P>
<P>Recording filters are set for each individual channel. These may be used
when encoding in software (MPEG-4, RTjpeg) but do not apply when using a
capture card with hardware encoding such as those supported by the ivtv
driver, DVB, HDTV or MJPEG cards. You can run MythTV's "setup" program and
select the "Channel Editor". On the first page for each channel, you can
enter a filter string in the box titled "Video filters". If you are running
"mythweb" on your web server, you can click on "Settings" then "Channels"
and enter filter strings in the "videofilters" column.</P>
<P>Playback filters are per-host and apply to any recording you watch from the
frontend where filters have been applied. Playback filtering can only
work with software decoding so the viaslice, xvmc, and ivtv outputs ignore
filters entirely. From "mythfrontend" go to Setup->TV Settings->Playback.
Enter your filter string in the box titled "Custom Filters".</P>

<H3>Currently Available Filters</H3>

<P>"Deinterlace Playback" checkbox.</P>
<P>This implements the linearblend algorithm.  If you don't want linearblend
included at the head of your custom filter chain, make sure that this box is
unchecked.</P>
<P>o  The "invert" filter</P>
<P>Invert ignores any parameters and inverts the pixel values of the video
frames.  In other words, a negative image. This would rarely be useful but
may be a good example to verify that your filter strings take effect.</P>
<P>o  The "linearblend" filter</P>
<P>It is a simple deinterlacing filter that ignores parameters and works by
blending adjacent lines.  It replaces combing in interlaced video with a
less distracting "ghost" image.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: This filter is appended to the filter chain when "Deinterlace
playback" has been checked. If you use "kerneldeint" or "linearblend" for
deinterlacing in your filter string, you should not check "Deinterlace
playback".</CAPTION>
</FIGURE>

o  The "kerneldeint" filter</P>
<P>Kerneldeint is a more complex deinterlacing filter, which applies a filter
kernel using input from several lines.  It generally removes combing without
a "ghost" image, sometimes leaving a faint outline of the the image from the
other field. It is considered to be less distracting to watch than
linearblend or no filter at all. It accepts one or two integer parameters
separated by a colon.</P>
<P>The first parameter is the filter threshold and defaults to 12. Adjacent
lines differing by more than the threshold value are filtered. The second
option defaults to 0.  If set to a non-zero value, it will cause the filter
to skip chroma, and filter only the luminance.  It may be useful on some
capture cards which do not capture the chroma fields of interlaced video
correctly.</P>
<P>o  The "quickdnr" filter</P>
<P>A fast temporal denoiser. This can take 1, 2 or 4 parameters, each being a
value from "0" for the least filtering to "255" for the greatest filtering.
With one parameter, the filter will compute the values it should use for all
of its variables. Two parameters will set the filter strength for luma and
chroma independently. If you are interested in how the algorithm works, you
may examine the source code to see how four parameter are used.</P>
<P>o  The "denoise3d" filter</P>
<P>A slower denoiser that applies a spatial and temporal low-pass filter. The
spatial filter can remove some noise that quickdnr can't, but a more
powerful CPU is needed.  This filter accepts 3 float parameters:</P>
<P>
<UL>
<LI>luma spatial filter strength</LI>
<LI>chroma spatial filter strength</LI>
<LI>luma temporal filter strength</LI>
</UL>
</P>
<P>Reasonable defaults will be selected for omitted parameters.  The chroma
temporal filter strength is calculated from the other filter strengths.</P>
<P>o  The "crop" filter</P>
<P>Covers edges of video with black bars.  This helps improve video quality
when the edges of the frame are distorted. By default, this removes 16
pixels from each edge. This can optionally take four parameters representing
top:left:bottom:right. The number times 16 is the number of pixels to remove
so, for example, the default is "=1:1:1:1".</P>
<P>o  The "forceyv12" and "forceyuv422p" filters</P>
<P>These force the filter manager to use the given format.  You can use one of
these at the head of a filter chain to change the capture format. The most
likely use would be forceyuv422p to use YUV422P capture on cards with known
chroma interlacing problems with YV12.</P>
<P>There are some filters included in the MythTV source code that should 
not be used:</P>
<P>o  The "forcergb24" and "forceargb32" filters</P>
<P>The two RGB formats should not be used because there is no conversion filter
for them yet.</P>
<P>o  The "convert" filter</P>
<P>It exists but don't use it.  The filter manager uses this filter
automatically when it is unable to match the input/output formats of two
adjacent filters.</P>
<P>o  The "postprocess" filter</P>
<P>While this exists in MythTV source code, it is currently not recommended for
use.</P>

<H3>Usage Considerations</H3>

<P>There are trade-offs to consider when deciding if it would be wise to use
a filter. Any processing will modify the original image so you should assess
if the filter has made a noticeable improvement to the picture in order to
justify the impact of the processing.  Adding any filter will inherently
increase CPU usage. The impact can vary dramatically depending on your CPU
type and speed, the resolution of the recording, which filters you are using
and other factors. You can only determine what is right for you through
experimentation. However, as a starting point, here are some filter strings
that you may find useful:</P>
<P>For typical broadcast stations:      "kerneldeint,denoise3d"</P>
<P>For stations with poor signal quality: "kerneldeint,denoise3d=12"</P>

<H2><A NAME="ss10.5">10.5</A> <A HREF="#toc10.5">Recording </A>
</H2>

<P>Depending on your capture card, MythTV offers different video encoders. 
The following types of hardware encoding cards are supported:
<UL>
<LI>MJPEG - Zoran-based cards; see 
<A HREF="http://mjpeg.sourceforge.net">http://mjpeg.sourceforge.net</A></LI>
<LI>MPEG-2 - iTVC15 based cards (Hauppauge PVR-250/PVR-350); see 
<A HREF="http://ivtv.sourceforge.net">http://ivtv.sourceforge.net</A></LI>
<LI>HDTV - pcHDTV cards; see 
<A HREF="http://pchdtv.com">http://pchdtv.com</A></LI>
<LI>DVB - cards supporting DVB; see 
<A HREF="http://linuxtv.org">http://linuxtv.org</A></LI>
</UL>

For cards without hardware encoding capabilities (all cards supported by
V4L not listed above), Myth includes two methods for software encoding:
RTjpeg and MPEG-4.  RTjpeg has significantly fewer CPU demands than MPEG-4,
but it generates larger files than MPEG-4 for a given recording.</P>
<P>For DVB and HDTV cards, no further configuration is required after
setting up the card using the 'setup' program.
For all other cards, configuration is done through MythFrontend. 
Selecting 'Recording Profiles' from the 'TV Settings' screen will list
the profiles currently available for the cards in your system. 
Depending on what types of cards you have installed you may see:
<BLOCKQUOTE><CODE>
<PRE>
(Create new profile group)
Software Encoders
Hardware MPEG Encoders
Hardware MJPEG Encoders
Transcoders
</PRE>
</CODE></BLOCKQUOTE>

The '(Create new profile group)' option will allow you to create custom
profiles in case you have multiple backends.  Note that custom profiles
are per backend and card type.  If you have 2 MPEG-2 encoders in a given
backend system, creating a custom profile will affect both of them.  This
option should not be needed otherwise.</P>
<P>The 'Transcoders' group is a little different from the others.  Selecting
this group will result in a menu with the following options: 'RTjpeg/MPEG-4'
and 'MPEG-2'.  These types indicate what transcoder options will be used for
a given input type (i.e. the 'MPEG-2' settings would be used to transcode
MPEG-2 files into MPEG-4.  The source of the MPEG-2 stream (DVB, HDTV, or
PVR-x50) does not matter. Configuration of the options is the same as below
(although any resolution settings will be ignored).</P>
<P>Selecting any of the other options will show a new screen with a list of
four profiles:
<UL>
<LI>Default</LI>
<LI>Live TV</LI>
<LI>Low Quality</LI>
<LI>High Quality</LI>
</UL>
</P>
<P>The Default profile will be used for any recording which does not otherwise
have a specific profile assigned. The 'Live TV' profile will be used when
watching TV.  The remaining two profiles are available for customizing to
allow for more precise control over what quality is used for a given
program.</P>
<P>Selecting a profile will allow you to adjust the relevant options for that
card.  The most significant setting is the recording resolution, but you can
also choose encoding format, audio format, and tweak other encoder specific
properties.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: although the width and height can be changed to almost
anything, if you start MythTV and don't see video or you get "segmentation
fault" errors, it is likely that the video4linux (v4l) subsystem did not
like the height and width parameters specified.  It's best to leave the
default as-is until you're sure that MythTV is operational.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="ss10.6">10.6</A> <A HREF="#toc10.6">Xbox Frontends</A>
</H2>

<P>MythTV is able to control the LED on the Xbox to indicate backend
recording status.  </P>
<P>To control the LED, you will need the <B>blink</B> program from the
xbox-linux project, which is installed as <CODE>/bin/led</CODE> on GentooX.  On
Xebian (the new Ed's Debian) you must install it yourself.  On other
distributions it may or may not be installed as a program called
<B>blink</B> and should be located in your path.  (Type <CODE>which
blink</CODE> to see if the program is available.) If you do not have
<B>blink</B>, you may obtain it from the Xbox-Linux project site at 
<A HREF="http://xbox-linux.sf.net/">http://xbox-linux.sf.net/</A>. The
program you need is part of the <CODE>eds_i2c_staff</CODE> module in CVS.  Note
the spelling.</P>
<P>Once you have installed <B>blink</B> you will need to set permissions. 
<B>blink</B> needs write permission to the i2c device to function
properly.  There are three methods to accomplish this.  First, you could run
<CODE>mythfrontend</CODE> as root, which is the simplest method, but could
potentially be a security risk.  Next, you may make the <B>blink</B>
binary setuid root, which allows non-privileged users to run a program with
root capability.  This is done by typing the command:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# chmod u+s /path/to/blink
</PRE>
</CODE></BLOCKQUOTE>

The final technique would be to set the <CODE>/dev/i2c/0</CODE> device read/write
for all users, but this is the least preferred method.</P>
<P>Now it's time to setup MythTV for Xbox hardware.  Enter Setup -> General. 
On the second page check the 'Enable Xbox Hardware' option.  Upon reentering
the settings, you should have a new option named 'Xbox'.  Within this option
you may select the distribution, LED colors for recording and the update
interval.  If you select GentooX as the distribution <B>led</B> will be
used as the <B>blink</B> binary name, otherwise, <B>blink</B> is used. 
Colors should be self explanatory.  The update interval determines how often
the frontend should poll the backend to determine if the status has changed.</P>

<H2><A NAME="s11">11.</A> <A HREF="#toc11">Using MythTV.</A></H2>

<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE to Red Hat users</B>:Red Hat Linux 9 ships with Gnome as
the default desktop environment.  However, Gnome seems to have issues with
window focus and window switching which sometimes cause mythfrontend to
obscure the video. KDE does not seem to have any such issues. Therefore you
will need to switch to KDE by selecting RedHatMenu>Extras>System
Settings>Desktop Switching Tool and choose "KDE".</CAPTION>
</FIGURE>
</P>
<H2><A NAME="ss11.1">11.1</A> <A HREF="#toc11.1">Keyboard commands.</A>
</H2>

<P>The <CODE>keys.txt</CODE> file describes what the various keyboard commands are.
If you have loaded mythweb, you may change the default keys to your liking.</P>
<H3>mythfrontend</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Arrow keys </TD><TD> used to move the highlight point around </TD></TR><TR><TD>
ALT-F4 </TD><TD> exit out of the application </TD></TR><TR><TD>
Space/Enter     </TD><TD> take action on the item under the highlight point </TD></TR><TR><TD>
P </TD><TD> play in both "Watch a Recording" and "Delete a Recording"   </TD></TR><TR><TD>
D </TD><TD> delete in both "Watch a Recording" and "Delete a Recording" </TD></TR><TR><TD>
I </TD><TD> edit recording options from the EPG, "Program Finder",&nbsp;"Program Recording Priorities", or "Fix Scheduling Conflicts"&nbsp;screens. From the Playback and Delete screens, 'I' presents&nbsp;options for recorded shows such as Auto Expire or Stop Recording.&nbsp;Pressing 'I' while on the Recording Options screen will take you&nbsp;to the Advanced Recording Options screen.
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Watching TV or a recording</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Up or down      </TD><TD> keys change the channel </TD></TR><TR><TD>
num pad </TD><TD> Type a number to enter a channel number or jump amount (HHMM format) </TD></TR><TR><TD>
P </TD><TD> pause / play </TD></TR><TR><TD>
C </TD><TD> change inputs on TV Tuner card </TD></TR><TR><TD>
ESC </TD><TD> quits </TD></TR><TR><TD>
I </TD><TD> puts the On-screen Display up again. During playback, 'I' toggles&nbsp;between position and show description info. If a jump amount is&nbsp;entered, jump to that position. </TD></TR><TR><TD>
M </TD><TD> brings up the electronic program guide (Grid) -- see the EPG section </TD></TR><TR><TD>
Page Up </TD><TD> jump back the configured number of minutes (default is 10) </TD></TR><TR><TD>
Page Down       </TD><TD> jump ahead the configured number of minutes (default is 10) </TD></TR><TR><TD>
End or Z        </TD><TD> skip to next commercial break marker </TD></TR><TR><TD>
Home or Q       </TD><TD> skip back to previous commercial break marker </TD></TR><TR><TD>
T </TD><TD> toggle close caption support </TD></TR><TR><TD>
F </TD><TD> rotate between the various Picture Adjustments (Colour, Hue, etc.)&nbsp;While Picture Adjustment is on-screen, use Left and Right arrows to&nbsp;adjust. These settings adjust the look of the video playback, and are&nbsp;independent of the G-key settings used at record-time. </TD></TR><TR><TD>
[ or F10        </TD><TD> decrease volume </TD></TR><TR><TD>
] or F11        </TD><TD> increase volume </TD></TR><TR><TD>
| or F9 </TD><TD> toggle mute </TD></TR><TR><TD>
/ </TD><TD> jump to the next "favorite" channel </TD></TR><TR><TD>
? </TD><TD> mark/unmark the current channel as a "favorite" </TD></TR><TR><TD>
U </TD><TD> increase the play speed </TD></TR><TR><TD>
J </TD><TD> decrease the play speed </TD></TR><TR><TD>
W </TD><TD> cycle through 4:3 aspect ratio, 16:9, 4:3 Zoom (like Pan and Scan),&nbsp;16:9 Zoom, and 16:9 Stretch (eliminates black sidebars in TV signal) </TD></TR><TR><TD>
Left </TD><TD> (if a jump amount is entered) to jump back that amount </TD></TR><TR><TD>
Right </TD><TD> (if a jump amount is entered) to jump ahead that amount </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> <B>Without the stickykeys option selected</B> </TD></TR><TR><TD>
Left </TD><TD> rewind the configured number of seconds (default is 5) </TD></TR><TR><TD>
Right </TD><TD> fast forward the configured number of seconds (default is 30) </TD></TR><TR><TD>
&lt; </TD><TD> starts rewind mode as if stickykeys are selected </TD></TR><TR><TD>
> </TD><TD> starts fast forward mode as if stickykeys are selected </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> <B>With Stickykeys option selected</B> </TD></TR><TR><TD>
Right </TD><TD> starts fast forward mode </TD></TR><TR><TD>
Left </TD><TD> starts rewind mode </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> <B>In fast forward or rewind mode:</B> </TD></TR><TR><TD>
Left/Right      </TD><TD> increases the ff/rew speed </TD></TR><TR><TD>
0 </TD><TD> plays at normal speed, but leaves the time indicator on screen </TD></TR><TR><TD>
1 or 2 </TD><TD> plays back more slowly than normal ff/rew speed (1 is slowest) </TD></TR><TR><TD>
3 </TD><TD> plays back at normal ff/rew speed </TD></TR><TR><TD>
4-9 </TD><TD> plays back faster than normal ff/rew speed (9 is fastest) </TD></TR><TR><TD>
Space </TD><TD> exits fast forward or rewind mode </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> <B>While video is paused:</B> </TD></TR><TR><TD>
Left </TD><TD> rewind 1 frame </TD></TR><TR><TD>
&lt; </TD><TD> rewind 1 second </TD></TR><TR><TD>
Right </TD><TD> advance 1 frame </TD></TR><TR><TD>
&gt; </TD><TD> advance 1 second
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Watching TV only</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
G       </TD><TD> rotate between the various Picture Adjustments (Colour, Hue, etc.)&nbsp;for recording. These values affect the look of the resulting .nuv&nbsp;file, and are independent of the playback picture settings. While&nbsp;Picture Adjustment is on-screen, use Left and Right arrows to adjust. </TD></TR><TR><TD>
H       </TD><TD> Channel history. Each repeat steps back through the previous channels. </TD></TR><TR><TD>
O       </TD><TD> Turns on 'Browse' mode, allowing user to browse channels and program&nbsp;info while watching current show FullScreen. </TD></TR><TR><TD>
F8      </TD><TD> toggle the sleep timer 30m->1hr->1hr30m->2hr->Off
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Watching a recording only</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Space/Enter </TD><TD> set a bookmark at that point. Next time you start the&nbsp;recording, you will automatically jump forward to this point&nbsp;and clear the bookmark. </TD></TR><TR><TD>
X </TD><TD> queues the current recording for transcoding </TD></TR><TR><TD>
O </TD><TD> brings up menu to allow toggling settings such as Commercial&nbsp;Auto-Skip, Auto-Expire, etc. </TD></TR><TR><TD>
E or M </TD><TD> enters/exits edit mode. </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> </TD></TR><TR><TD>
</TD><TD> <B>In edit mode</B> </TD></TR><TR><TD>
Left/Right      </TD><TD> move forward and backward </TD></TR><TR><TD>
Up/Down </TD><TD> alter the amount of time you jump forward and backward.&nbsp;Increments are: nearest cutpoint, nearest video keyframe, 1&nbsp;frame, 0.5 seconds, 1 second, 20 seconds, 1 minute, 5 minutes,&nbsp;and 10 minutes. </TD></TR><TR><TD>
PageUp/PageDown </TD><TD> move forward and backward to the nearest cut point </TD></TR><TR><TD>
&lt; or > </TD><TD> move forward or backward by 10 times the normal jump amount </TD></TR><TR><TD>
Space/Enter     </TD><TD> allows you to set or delete a cut point </TD></TR><TR><TD>
Z </TD><TD> loads the commercial skip list (if one exists) into the cutlist </TD></TR><TR><TD>
C or Q </TD><TD> clear all cut points in the cutlist
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>LiveTV Browse Mode</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Left </TD><TD> browse program prior to current listed program </TD></TR><TR><TD>
Right </TD><TD> browse program following current listed program </TD></TR><TR><TD>
Up </TD><TD> browse program on channel above current listed channel/program </TD></TR><TR><TD>
Down </TD><TD> browse program on channel below current listed channel/program </TD></TR><TR><TD>
/ </TD><TD> browse program on next favorite channel </TD></TR><TR><TD>
0-9 </TD><TD> enter a channel number to browse </TD></TR><TR><TD>
Space/Enter     </TD><TD> change channel to channel of current listed program </TD></TR><TR><TD>
R/r </TD><TD> Toggle recording of current program (cycles through types) </TD></TR><TR><TD>
ESC/O </TD><TD> Exit Browse mode
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Playback Recording Zoom Mode</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Left </TD><TD> Move video to Left </TD></TR><TR><TD>
Right </TD><TD> Move video to Right </TD></TR><TR><TD>
Up </TD><TD> Move video Up </TD></TR><TR><TD>
Down </TD><TD> Move video Down </TD></TR><TR><TD>
PageUp </TD><TD> Zoom In </TD></TR><TR><TD>
PageDown        </TD><TD> Zoom Out </TD></TR><TR><TD>
Space/Enter     </TD><TD> Exit Zoom mode leaving picture at current size and position </TD></TR><TR><TD>
ESC </TD><TD> Exit Zoom mode and return to original size
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>If you have two or more tuner cards</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
V       </TD><TD> toggle Picture-in-picture on or off </TD></TR><TR><TD>
B       </TD><TD> toggles the window focus (lets you change channels on the PiP window) </TD></TR><TR><TD>
N       </TD><TD> swaps the two channels by changing channels on both cards
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>EPG</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Arrows </TD><TD> are used to move the highlighted program point around </TD></TR><TR><TD>
A, D, S, W </TD><TD> perform the same as left, right, down and up </TD></TR><TR><TD>
PageUp/PageDown </TD><TD> move the channel list up or down a page </TD></TR><TR><TD>
Home/End </TD><TD> move the highlight left or right by one day </TD></TR><TR><TD>
Ctrl+Left or &lt; </TD><TD> move the highlight left by one page </TD></TR><TR><TD>
Ctrl+Right or &gt; </TD><TD> move the highlight right by one page </TD></TR><TR><TD>
9, 3, 7, 1 </TD><TD> (like a numeric keypad) perform the same as PageUp, PageDown,&nbsp;Home and End </TD></TR><TR><TD>
I </TD><TD> bring up more information about a show, and allow you to&nbsp;schedule a recording. If you select "Record this showing"&nbsp;while watching Live TV you can "Instant Record" a program. </TD></TR><TR><TD>
Space/Enter </TD><TD> allow you resolve conflicts or change overrides. If the&nbsp;program is not already scheduled to record, it will instead act like&nbsp;pressing 'I'. </TD></TR><TR><TD>
M </TD><TD> when on a channel will change to that channel </TD></TR><TR><TD>
ESC or C </TD><TD> exits without changing the channel </TD></TR><TR><TD>
R </TD><TD> change the current item from Recording/Not-Recording.&nbsp;Successive keypresses cycle through the scheduled recording&nbsp;type list. </TD></TR><TR><TD>
X </TD><TD> change the channel to the currently selected channel without&nbsp;leaving the EPG (Most useful in the alternate EPG) </TD></TR><TR><TD>
/ </TD><TD> mark/unmark the current channel as a "favorite" </TD></TR><TR><TD>
4 </TD><TD> toggle the guide listing between all channels and filtered&nbsp;"favorites"
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Setting Program or Channel Recording Priorities</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Right </TD><TD> increases priority value        </TD></TR><TR><TD>
Left </TD><TD> decreases priority value </TD></TR><TR><TD>
1 </TD><TD> sorts by title </TD></TR><TR><TD>
2 </TD><TD> sorts by priority </TD></TR><TR><TD>
Home/End        </TD><TD> toggle sort priority </TD></TR><TR><TD>
I </TD><TD> edit recording options      </TD></TR><TR><TD>
ESC </TD><TD> commits changes and exits
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Viewing Scheduled Recordings/Resolving Conflicts</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
1 </TD><TD> show all recordings </TD></TR><TR><TD>
2 </TD><TD> show only important recordings </TD></TR><TR><TD>
Home/End        </TD><TD> toggle show showing all/important </TD></TR><TR><TD>
I </TD><TD> edit recording options </TD></TR><TR><TD>
Space/Enter     </TD><TD> resolve conflict or override
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Viewing Search Listings</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
Home    </TD><TD> change to the previous view if applicable     </TD></TR><TR><TD>
End     </TD><TD> change to the next view if applicable </TD></TR><TR><TD>
M       </TD><TD> select another view if applicable. In the&nbsp;title and description search popup, press&nbsp;M again to edit or delete the selected view.
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Recording Profiles Setup Screen</H3>

<P>
<BR><CENTER>
<TABLE BORDER><TR><TD>
D       </TD><TD> on a custom profile group displays a popup to delete the group</TD></TR><TR><TD>
</TD></TR></TABLE>
</CENTER><BR>
</P>
<H3>Recording Groups</H3>

<P>In the Watch Recordings screen, Recording Groups allow you to separate
programs into user-defined categories, such as "Kids", "Alice", "Bob", etc. 
This can be used to reduce clutter, or to segregate content if you use the
PIN function.
<BR><CENTER>
<TABLE BORDER><TR><TD>
M       </TD><TD> change the view or to set a group password </TD></TR><TR><TD>
I       </TD><TD> move a program from one Recording Group to another
</TD></TR></TABLE>
</CENTER><BR>
</P>

<H3>Remote Controls</H3>

<P>If you are using MythTV with just a remote control then it is suggested that you
map the remote control keys as described below.  Your remote control may not
have the same set of keys as those named below, the names are only a suggestion
that roughly correspond to the function.</P>
<P>If you are adding new key bindings to the program then consideration of this
suggested list will help users with remote controls.</P>
<P>This list assumes a minimal remote control that only has 20 keys, nearly all
features can be used with this configuration.  If you have more keys then you
can access all of the features.  With only 16 keys most features are usable.
<BR><CENTER>
<TABLE BORDER><TR><TD>
REMOTE CONTROL </TD><TD> LIRC KEYSTROKE </TD><TD> FUNCTION </TD></TR><TR><TD>
0 - 9 </TD><TD> 0 - 9 </TD><TD> channel selection, EPG navigation, ff/rew speed setting (with stickykeys)       </TD></TR><TR><TD>
Left Arrow </TD><TD> Left </TD><TD> scroll left, rewind </TD></TR><TR><TD>
Right Arrow </TD><TD> Right </TD><TD> scroll right, fast forward </TD></TR><TR><TD>
Up Arrow </TD><TD> Up </TD><TD> scroll up, channel change up </TD></TR><TR><TD>
Down Arrow </TD><TD> Down </TD><TD> scroll down, channel change down </TD></TR><TR><TD>
Select / OK / Play </TD><TD> Space </TD><TD> Select item, play (with stickykeys) set bookmark </TD></TR><TR><TD>
Cancel </TD><TD> Escape </TD><TD> Cancel, quit playback </TD></TR><TR><TD>
Menu </TD><TD> m </TD><TD> EPG (from watching TV) edit (from playback). </TD></TR><TR><TD>
Pause </TD><TD> p </TD><TD> Pause </TD></TR><TR><TD>
Other key 1 </TD><TD> i </TD><TD> Information </TD></TR><TR><TD>
Other key 2 </TD><TD> c </TD><TD> Change tuner card input
</TD></TR></TABLE>
</CENTER><BR>
</P>


<H2><A NAME="ss11.2">11.2</A> <A HREF="#toc11.2">Using themes with MythTV.</A>
</H2>

<P>MythTV is "themeable", meaning that the visual appearance of the program
can be modified by the user without re-compiling or altering the program
functionality.  The MythTV website has a Themes section; pick a theme you'd
like to use and download it to your system.</P>
<P>Once it's on your machine, you must move the file and untar it:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cp funhouse.tar.gz /usr/local/share/mythtv/themes
# cd /usr/local/share/mythtv/themes
# tar -xzf funhouse.tar.gz
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The theme will now be available in the mythfrontend Appearance section.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  if the theme file you downloaded is a <CODE>bz2</CODE> file, use
<CODE>tar -xjf</CODE> rather than <CODE>tar -xzf</CODE>.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="ss11.3">11.3</A> <A HREF="#toc11.3">Adding DirecTV information to the database.</A>
</H2>

<P>A script for adding DirecTV information into the database has been
written by tarek Lubani 
<A HREF="mailto:tarek@tarek.2y.net">mailto:tarek@tarek.2y.net</A> and is
available at 
<A HREF="http://tarek.2y.net/myth/ppv.pl">http://tarek.2y.net/myth/ppv.pl</A>.  This is currently an external
user-supplied program, so if you have issues with the script, please contact
the author.</P>

<H2><A NAME="ss11.4">11.4</A> <A HREF="#toc11.4">Adding support for an external tuner.</A>
</H2>

<P>MythTV supports changing the channel on an external tuner.  If you have
an external tuner, such as a DirecTV or digital cable set top box, you
should add <CODE>/usr/local/bin/changechannel</CODE> to your Input Connections in the
mythbackend configuration GUI.</P>
<P>The <B>changechannel</B> program is not supplied with MythTV, so this is
going to be dependent on what sort of external tuner you have.  Example
scripts for Sony and RCA receivers can be obtained from 
<A HREF="http://tarek.2y.net/myth/">http://tarek.2y.net/myth/</A>.  This is currently an external
user-supplied program, so if you have issues with the script, please contact
the author.</P>
<P>Feel free to browse some of what sort of hardware is available at 
<A HREF="http://shop.store.yahoo.com/snapstreammedia/cablepacks.html">http://shop.store.yahoo.com/snapstreammedia/cablepacks.html</A>, or if
you wish to assemble your own, rather than purchase, the following may be
helpful: 
<A HREF="http://www.snapstream.com/products/irblaster/sonydss.htm">http://www.snapstream.com/products/irblaster/sonydss.htm</A> for cable
pinouts for RCA DSS receivers.</P>

<H2><A NAME="ss11.5">11.5</A> <A HREF="#toc11.5">Using Shutdown/Wakeup</A>
</H2>

<P>What does the MythTV Shutdown/Wakeup function do? The scheduler on the
Master backend (MBE) keeps track of the idle status of the entire MythTV
system, including the Slave backends (SBE). If it considers the system to be
idle, and thus ready to shutdown, it sets the wakeuptime to the time of the
next recording and then proceeds to shut down all Slave backends and then
itself. Once it is time to begin recording, the Master backend and the Slave
Backends are automatically woken up.  This system allows MythTV to record
like a normal VCR, thereby conserving power when not in active use.</P>
<P>In order to use the Shutdown/Wakeup function there must be some method of
waking up the Master backend.  There are any number of solutions, but we
will discuss in detail two possibilities:</P>
<P>
<UL>
<LI>Use another server that runs 24/7 and have it send a WakeOnLAN (WOL)
packet to wake the Master backend.  This assumes that you have the WOL tools
installed, and that your Master backend motherboard supports WOL.</LI>
<LI>Use your motherboard's BIOS wakeup capability.  You'll need a motherboard
that supports BIOS wakeup, and some tools.  Two that work are: 
<A HREF="http://sourceforge.net/projects/nvram-wakeup">http://sourceforge.net/projects/nvram-wakeup</A> and 
<A HREF="http://www.malloc.de/tools/wakeup_clock.html">http://www.malloc.de/tools/wakeup_clock.html</A></LI>
</UL>
</P>

<H3>A deeper look into the operation</H3>

<P>The scheduler keeps track of the idle status of the MythTV system. To
determine whether or not the MythTV system is idle, the following conditions
must be met for a a period of time defined in the "Idle timeout (secs)"
parameter.
<UL>
<LI>no client is connected to the server</LI>
<LI>no recording (neither LiveTV nor a regular recording) is currently taking place</LI>
<LI>no recording starts within a definable amount of time ("Max. wait for recording (min)")</LI>
<LI>the "pre Shutdown check-command" returns 0 </LI>
</UL>
</P>
<P>If we get to this idle state the Master backend will set the wakeuptime using the "Set
wakeuptime command", which is the same for WOL and BIOS wakeup. The Master backend will
then shut down the Slave backends and itself using the "Server halt command".</P>
<P>One caveat is that the scheduler tries to guess if the Master backend was started by a
wakeup call or by the user. If it thinks it was woken up by a user, it
blocks shutdown until a client connects to the Master backend, after which it will
behave as described above. To disable this feature, unset "Block shutdown
before client connected" in the mythfrontend Setup->Setup->General screen.</P>
<P>Once it is time to startup the system, the Master backend is woken up first and will
wakeup the Slave backends using the "Wake command for slaves". At this time, there is
no support for starting only the required Slave backend, so all Slave backends will startup.</P>

<H3>Setting up the MythTV side of this extension.</H3>

<P>There are a number of options that are used to control the Shutdown /
Wakeup feature.</P>
<P>Shutdown/Wakeup Options:
<UL>
<LI>"Idle timeout (secs)" is the time the server waits while idle until a
shutdown occurs.</LI>
<LI>"Max. wait for recording (min)" is the time the Master backend waits for a recording
without shutting down. For example, this would be used to prevent a 10
minute system shutdown if a recording is set to start 15 minutes from now.</LI>
<LI>"Startup before rec. (secs)" Sets how long before a programmed
recording the MythTV system will be woken up.  This should be roughly be the
time your systems need to bootup, and if you have Slave backends, you'll
need to ensure this value is long enough for all your machines to perform
their bootup cycle.</LI>
<LI>"Wakeup time format" is the format of the wakeup time that is given in
the "Set wakeuptime command" as a parameter "$time". You need to set this
according to your wakeup mechanism. If you need secondss since the epoch
(1970-01-01) set the "Wakeup time format" to "time_t".</LI>
<LI>"Set wakeuptime command" is the command executed to set the new wakeuptime. </LI>
<LI>"Server Halt Command" is the command executed to shutdown the Master
backend and the Slave backends.</LI>
<LI>"pre Shutdown check-command" is an optional command used to give a
"Go/NO-GO" decision from a non-MythTV source.  This command is executed
immediately before the shutdown would occur. The return value is use to make
the following choices:
<UL>
<LI>If it returns a "0" the shutdown will occur as scheduled.</LI>
<LI>If it returns a "1" the "idle timeout" will be reset and the system
waits again for the timeout.</LI>
<LI>If it returns a "2" the entire shutdown sequence is reset.  This means
that a new client connect is needed before a shutdown occurs, unless you have
the "Wait for client connect" setting disabled, in which case this is the same as
returning "1".  An example of a use for this return value is to prevent the shutdown
if a user is currently logged in, or if a specific program (ie. transcode,
automatic updates, etc.) is currently running. If you don't need it, leave
the field blank.</LI>
</UL>
</LI>
</UL>
</P>
<P>The "WakeOnLan settings":
These settings have nothing to do with using BIOS or WOL wakeup, they are
the same for both.
<UL>
<LI>"Master backend" This setting defines timings for the frontends to
wakeup the Master backend using WOL. Useful if your frontend can emit a WOL
packet so you don't need to physically go to the Master backend if you're
trying to watch TV.</LI>
<LI>"Reconnect wait time (secs)" is the time the frontend waits after
executing the "Wake command" before attempting to retry the connection. This
should be roughly the amount of time your Master backend needs for bootup.
Set to "0" to disable. The frontends will retry to connect for "Count of
reconnect tries" times before giving up.</LI>
<LI>"Wake command for slaves" is the <EM>one</EM> command executed to wake
your Slave backends. This should be a script that contains the calls to
wakeup all Slave backend systems.</LI>
</UL>
</P>

<H3>Using WOL to wake your Master backend. </H3>

<P>To use WOL to wake your Master backend you will need a WOL capable Master
backend, a machine that runs 24/7 which can execute an at-job and nc (netcat)
on the Master backend. I use some little bash scripts to make my DSL router
wakeup my mythbox if required.</P>
<P>Replace $SERVER and $PORT with your own settings!
On my Master backend I have a script that gets called as 'setwakeuptime command' which
looks like the following:
<BLOCKQUOTE><CODE>
<PRE>
#! /bin/sh
echo $@ | nc $SERVER $PORT
</PRE>
</CODE></BLOCKQUOTE>

This simply cats the parameters (that is $time) to my 24/7 server. On my
$SERVER I have (x)inetd listening on $PORT starting a little script which
cares about setting the at-job. The following additions are necessary on the
$SERVER:</P>
<P>If you use <B>inetd</B>:</P>
<P>In <CODE>/etc/inetd.conf</CODE> add:
<BLOCKQUOTE><CODE>
<PRE>
mythwake stream tcp nowait mythtv /usr/sbin/tcpd /usr/local/bin/mythwake
</PRE>
</CODE></BLOCKQUOTE>

If you use <B>xinetd</B>, save the following as <B>mythwake</B> in your
<CODE>/etc/xinet.d/</CODE> directory:
<BLOCKQUOTE><CODE>
<PRE>
service mythwake
  {    
        socket_type     = stream
        wait            = no
        user            = mythtv        
        protocol        = tcp
        id              = mythwake
        server          = /usr/local/bin/mythwake
  }
</PRE>
</CODE></BLOCKQUOTE>

and add the following to <CODE>/etc/services</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
mythwake        $PORT/tcp
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Finally, <CODE>/usr/local/bin/mythwake</CODE> looks like:
<BLOCKQUOTE><CODE>
<PRE>
#! /bin/bash
#this should be a command to wake your server
WAKECMD="#!/bin/sh\n /usr/local/bin/wakeMBE"
#first we need to delete all wake jobs in queue
for JOB in atq | cut -f 1 ; do
    atrm $JOB;
done
#now we read the date from 'nc'
read date;
#now set the atjob
echo -e "$WAKECMD" | at $date ;
</PRE>
</CODE></BLOCKQUOTE>

<B>SECURITY WARNING</B>:
Be sure to secure $SERVER:$PORT from untrusted networks, because this
allows 3rd parties to run arbitrary code on your server!</P>

<H3>Using BIOS wakeup to wake your Master backend.</H3>

<P>Since I don't use this, I cannot say much about this. If your motherboard
supports any wakeup tool you have to call that tool as "Set wakeuptime
command" with the "Wakeup time format" suitable for that tool.</P>
<H3>Wakeup the MySQL server using WOL.</H3>

<P>If your MySQL server and your Master backend are not on the same machine,
you can have the Master backend wake your MySQL server using WOL. You will
find the settings for this in mysql.txt. The meanings are the same as
discussed in "The WakeOnLan settings" above.</P>

<H3>Tips/Tricks:</H3>

<P>If, for example, one of the Slave backends is also your desktop computer,
you could simply use a little script as 'server halt command' which first
calls <CODE>/sbin/shutdown -t TIMEOUT</CODE> where TIMEOUT is a value sufficient
for you to react.  You could then popup a window using *dialog, asking for
permission to shutdown. If you cancel the shutdown, simply call
<CODE>/sbin/shutdown -c</CODE>.</P>
<P>If you get "nvram-wakeup: /dev/rtc: Device or resource busy" your
set-wakeuptime-script should stop the program that uses <CODE>/dev/rtc</CODE> before
setting the wakeuptime.</P>

<H2><A NAME="s12">12.</A> <A HREF="#toc12">MythWeb.</A></H2>

<P>The MythWeb allows you to use a web page to control various
aspects of your MythTV system.  MythWeb is a separate application, but it's
dependent on MythTV being installed and operational.</P>

<H2><A NAME="ss12.1">12.1</A> <A HREF="#toc12.1">Installation and prerequisites.</A>
</H2>

<P>Download mythweb from 
<A HREF="http://www.mythtv.org/">http://www.mythtv.org/</A> and save it to a location where you can find
it.  The next step depends on whether your distribution has a web server and
if you have PHP support.</P>

<H3>Mandrake 9.0</H3>

<P>Mandrake 9.0 has <B>apache</B> and <B>PHP</B> pre-packaged, so
installation is quite simple.  Once you have installed the two programs,
either with the graphical installer (see instructions in 
<A HREF="#graphicinstalltools_">Graphic Install Tools</A>) or through the
command line (section 
<A HREF="#CLIinstalltools_">Command Line</A>), and
you've ensured that the <B>apache</B> server will start at boot using the
Mandrake Control Center.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: Mandrake 9.1 users, perform the following:</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
# urpmi apache2 apache2-mod_php php-mysql
# chkconfig --level 345 httpd on
# /etc/rc.d/init.d/httpd restart
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss12.2">12.2</A> <A HREF="#toc12.2">Completing the installation.</A>
</H2>

<P>
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf mythweb-0.14.tar.bz2
$ cd mythweb-0.14
$ su
# mkdir /var/www/html/mythweb
# cp -r . /var/www/html/mythweb
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Edit the <CODE>/var/www/html/mythweb/config/conf.php</CODE> file if required.</P>
<P>By default, MythWeb uses an Apache <CODE>.htaccess</CODE> file to restrict
access to the website and to configure some variables.</P>
<P>To create the password file for Apache (if your system doesn't already have
one), you could do something like this:
<BLOCKQUOTE><CODE>
<PRE>
# cd /var/www
# htpasswd -c htpasswd mythtv
New password:
Re-type new password:
Adding password for user mythtv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>See the man page for <B>htpasswd</B> for more examples.</P>
<P>To access the web page, open a web browser and use <B>http://[name or ip
address]/mythweb/</B></P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: Make sure that you have a trailing slash on the URL,
otherwise you will get a <CODE>404 Page not Found</CODE> error.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="s13">13.</A> <A HREF="#toc13">MythGallery.</A></H2>

<P>MythGallery is a photo and slideshow application.  MythGallery is a
separate application, but it's dependent on MythTV being installed and
operational.</P>
<H2><A NAME="ss13.1">13.1</A> <A HREF="#toc13.1">Installation and prerequisites.</A>
</H2>

<P>Download MythGallery from 
<A HREF="http://www.mythtv.org/">http://www.mythtv.org/</A> and save it to a location where you can find
it.  There are a number of transitions available, some requiring OpenGL
support.  You will also need to install a TIFF library.  Under Mandrake, you 
would perform the following command:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libtiff3-devel
</PRE>
</CODE></BLOCKQUOTE>

Once you have satisfied the prerequisites for your distribution, download
and install the application:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf mythgallery-0.14.tar.bz2
$ cd mythgallery-0.14
$ ./configure --enable-opengl
$ qmake mythgallery.pro
$ make
# su
# make install
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>

The configuration for MythGallery is accessed through the main Setup option
in mythfrontend.  Make sure you set your pictures directory to wherever
you're storing your photos.</P>
<P>The controls for MythGallery can be found in the README that comes with the
application.</P>
<H2><A NAME="ss13.2">13.2</A> <A HREF="#toc13.2">Using MythGallery.</A>
</H2>

<P>When you first start MythGallery, you will see a thumbnail view of any
folders and pictures in the Gallery Directory you specified in setup.  If
this is the first time you have accessed this directory, the thumbnails will
be generated on the fly.  If the Gallery Dir is writable, these thumbnails
will be cached thus speeding up future access.  On the left is a greyed-out
menu of options.</P>
<P>Use the arrow keys to select a folder or picture to open/view with the
Select key, or use the Menu key to toggle access the menu on the left.  The
menu options are as follows:
<UL>
<LI> Slideshow - Will cycle through all the pictures in the current folder. 
The currently selected item must be a picture (not a folder) for this to
work.  It does not currently traverse subfolders.</LI>
<LI> Rotate CW - Rotate the current image 90 degrees in the clockwise
direction.  This change persists if the current directory is writable.</LI>
<LI> Rotate CCW - As above except the direction of rotation is counter(anti)
clockwise.</LI>
<LI> Import - Import pictures into your Gallery Dir.  This option is
described in the next section.</LI>
<LI> Settings - Access the MythGallery settings screen.</LI>
</UL>
</P>
<H2><A NAME="ss13.3">13.3</A> <A HREF="#toc13.3">Importing Pictures</A>
</H2>

<P>The import path in the setup dialog is a colon separated list of
directories and/or executable files.  When the import key is pressed, a new
directory (the destination directory) under the current directory will be
created and the import path will be searched.  If the item in the import
path is a directory (the source directory), the contents of that directory
will be copied to the destination directory. If you would like the source
directory to be that of a removable device, it might be a good idea to use
autofs.  See the automount howto at 
<A HREF="www.linuxdoc.org">www.linuxdoc.org</A> for info on how to get it working.</P>
<P>If the item in the import path is an executable file, MythGallery will
attempt to execute it with the destination directory as its sole argument.
Be careful when using executable scripts that the script runs unattended
(doesn't need user intervention) and returns properly, otherwise it could
create the appearance of MythGallery hanging (e.g. running
<B>smbclient</B> and prompting for password).  Also be sure that scripts
have executable permissions set.</P>
<P>Here is an example script that a user may want to run
on import: 
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/csh

if ($#argv == 0) then 
        echo "Usage: $0 dest_dir" 
        exit 
endif 

cd $argv[1]

# get stuff over the network
wget http://www.somesite.dom/dir/file1.jpg 
wget http://www.somesite.dom/dir/file2.jpg
wget http://www.somesite.dom/dir/file3.jpg

# stuff that requires manual module loading and/or fs mounting
modprobe camera_module
mount /dev/camera /mnt/camera
cp /mnt/camera/* $argv[1]
umount /mnt/camera
rmmod camera_module

# perform some processing
foreach pname (`ls *.jpg`)
        jpegtran -flip vertical $pname > $pname.new
        mv $pname.new $pname
end
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="s14">14.</A> <A HREF="#toc14">MythGame.</A></H2>

<H2><A NAME="s15">15.</A> <A HREF="#toc15">MythMusic. </A></H2>

<P>MythMusic has a number of prerequisites that must be satisfied before it
is operational.  Depending on your distribution, some of these prerequisites can
be satisfied through the various package managers.  If your distribution doesn't
offer pre-compiled versions of the software below, then follow the generic
instructions for manually compiling and installing the software.</P>
<P>The prerequisites for MythMusic are:
<UL>
<LI>MAD</LI>
<LI>id3tag</LI>
<LI>libvorbis-devel</LI>
<LI>FLAC</LI>
<LI>libcdaudio</LI>
<LI>CDParanoia</LI>
</UL>
</P>

<H2><A NAME="ss15.1">15.1</A> <A HREF="#toc15.1">Manual installation of prerequisites.</A>
</H2>

<P>These instructions are for distributions which don't have pre-compiled
versions of the software necessary to run MythTV.</P>
<P>Download MAD from 
<A HREF="http://www.mars.org/home/rob/proj/mpeg/">http://www.mars.org/home/rob/proj/mpeg/</A>  Save it to a directory you
can find later.
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf mad-0.14.2b.tar.gz
$ cd mad-0.14.2b
$ ./configure
$ make
$ su
# make install
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download libid3tag from 
<A HREF="http://www.underbit.com/products/mad/">http://www.underbit.com/products/mad/</A> Save it to a directory you can
find later.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf libid3tag-0.15.0b.tar.gz
$ cd libid3tag-0.15.0b
$ ./configure
$ make
$ su
# make install
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download FLAC from 
<A HREF="http://flac.sourceforge.net">http://flac.sourceforge.net</A> and install:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf flac-1.1.0.tar.gz
$ cd flac-1.1.0
$ ./configure
$ make
$ su
# make install
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download libcdaudio from 
<A HREF="http://sourceforge.net/project/showfiles.php?group_id=27134">libcdaudio.sourceforge.net</A> and
install:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf libcdaudio-0.99.9.tar.gz
$ cd libcdaudio-0.99.9
$ ./configure
$ make
$ su
# make install
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download cdparanoia from 
<A HREF="http://www.xiph.org/paranoia/download/cdparanoia-III-alpha9.8.src.tgz">http://www.xiph.org/paranoia/down.html</A>.
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf cdparanoia-III-alpha9.8.src.tgz
$ cd cdparanoia-III-alpha9.8
$ ./configure
$ make
$ su
# make install
# cd /usr/lib
# ln -sf libcdda_interface.so.0.9.8 libcdda_interface.so
# ln -sf libcdda_paranoia.so.0.9.8 libcdda_paranoia.so
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss15.2">15.2</A> <A HREF="#toc15.2">Mandrake 9.0</A>
</H2>

<P>Mandrake 9.0 has a number of the prerequisites available on the
installation CD.  Some of the software you're going to need will have to be
obtained from the "contrib" or "cooker" development repositories. 
Applications downloaded from "cooker" come from the development branch, so
there may be issues with some software.  It isn't recommended that you mix
cooker and release-level software.</P>

<P><B>urpmi</B> is the simplest tool for installation of packages from the
command line.  The difficult part is the configuration, but this has been
made easier at the following website: 
<A HREF="http://plf.zarb.org/~nanardon/urpmiweb.php">http://plf.zarb.org/~nanardon/urpmiweb.php</A> The website will allow
you to choose a mirror site and then present the command-line configuration
text for that mirror.  You will most likely need to add a "Contrib" mirror
to your setup.  Once you have done that, you can proceed.  If <B>urpmi</B>
prompts you about other modules that need to be installed to satisfy
dependencies, say "Yes".</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libmad0 libmad0-devel libflac4 libflac4-devel libcdaudio1 cdparanoia
# urpmi libcdda0 libcdda0-devel libvorbis0 libvorbis0-devel
# urpmi libcdaudio1-devel libid3tag0 libid3tag0-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3>Additional options with MythMusic</H3>

<P>Additional visualizations have been added to MythMusic.  If you wish to
use these, there are some prerequisites you must install prior to compiling.</P>
<P>
<UL>
<LI>fftw</LI>
<LI>OpenGL</LI>
<LI>SDL</LI>
</UL>
</P>
<P><CODE>fftw</CODE> may be obtained from 
<A HREF="http://www.fftw.org/">http://www.fftw.org/</A>.  In Mandrake 9.1 it may be installed by
typing:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libfftw2 libfftw2-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><CODE>OpenGL</CODE> should be installed on practically all distributions. 
However, you will need the devel module.  In Mandrake 9.1 it may be
installed by typing:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libMesaGLU1-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><CODE>SDL</CODE> may be obtained from 
<A HREF="http://www.libsdl.org">http://www.libsdl.org</A>.  In Mandrake 9.1 it may be installed by
typing:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libSDL1.2 libSDL1.2-devel
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss15.3">15.3</A> <A HREF="#toc15.3">Red Hat Linux 9</A>
</H2>

<P>Red Hat provides packages for several of the prerequisites, making 
installation very simple. Of the prerequisites, Red Hat provides 
packages for Vorbis, cdparanoia, SDL, and OpenGL (which you probably 
already have installed). To install these all at once, simply type (all on
the same line):
<BLOCKQUOTE><CODE>
<PRE>
$ up2date --solvedeps libvorbis libvorbis-devel vorbis-tools cdparanoia-devel cdparanoia-libs cdparanoia SDL-devel SDL
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you get the following message: "None of the packages you requested 
were found, or they are already updated" it probably means you already 
have all of those packages installed.</P>
<P>You must install the remaining packages, (MAD, FLAC, libcdaudio and
optionally fftw) manually following the installation directions above. When
installing fftw do not use the rpm package offered on the website because it
will cause an error, so use the source package instead.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: you can use the instructions given at the 
<A HREF="#atrpms">automated installation section</A> to install all of MythMusic in one
step.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="ss15.4">15.4</A> <A HREF="#toc15.4">Compiling MythMusic. </A>
</H2>

<P>Once all the prerequisites have been installed, you can proceed with
getting MythMusic going. Make sure that you run <CODE>./configure</CODE> first. 
If you wish to use the new visualizations, make sure you install the
prerequisites.  Run <CODE>./configure --help</CODE> for help.</P>
<P>
<HR>
<PRE>
NOTE for Red Hat users: Before compiling, make the following modification 
to settings.pro, otherwise the compile will fail:

Find the following text:
INCLUDEPATH *= /usr/local/include

immediately below that add
INCLUDEPATH *= /usr/include/cdda

save and close settings.pro and proceed with compiling MythMusic.
</PRE>
<HR>

<BLOCKQUOTE><CODE>
<PRE>
$ qmake mythmusic.pro
$ make
$ su
# make install
# exit
$ ./configure
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss15.5">15.5</A> <A HREF="#toc15.5">Configuring MythMusic.</A>
</H2>

<P>Configuration of MythMusic occurs in two places.  The main mythfrontend
Setup is for global MythMusic configuration.  Go to the
Setup/MythMusic/General Setup screen and adjust it for your particular
setup.</P>
<P>The second configuration screen is within the MythMusic program and will
allow you rescan your music library, etc.</P>
<P>Here's some explanation about the Ignore_ID3 and The NonID3FileNameFormat:</P>
<P>If Ignore_ID3 is set to TRUE, MythMusic will try to determine the
Genre, Artist, Album, Track Number, and Title from the filename of the
mp3 file.  The NonID3FileNameFormat variable should be set to the
directory/file format where the mp3 files are stored.  For instance, I
store mine in the above shown Genre/Artist/Album/Track format.  MythMusic
will then use this information to fill in the proper fields when it
populates the musicmetadata table rather than searching for an ID3 tag in
the mp3 file.</P>
<P>The files can be laid out in any format, such as:</P>
<P>Genre/Artist/Album/Title
Artist/Genre/Album/Title
Artist/Album/Title (with Genre left as Unknown)</P>
<P>The track number is optional but can be specified with the title by using
the TRACK_TITLE keyword instead of TITLE.  If TRACK_TITLE is used,
then the filename can have a space, hyphen, or underscore separating the
track number from the track title.  Keywords are case insensitive, so if
you specify GENRE it's the same as Genre in the format field.</P>
<P>The Ignore_ID3 option does not disable the code that determines the track
length, just the portion that tries to read ID3 info.</P>

<H2><A NAME="ss15.6">15.6</A> <A HREF="#toc15.6">Using MythMusic. </A>
</H2>

<P>MythMusic is fairly simple to use.  It is recommended that you insert the
CD before selecting "Import CD".  You should also ensure that your system
doesn't try to automount the CD and begin playing it automatically.</P>
<P>Another item to consider:  there are some CDs that contain computer data
that runs as a "CD Extra" when inserted into some Windows PCs and
Macintoshes.  As of 2003-06-10, MythMusic doesn't support track skipping or
individual track selection, so if you have a CD with "CD Extra" data you
will not be able to encode it; MythMusic will hang attempting to encode the
non-audio data.</P>
<P>Here's some information on playlist management:</P>
<P>Q: How do I create a new playlist?  
A: Using the MythMusic "Select Music" menu option, setup the playlist as you
normally would by adding songs or other playlists as needed.  When you are
ready to save the new playlist, highlight "Active Play Queue" at the bottom
of the selection tree and hit the "i" key. This will pop up a menu allowing
you to name and save the new playlist.  You can also hit Enter to bring up
the popup on the Active Play Queue. This does not work on the playlists
above, as Enter is obviously bound to checking/unchecking the boxes. Any
number (ie. keypad on remote) will also bring up the menu in both cases.</P>
<P>Q: How do I enter the playlist name in the text field without a keyboard?
A: Use the keypad number keys (bound to your remote) to select letters
quasi-cell phone style. Keys 2-9 work pretty much like any cell phone text
entry. 1 cycles through a few special characters, delete, and space. 0 is
like a CAPS LOCK. Hard to describe, fairly easy to use. You will soon be
able to specify the cycle timing in a Setup screen. You can type fairly
quickly through a combination of jumping around the number keys AND hitting
a non-number key (right arrow is particularly good for this) to force the
current character.</P>
<P>Q: How do I edit a playlist? 
A: Highlight the playlist in the selection tree and hit the "i" key then
select "Move to Active Play Queue" in the popup.  You can now modify the
"Active Play Queue" like normal, adding songs and playlists by selecting
them from the song tree.  When you are done, highlight the "Active Play
Queue" in the selection tree and hit the "i" key then select "Save Back to
Playlist Tree".  And whatever you were editing as your Active Queue before
you moved an existing playlist "on top" of Active reappears. Think of Active
has having a push on, pop off capability, but with a depth of only 1.</P>
<P>Q: How do I delete an item from a playlist?
A: Highlight the item in the selection tree and hit the "d" key.</P>
<P>Q: How do I rearrange the songs in my playlist?
A: Highlight a song and hit the "space" bar, the song will now have pair of
red arrows in front of it.  Use the up and down arrow keys to move it around
in the playlist.  When you have it where you want it, hit the "space" bar
again.</P>
<P>Q: How do I delete a playlist?
A: Highlight the playlist in the selection tree and hit the "i" key then
select "Delete this Playlist" from the popup.</P>

<H2><A NAME="ss15.7">15.7</A> <A HREF="#toc15.7">Troubleshooting MythMusic.</A>
</H2>

<P>You may run into errors when running MythMusic.</P>
<H3>When I run MythMusic and try and look up a CD, I get an error message </H3>

<P>The full text of the message will say: </P>
<P>databasebox.o: Couldn't find your CD. It may not be in the freedb database. 
More likely, however, is that you need to delete &nbsp;/.cddb and &nbsp;/.cdserverrc
and restart mythmusic. Have a nice day.</P>
<P>If you get this message, you should go to the home directory of whatever
user MythMusic is running as and type:
<BLOCKQUOTE><CODE>
<PRE>
rm .cdserverrc
rm -rf .cddb/
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>These files aren't automatically deleted because of a conscious design
decision by the author that programs that automatically delete things are
bad.</P>
<P>The files are used to locally cache CD lookups. If you are re-inserting
CDs, your machine will not actually have to go out to the Internet to
determine what is on them.  However, the URL used to access the freedb
database has recently changed, so the stale information in the files from
previous runs of MythMusic would cause the error above.  Once the files have
been deleted the stale information will be gone and your local database
will be rebuilt as you use CDs.</P>

<H2><A NAME="s16">16.</A> <A HREF="#toc16">MythWeather.</A></H2>

<P>The MythWeather module will obtain the weather information for the
location that you specify.  You must be running MythTV v0.10 or later 
in order to use MythWeather.</P>
<P>Change into the MythWeather directory, then make and make install:
<BLOCKQUOTE><CODE>
<PRE>
$ cd mythweather
$ qmake mythweather.pro
$ make
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>MythWeather uses MSNBC.com as its source for weather data and weather.com
for its radar image.</P>
<P>These are the keyboard commands for MythWeather:
<BLOCKQUOTE><CODE>
<PRE>
Left Key             Goes back one page, and extends the time spent
                     on the page you are on.
Right Key            Goes forward one page, see above.
Space                Pause, wait on the current page until space is hit
                     again.
Numeric Keys         You can check other weather by keying in other ZIP codes.
Enter Key            Switch between Celsius and Fahrenheit. Can also
                     be used a way to force a data update.
"m" Key              Resets the location to the database default, then updates the data.
"i"                  Enter / Save settings
ESC                  Exit the settings screen without saving / Exit the program
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>MythWeather also has an "Aggressiveness" setting.  This affects how long
MythWeather waits for data from the msnbc.com website before timing out.  If
you are on a slow connection, or have a slow DNS, or MythWeather just
doesn't seem to be working and you've already tried everything else, then
try increasing the aggressiveness level parameter.  This parameter is
inverse; a higher number actually means that MythWeather will be less
aggressive, and will therefore wait longer before timing out.</P>
<P>MythWeather will print debugging information on the terminal.  If you wish
to see additional debugging information while MythWeather is running, run
mythweather from the command line with as <CODE>mythweather --debug</CODE></P>
<P>You may also force mythweather to re-run the configuration by starting it on
the command line as <CODE>mythweather --configure</CODE>.  These two options are
mutually exclusive.</P>

<H2><A NAME="s17">17.</A> <A HREF="#toc17">MythVideo.</A></H2>

<P>The MythVideo application will allow you to use an external program to
watch media files that are not directly supported by MythTV.</P>
<P>Change into the MythVideo directory, then make and make install:
<BLOCKQUOTE><CODE>
<PRE>
$ cd mythvideo
$ qmake mythvideo.pro
$ make
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>See MythVideo's <CODE>README</CODE> file for additional information.</P>

<H2><A NAME="s18">18.</A> <A HREF="#toc18">MythDVD.</A></H2>

<P>MythDVD is an application which rips DVDs and makes them available for
use with MythVideo.  You may also transcode the DVD content from MPEG-2 to
other formats which should greatly reduce the amount of space the DVD
material takes up on your hard drive.</P>
<P>MythDVD has a number of prerequisites to enable transcoding functionality. 
If you only wish to play DVDs rather than convert them to something like
MPEG-4 or xvid you may skip the prerequisite installation step.</P>

<H2><A NAME="ss18.1">18.1</A> <A HREF="#toc18.1">Manual Compilation of Prerequisites.</A>
</H2>


<H2><A NAME="ss18.2">18.2</A> <A HREF="#toc18.2">Pre-compiled binaries.</A>
</H2>

<P>Mandrake users may install the prerequisites this way:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi libdvdread3 libdvdread3-devel a52dec liba52dec-devel 
# urpmi mplayer ogle xine
</PRE>
</CODE></BLOCKQUOTE>

Assuming that you've added a PLF mirror, you may also load the rest of the
prerequisites using the following command:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi xvid xvid-devel fame libfame0.9-devel transcode libdvdcss
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Next comes the configuration and compilation.  If you don't want to
transcode, then the first command in the next example can simply be
<CODE>./configure</CODE>
<BLOCKQUOTE><CODE>
<PRE>
$ ./configure --enable-transcode
$ qmake mythdvd.pro
$ make
$ su
# make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H2><A NAME="s19">19.</A> <A HREF="#toc19">MythNews.</A></H2>



<H2><A NAME="s20">20.</A> <A HREF="#toc20">Troubleshooting.</A></H2>

<H2><A NAME="ss20.1">20.1</A> <A HREF="#toc20.1">Illegal Instruction.</A>
</H2>

<P>This error can happen for the following reasons:
<UL>
<LI>You have an AMD K6-2 or VIA C3 processor.  If you have either of
these, make sure that you you followed the instructions in this 
<A HREF="#nonintelcpu_">section</A>.</LI>
<LI>You have an early production Intel Celeron, Pentium Pro or Pentium II.  If you have any
of these processors, make sure that your 
<A HREF="#deinterlace_">deinterlace</A>
variable is set correctly.  Your CPU needs to support SSE instructions for
deinterlace support.  You may check this by doing a <CODE>$ cat
/proc/cpuinfo</CODE> and looking for "sse" in the processor flags section.</LI>
</UL>
</P>
<H2><A NAME="ss20.2">20.2</A> <A HREF="#toc20.2">mythfilldatabase failing.</A>
</H2>

<P>If mythfilldatabase suddenly appears to be failing, check to see what version of
XMLTV you're running.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  It is highly recommended to run the latest version of XMLTV
available.  In North America, zap2it, the listings provider, has been
making numerous changes to their website which negatively impact XMLTV.</CAPTION>
</FIGURE>
</P>
<H2><A NAME="Setting_DMA"></A> <A NAME="ss20.3">20.3</A> <A HREF="#toc20.3">Fast CPU, choppy or jittery video. </A>
</H2>

<P>First, you should check that your kernel has been enabled for DMA:
<BLOCKQUOTE><CODE>
<PRE>
[mythtv@pvr mythtv]$ dmesg |grep DMA
    ide0: BM-DMA at 0xd800-0xd807, BIOS settings: hda:DMA, hdb:DMA
    ide1: BM-DMA at 0xd808-0xd80f, BIOS settings: hdc:DMA, hdd:pio
hda: 156301488 sectors (80026 MB) w/2048KiB Cache, CHS=9729/255/63, UDMA(33)
hdb: 80043264 sectors (40982 MB) w/2048KiB Cache, CHS=4982/255/63, UDMA(33)
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>From the listing above, you can see that hda, hdb and hdc are set for DMA,
and hdd is set for pio.  If your kernel is not reporting DMA being enabled,
you may need to recompile your kernel. Check your motherboard's chipset
(look in the "ATA/IDE/MFM/RLL support" section in "make menuconfig") for more
information.</P>
<P>Next, check that the hard drive has DMA enabled.  Use the <B>hdparm</B>
program to check and enable DMA.
<BLOCKQUOTE><CODE>
<PRE>
# hdparm -d /dev/hd?
</PRE>
</CODE></BLOCKQUOTE>
 will tell you the DMA status for your hard drives.  If you run
<B>hdparm</B> with the <CODE>-d1</CODE> parameter, it will turn DMA on.</P>

<P>You may also setup your PC to do this at boot time, either by adding the
command to your <CODE>/etc/rc.local</CODE> file, or by adding files to
/etc/sysconfig.</P>
<P>On Mandrake and other distributions, if you install <B>hdparm</B> from an RPM you
will most likely get a <CODE>/etc/sysconfig/harddisks</CODE> file installed. 
This file will be parsed by the <CODE>/etc/rc.sysinit</CODE> script.  If you use
the default <CODE>harddisks</CODE> file, your changes will affect all IDE devices
(including CD ROMs).  If you wish to use different parameters for various
devices, rename and/or copy the file to <CODE>harddiskhda</CODE>,
<CODE>harddiskhdb</CODE>, etc.  Edit the file to your liking and on the next
reboot your setting will be preserved.</P>

<H2><A NAME="ss20.4">20.4</A> <A HREF="#toc20.4">I have a MPEG-2 encoder card and my video appears "jittery".</A>
</H2>

<H2><A NAME="ss20.5">20.5</A> <A HREF="#toc20.5">I have a MPEG-2 encoder card and my video is jumping up and down.</A>
</H2>

<P>This is a different problem than the one discussed in the previous
section.  Currently, the ivtv driver or firmware appear to have some issues
if the vertical capture resolution is not the full screen height.  If you
are having a jitter problem then ensure that you are capturing either 480
lines (for NTSC) or 576 lines (for PAL).  The default capture profiles may
need to be edited for your setup.  Go to Settings->TV Settings->Recording
Profiles and adjust the <B>Default</B> and <B>Live TV</B> options to
480 or 576 from their defaults.</P>

<H2><A NAME="ss20.6">20.6</A> <A HREF="#toc20.6">I keep losing all of my settings every time I compile!</A>
</H2>

<P>MythTV will overwrite any settings in <CODE>/usr/local/share/mythtv</CODE>.
If you want to make sure that you don't lose your modifications, make a
directory <CODE>~/.mythtv</CODE> and copy your mysql.txt file to this
location.</P>
<H2><A NAME="ss20.7">20.7</A> <A HREF="#toc20.7">Compile errors.</A>
</H2>

<P>Some compile errors are worse than others.  If you get an error that
doesn't abort the compilation, and says something like:
<BLOCKQUOTE><CODE>
<PRE>
cc1plus: warning: changing search order for system directory
"/usr/local/include"
cc1plus: warning:   as it has already been specified as a non-system
directory
</PRE>
</CODE></BLOCKQUOTE>

then it shouldn't be a problem.</P>
<P>If you get an error like <CODE>/usr/bin/ld: cannot find -lXext</CODE>, the
compiler is telling you that you don't have XFree86-devel installed, or that
your distribution hasn't set it up correctly.  This needs to be fixed before
MythTV will compile.</P>

<H2><A NAME="ss20.8">20.8</A> <A HREF="#toc20.8">My screen goes blank, but comes back when I wiggle the mouse or use the keyboard.</A>
</H2>

<P>This is due to DPMS, the Display Power Management System, which is used
to save power by turning off your monitor when the system decides that it's
not being used or to a screensaver that has defaulted to a blank screen. 
Since it's likely that watching TV will not generate keyboard or mouse
events for a time, you need to turn off DPMS and the screensaver.  There are a few ways to do
this.  You may also need to check your BIOS for power saving modes and
disable screen blanking there as well.</P>
<P>Edit your <CODE>/etc/X11/XF86Config-4</CODE> file, and look for:
<BLOCKQUOTE><CODE>
<PRE>
Section "ServerFlags"
    #DontZap # disable &lt;Crtl>&lt;Alt>&lt;BS> (server abort)
    #DontZoom # disable &lt;Crtl>&lt;Alt>&lt;KP_+>/&lt;KP_-> (resolution switching)
    AllowMouseOpenFail # allows the server to start up even if the mouse doesn't work
EndSection
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Add <CODE>Option "NoPM" "true"</CODE> and <CODE>Option "BlankTime" "0"</CODE>to the ServerFlags section.</P>
<P>Also, look for:
<BLOCKQUOTE><CODE>
<PRE>
Section "Device"
    Identifier "device1"
    VendorName "nVidia Corporation"
    BoardName "NVIDIA GeForce 256 (generic)"
    Driver "nv"
    Option "DPMS"
EndSection
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>In this case, you would need to either delete the <CODE>Option "DPMS"</CODE>
line, or change it to <CODE># Option "DPMS"</CODE> to comment it out.  The next
time you start XFree this change will take effect.</P>
<P>Finally, check:
<BLOCKQUOTE><CODE>
<PRE>
Section "Monitor"
    Identifier "monitor1"
    VendorName "Plug'n Play"
    HorizSync 30-85
    VertRefresh 50-160

    # Sony Vaio C1(X,XS,VE,VN)?
    # 1024x480 @ 85.6 Hz, 48 kHz hsync
    ModeLine "1024x480"    65.00 1024 1032 1176 1344   480  488  494  563 -hsync -vsync

    # TV fullscreen mode or DVD fullscreen output.
    # 768x576 @ 79 Hz, 50 kHz hsync
    ModeLine "768x576"     50.00  768  832  846 1000   576  590  595  630

    # 768x576 @ 100 Hz, 61.6 kHz hsync
    ModeLine "768x576"     63.07  768  800  960 1024   576  578  590  616
EndSection
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Ensure that there isn't an <CODE>Option "DPMS"</CODE> in the Monitor
configuration.</P>
<P>You can also turn off DPMS from the Command Line, but this will not survive
a reboot.
<BLOCKQUOTE><CODE>
<PRE>
$ xset -dpms
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Using <CODE>xset +dpms</CODE> will turn it back on.</P>
<P>Another technique to try, which will turn off the screensaver:
<BLOCKQUOTE><CODE>
<PRE>
$ xset s off
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>You may also combine the command to turn off DPMS and the screensaver:
<BLOCKQUOTE><CODE>
<PRE>
$ xset -dpms s off
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Finally, depending on your distribution, you may be able to turn it off from
within the control panel.</P>

<H2><A NAME="ss20.9">20.9</A> <A HREF="#toc20.9">I get segfaults / MythTV isn't doing anything.</A>
</H2>

<H2><A NAME="ss20.10">20.10</A> <A HREF="#toc20.10">Debugging with GDB.</A>
</H2>

<P>Without details, the developers will not be able to determine if you have
discovered a genuine code-bug,  or if the problem is with your system.  In
order to determine what's going on, you must recompile MythTV with debugging
support and run MythTV within <B>gdb</B>, the GNU debugger.</P>
<P>Edit the settings.pro file.  Make sure that the top of the file looks like this:
<BLOCKQUOTE><CODE>
<PRE>
$ cat settings.pro
CONFIG += debug
#CONFIG += release
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Now, you need to clear out the old versions of the software to ensure that
you're running with the debugging code, then compile and install.
<BLOCKQUOTE><CODE>
<PRE>
$ make clean distclean
$ ./configure
$ make
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>At this point, you now have debug-enabled software ready.  Let's assume that
the problem you're having is in the <CODE>setup</CODE> program.
<BLOCKQUOTE><CODE>
<PRE>
$ cd setup
$ gdb ./setup

GNU gdb 5.3-1mdk (Mandrake Linux)
Copyright 2002 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain
conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i586-mandrake-linux-gnu"...
(gdb) handle SIGPIPE nostop
Signal        Stop      Print   Pass to program Description
SIGPIPE       No        Yes     Yes             Broken pipe
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>gdb</B> has a number of options, read the <CODE>man</CODE> page for more
information.</P>
<P>Once at the <CODE>(gdb)</CODE> prompt, type <CODE>run</CODE> to start program
execution.  When the program segfaults or appears to lock-up (press CTRL-C),
type 
<BLOCKQUOTE><CODE>
<PRE>
(gdb) thread apply all bt full
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>All of the output from gdb should be posted to the mythtv-dev mailing
list, along with the steps you followed to get the program to crash.</P>
<P>If you're trying to troubleshoot and you can't get back to the gdb window
for some reason, it may be easier to use two systems or to start
mythfrontend from the text console.</P>
<P>If you're going to troubleshoot from a remote system, connect to the machine
that you're going to test using <B>ssh</B> or <B>telnet</B>. Next, type
<CODE>$ export DISPLAY=localhost:0.0</CODE>.  This will allow the graphics to be
displayed on the X console (usually ALT-F6 or ALT-F7) and still give you
output and control of <B>mythfrontend</B>, either from the <B>ssh</B>
session, or by switching back to the text console by pressing CTRL-ALT-F1. 
You can now continue troubleshooting using <B>gdb</B> as detailed in the
instructions.</P>

<H2><A NAME="ss20.11">20.11</A> <A HREF="#toc20.11">MythTV makes my system crash. </A>
</H2>

<P>MythTV <EM>can not</EM> crash your system - it is a user-level program. 
If your system is crashing when you run MythTV, then you have some
issue with the drivers for your capture card or other hardware, or the CPU
fan has fallen off/broken and your system is overheating when asked to
perform a CPU intensive task like encoding video.</P>

<H2><A NAME="Troubleshooting_Audio"></A> <A NAME="ss20.12">20.12</A> <A HREF="#toc20.12">Troubleshooting audio. </A>
</H2>

<P>By Bruce Markey, 
<A HREF="mailto:bjm@lvcm.com">mailto:bjm@lvcm.com</A></P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  the following instructions do not apply to PVR-250/350
encoders; the MPEG-2 file will have the audio embedded in the stream so it
is not accessible using <CODE>/dev/dsp</CODE>.  See 
<A HREF="#troubleshooting_pvraudio">this</A> in the PVR-250 
<A HREF="#pvr250">section</A> for more information.</CAPTION>
</FIGURE>

Audio appears to be one of the bigger issues that users run into on the
mailing list.  If the audio isn't configured correctly, then MythTV will
often appear to hang, when in fact it is trying to manipulate the audio
subsystem and failing.  You may or may not receive error messages indicating
that the source of the error is the audio subsystem.</P>
<P>You can not use <B>xawtv</B> to determine if your audio is working
correctly, since <B>xawtv</B> is simply using the the analog sound patched
through line-in to line-out. It doesn't need to digitize the sound unless
you are using the recording function.</P>
<P>A better test to verify that sound will work for MythTV (and recording with
<B>xawtv</B> for that matter) is to startup <B>xawtv</B>, mute the
line-in then run <CODE>aplay /dev/dsp</CODE>. You should hear the recorded audio
slightly delayed behind the real-time video.  Once this test succeeds, MythTV
should work correctly because it writes to and read from /dev/dsp in
the same way that <B>aplay</B> does.</P>
<P>To record audio along with video the audio signal must be digitized by a DSP
so that the audio data can be stored in a file. On playback, the audio data
is written to /dev/dsp and converted back to an analog signal. This analog
signal should then be sent to your speakers. Here is what is needed in
alsamixer:</P>
<P>CAPTUR source - the analog source to be sent to the DSP. This should be set
to the input source from the tuner card to the sound card. In most cases
this is Line but this could also be Aux, CD, Mic, etc., depending on how you
connect the input cable. This source should be muted to prevent patching
through the analog sound. The volume of this source will not affect the
record level.</P>
<P>Capture mixer - this sets the level for the analog to digital recording.
While a volume of 100% is recommended for testing, distortion may occur.
Lowering this level to 75% to 85% may result in better audio quality.
"Capture" should be marked as the CAPTUR destination.</P>
<P>PCM mixer - this sets the level for the digital to analog playback. While a
volume of 100% is recommended for testing, distortion may occur. Lowering
this level to 75% to 85% may result in better audio quality.</P>
<P>Master mixer - sets the level for the analog signal sent to line-out or the
speakers.</P>
<P>You may also want to ensure that <CODE>/dev/dsp</CODE> hasn't already been
grabbed by another process, like <B>esd</B> or <B>artsd</B>.  If
<CODE>/dev/dsp</CODE> isn't available, then MythTV won't work.  </P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: The CVS version of MythTV now has support for using
<B>artsd</B>.  This is a compile-time option, so you will need to edit the
<CODE>settings.pro</CODE> file in the mythtv directory then perform a <CODE>make
distclean; make</CODE>, and re-run <CODE>make install</CODE> as root to add this
support.  Otherwise, check your window manager documentation for
instructions on disabling the sound manager.</CAPTION>
</FIGURE>

If you wish to see what application is grabbing a resource, you can use the
<CODE>fuser</CODE> command:
<BLOCKQUOTE><CODE>
<PRE>
# fuser -v /dev/dsp
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To disable aRts in KDE, go to KDE->Control Center->Sound->Sound System and
uncheck the "Start aRts soundserver on KDE startup" box.  Run <CODE># killall
artsd</CODE> from the command line to stop the artsd program.</P>
<P>If you're using multiple sound cards and multiple tuners, use <CODE>alsamixer
-c 1</CODE> to work with the second sound card.  The first card is #0, the
second card is #1, etc.</P>

<H2><A NAME="ss20.13">20.13</A> <A HREF="#toc20.13">The mythbackend program told me to look at this section.</A>
</H2>

<P>mythbackend does a check to see if your sound device is capable of full
duplex operation.  If it's not, it's most likely that you're going to run
into issues when you try to record and play sound at the same time.  If your
backend is a separate machine than your frontend, then there's no problem,
since you're only going to be doing one thing at a time with the card. 
Likewise, if you're running the frontend and backend on the same machine,
but you're using btaudio or a Hauppauge PVR-250 as your recording source,
and using the playback function of your sound card, then you also shouldn't
have an issue, since the sound card isn't being asked to perform two
functions at once.</P>
<P>If you can't get your sound card to go full duplex and need it to, then check
your distribution for updated sound drivers.  If your sound card is not
capable of full-duplex operation, either because the drivers don't support
it, or it has been designed that way, then you're pretty much out of luck
and will either need to purchase a new sound card, or will need to get
btaudio 
<A HREF="#btaudio">operational</A>.</P>

<H2><A NAME="ss20.14">20.14</A> <A HREF="#toc20.14">My remote doesn't work / works sometimes and not others / "ghost"</A>
keypresses.</H2>

<P>This can be due to a number of factors.  The simplest case is the
"ghost" keypresses.  For me, it was due to compact fluorescent lights in
the same room as the IR receiver, which the receiver was picking up as
keypresses.  Once the lights were switched to incandescent bulbs, the ghost
went away.</P>
<P>You may have an issue with <B>lirc</B> misinterpreting IR commands from a
different remote.  I also have an issue where the TiVo "Peanut" remote will
eventually cause <B>lircd</B> to stop responding; even though <B>lircd</B>
is configured for the Pinnacle Systems remote, the TiVo remote IR patterns
are being seen by the IR receiver.</P>
<P>If your remote has been properly configured, and <B>irw</B> and
<B>irxevent</B> are working correctly, then it's highly likely that your
window manager is not giving focus correctly to the various Myth programs as
they run.  The following window managers are known to work correctly:</P>
<P>
<UL>
<LI>fvwm</LI>
<LI>blackbox  (using "Sloppy Focus" and "Focus New Windows")</LI>
</UL>
</P>

<H2><A NAME="ss20.15">20.15</A> <A HREF="#toc20.15">My PVR-250 card doesn't show inputs in the setup screen.</A>
</H2>

<P>See message 
<A HREF="http://www.mythtv.org/pipermail/mythtv-users/2003-April/002527.html">http://www.mythtv.org/pipermail/mythtv-users/2003-April/002527.html</A></P>

<H2><A NAME="ss20.16">20.16</A> <A HREF="#toc20.16">Where's my "canada-cable" entry gone to?</A>
</H2>

<H2><A NAME="ss20.17">20.17</A> <A HREF="#toc20.17">My channels are off by one.</A>
</H2>

<P>There is no such thing as "Canada Cable"; Canada uses the same
frequencies as the United States.  "Canada Cable" was a hack that some
people used when they would discover that their channels were off-by-one,
ie, when tuning to channel 42, they might get channel 41 or 43.  This is
actually due to the tuner on the video capture device being mis-detected. 
You must manually specify the tuner type in your <CODE>/etc/modules.conf</CODE>. 
See the video4linux mailing list (
<A HREF="https://listman.redhat.com/mailman/listinfo/video4linux-list">https://listman.redhat.com/mailman/listinfo/video4linux-list</A>) for
more information.</P>

<H2><A NAME="ss20.18">20.18</A> <A HREF="#toc20.18">Mythweb is showing a db_open error when I connect to it.</A>
</H2>

<P>Find your php.ini file. Make sure you've got a line in it like this:</P>
<P><CODE>extension=mysql.so</CODE></P>
<P>Restart apache for it to take effect.</P>

<H2><A NAME="ss20.19">20.19</A> <A HREF="#toc20.19">error: can't find a register in class 'BREG' while reloading 'asm'</A>
</H2>

<P>This is due to the broken Qt that is being distributed by Suse.  To work
around this, edit <CODE>libs/libavcodec/Makefile</CODE> and remove any
"-fPIC" you find there and then recompile.</P>

<H2><A NAME="mkspecs_error"></A> <A NAME="ss20.20">20.20</A> <A HREF="#toc20.20">make: *** No rule to make target /usr/lib/qt3/mkspecs/default/qmake.conf', needed by Makefile'.  Stop.</A>
</H2>

<P>This error happens when there's a missing link in the
<CODE>/usr/lib/qt3/mkspecs</CODE> directory.  There are two ways to fix this
error:</P>
<P>1.  Create the link manually:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cd /usr/lib/qt3/mkspecs
# ln -sf linux-g++ default
</PRE>
</CODE></BLOCKQUOTE>

and then restart the compile,</P>
<P>or</P>
<P>2.  Run <B>qmake mythtv.pro</B> in the mythtv directory.  Rerunning
<B>qmake</B> will create a new Makefile for you, however this still
doesn't fix the root cause of the issue, which is that your distribution
didn't create the symlink for you when the qt3 package was installed.  The
first choice is the better solution.</P>

<H2><A NAME="ss20.21">20.21</A> <A HREF="#toc20.21">make: *** No rule to make target /mkspecs/default/qmake.conf', needed by Makefile'.  Stop.</A>
</H2>

<P>You didn't set your <CODE>QTDIR</CODE>.  Re-read the section on 
<A HREF="#Setting_up_paths">Setting up paths</A>.</P>

<H2><A NAME="ss20.22">20.22</A> <A HREF="#toc20.22">My mouse pointer disappears when placed over the MythTV windows.</A>
</H2>

<P>This is the intended behavior.  The MythTV interface is meant for use
with a remote control or a keyboard.</P>

<H2><A NAME="ss20.23">20.23</A> <A HREF="#toc20.23">What does "strange error flushing buffer" mean on my console?</A>
</H2>

<P>Nothing, really.  It's just lame (the mp3 encoder) complaining for some
obscure reason.  This seems to be fixed in more recent versions of the
libmp3lame library.</P>

<H2><A NAME="ss20.24">20.24</A> <A HREF="#toc20.24">I can't change the channel when watching Live TV.</A>
</H2>

<P>Something's wrong with your program database.  Did mythfilldatabase run
with no major errors?</P>

<H2><A NAME="ss20.25">20.25</A> <A HREF="#toc20.25">When trying to run setup, I get an error like this: "./setup: error while loading shared libraries:"</A>
</H2>

<P>You didn't add <CODE>/usr/local/lib</CODE> to <CODE>/etc/ld.so.conf</CODE>.  See the
section on modifying 
<A HREF="#modifying_ld.so.conf">/etc/ld.so.conf</A>.</P>

<H2><A NAME="ss20.26">20.26</A> <A HREF="#toc20.26">Troubleshooting the Hauppauge PVR-250 IR remote</A>
</H2>

<P>The most likely issue is that you have incompatible versions of the
<B>lirc_i2c</B> and <B>lirc_dev</B> modules and the various
<B>lircd</B> programs.  See the section called 
<A HREF="#hauppauge_remote">Hauppauge PVR-250 remote and MythTV's native LIRC support.</A> for
examples on finding and removing old versions of lirc.</P>

<H2><A NAME="ss20.27">20.27</A> <A HREF="#toc20.27">MySQL not connecting correctly.</A>
</H2>

<P>Your <B>MySQL</B> installation may have networking turned off. 
Check that <CODE>/etc/mysql/my.cnf</CODE> <EM>does not</EM> contain
<CODE>skip-networking</CODE>.  If it does, remove it.  Also verify that 
<CODE>bind-address</CODE> is set to your IP address instead of 
<CODE>127.0.0.1</CODE>.  If you change either of these items, restart 
<B>MySQL</B>.</P>
<H2><A NAME="ss20.28">20.28</A> <A HREF="#toc20.28">My screen goes black when I try to play something.</A>
</H2>

<P>MythTV prints error and status messages to the shell that was used to
start the application.  If nothing seems to be happening when you try to
view a program, try switching back to the shell and look for error messages
there.</P>

<H2><A NAME="ss20.29">20.29</A> <A HREF="#toc20.29">Poor performance with NVidia cards and XvMC.</A>
</H2>

<P>XvMC is a NVidia driver feature which is supposed to help with decoding
video.  Users have reported that rather than speeding up their video it
appears to be doing the opposite.  You may want to check that your color
depth is set for 24bpp.</P>

<H2><A NAME="ss20.30">20.30</A> <A HREF="#toc20.30">My computer is loading a media player application when I insert a CD or DVD.</A>
</H2>

<P>You need to disable any sort of auto-running media player in your
environment, otherwise MythDVD or MythMusic will not be able to work
properly.</P>
<P>In KDE, you may want to perform the following:
<BLOCKQUOTE><CODE>
<PRE>
$ rm ~/.kde/Autostart/Autorun.desktop
</PRE>
</CODE></BLOCKQUOTE>
</P>
<H2><A NAME="ss20.31">20.31</A> <A HREF="#toc20.31">I can't change channels.</A>
</H2>

<P>This may be due to MythTV not having permissions to the appropriate
video4linux devices.  See the section titled 
<A HREF="#devperms">Device Permissons</A> for an example.</P>
<H2><A NAME="s21">21.</A> <A HREF="#toc21">Miscellaneous. </A></H2>

<H2><A NAME="ss21.1">21.1</A> <A HREF="#toc21.1">I'd like to watch the files without using MythTV / I'd like to convert the files to some other format. </A>
</H2>

<P>MythTV comes with a utility called <B>mythtranscode</B> which can
decode nuv files into raw format for use with other applications.  This
command-line utility was not designed to be used by the end-user, but
instead to be called by other applications or scripts.  Programs like
<B>mkmovie</B> (
<A HREF="http://www.icelus.org/">http://www.icelus.org/</A>) and <B>nuvexport</B> (
<A HREF="http://forevermore.net/myth/">http://forevermore.net/myth/</A>) are
better suited for the end user.  However, since <B>mythtranscode</B> can
be a useful tool, directions on using it follow.</P>
<P><B>mythtranscode</B> creates raw streams, which means that they do not
contain any container information such as resolution, frame-rate, or audio
sampling rate.  In order to process the output, you must supply this
information to the processing utility.  <B>mythtranscode</B> provides the
relevant information on STDOUT.</P>
<P>There are two modes in which <B>mythtranscode</B> can create raw streams. 
The first has no synchronization and assumes that the processing utility
will read audio and video at a constant rate.  This method is useful when a
single application will be processing the raw output, such as
<B>mencoder</B> or <B>ffmpeg</B>.  The second method assumes that two
separate applications will be processing the audio and video streams
independently, and there is no rate control between them which means that
the two programs don't coordinate their efforts to maintain synchronization.</P>

<H3>mythtranscode example</H3>

<P>First, start <B>mythtranscode</B>.  You will need to determine the
channel and the start time manually.
<BLOCKQUOTE><CODE>
<PRE>
$ mythtranscode --chanid 1036 --starttime 2003-10-20T15:30:00 --profile \
autodetect --fifodir . &amp;
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>When <B>mythtranscode</B> begins executing, it will create two FIFOs
("audout" and "vidout") in the directory specified (in this case ".",
meaning the current directory) and will print out information about the
video stream.</P>
<P>The next step is to start the processing application.  The following assumes
that the stream is NTSC 640x480 with 32Kbps audio.</P>
<P>To use <B>mencoder</B> you would enter a command like:
<BLOCKQUOTE><CODE>
<PRE>
mencoder -audiofile audout -audio-demuxer 20 -rawaudio rate=32000 \
-rawvideo on:w=640:h=480:fps=29.97 -ovc lavc -oac mp3lame -o out.avi \
vidout
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: You must use mencoder 1.0PRE1 or later. <B>mencoder</B>
version 0.9x <EM>WILL NOT WORK!</EM></CAPTION>
</FIGURE>

Using ffmepg:
<BLOCKQUOTE><CODE>
<PRE>
ffmpeg -f u16le -ar 32000 -ac 2 -i audout -f rawvideo -s 640x480 -r 29.97 \
-i vidout -vcodec mpeg4 -b 2000 -acodec mp3 -ab 128 out.avi
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Or to play directly using mplayer (again 1.0PRE1 or later is needed):
<BLOCKQUOTE><CODE>
<PRE>
mplayer -audiofile audout -audio-demuxer 20 -rawaudio rate=32000 \
-rawvideo on:w=640:h=480:fps=29.97 vidout
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you wanted to write the raw data to separate audio and video files for
later processing, the following would work (note the use of --fifosync
for rate-control):
<BLOCKQUOTE><CODE>
<PRE>
$ mythtranscode --chanid 1036 --starttime 2003-10-20T15:30:00 \
--profile autodetect --fifodir . --fifosync &amp;
$ cat audout > audio.raw &amp;
$ cat vidout > video.yuv
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss21.2">21.2</A> <A HREF="#toc21.2">I'd like to use some other window manager.</A>
</H2>

<P>MythTV is not dependent on any particular window manager.  If you wish to
run a lightweight window manager, the <CODE>configfiles/</CODE> directory has an
example of a <CODE>.twmrc</CODE> and <CODE>.fvwmrc</CODE> file you may use.</P>

<H2><A NAME="capture_resolution_"></A> <A NAME="ss21.3">21.3</A> <A HREF="#toc21.3">What capture resolution should I use?  How does video work?</A>
</H2>

<P>While MythTV allows you to set various GUI and capture resolutions, not
all combinations make sense.</P>
<P>First, analog video signals have a defined vertical resolution.  In NTSC,
the video standard specifies that there are 525 vertical scan lines.  Once
the "extra" lines are removed (they're used to synchronize the video signal,
and encode closed captioning data), you have 480 vertical lines.</P>
<P>In PAL, there are 625 "raw" lines of resolution, with a net of 576 vertical
lines.</P>
<P>Horizontally, the maximum you can expect from a Bt8X8 chip is 720.</P>
<P>With this in mind, there are certain commonly accepted values for
resolution.  While other values may be accepted, they will cause scan lines
to be repeated or dropped.</P>
<P>From "best" to "worst", in NTSC:
<UL>
<LI>720x480 (but more commonly, 704x480.  "DVD" resolution)</LI>
<LI>640x480 4:3</LI>
<LI>544x480 (TiVo high resolution)</LI>
<LI>480x480 (Video CD resolution)</LI>
<LI>352x480 (ReplayTV "Standard" quality)</LI>
<LI>320x480 </LI>
<LI>544x240</LI>
<LI>480x240 </LI>
<LI>352x240 </LI>
<LI>320x240</LI>
</UL>
</P>
<P>As you can see, the lower quality values are half of the better ones. 
720x240 is possible, but isn't a good tradeoff relative to the number of
vertical lines lost.  In a PAL country, the you would use values like
720x576 or x288.</P>
<P>The higher resolutions will be more CPU intensive if you're using software
encoding (PVR-250/350 will have minimal host CPU impact even if you're using
720x480). If the CPU is overtaxed, frames will be dropped causing uneven
motion. You will likely see the best results at resolutions which average at
least 10% CPU idle time.  You can use system tools such as <CODE>top</CODE> or
<CODE>sar</CODE> to check the CPU % idle while recording.  If the CPU average
usage is consistently exceeding 90%, frames will need to be dropped during
peak times when more than 100% of the available CPU would be needed to
process all of the frames.</P>
<P>If you'd like to read more on this, go to the vcdhelp website at 
<A HREF="http://www.vcdhelp.com/forum/userguides/94382.php">http://www.vcdhelp.com/forum/userguides/94382.php</A>.</P>

<H2><A NAME="ss21.4">21.4</A> <A HREF="#toc21.4">MythTV GUI and X Display Sizes.</A>
</H2>

<P>MythTV is designed to be run as dedicated full screen TV application
but can also be run as a desktop application on a computer monitor. Here
are a few consideration for configuring sizes to best suit you needs.</P>

<H3>X Dimensions</H3>

<P>For output to a Television, common resolutions are 640x480, 800x600, and
some rare devices support 1024x768. Generally, higher resolutions are
better. However, you may find that you prefer the picture quality at one of
the lower resolutions. Everything in MythTV is scalable and should 'fit'
regardless of the resolution you choose.</P>
<P>Edit your X configuration file, usually "XF86Config-4", so that the the
resolution you want to use is listed first in the lists under "Screen". If
this resolution is higher than the resolutions supported by your output
device, you will see a 'panning' effect where moving the mouse to the edge
will scroll around a desktop area which is larger than the display size. If
this happens, edit your X configuration file to match the display size then
restart X.</P>

<H3>MythTV Dimensions</H3>

<P>In 0.10 and later, from "mythfrontend" go to Setup->Appearance.
The default for the height and width is "0" - this will cause
MythTV to automatically size itself to full screen.</P>
<P>If the MythTV GUI width and height are not 0, mythfrontend uses these GUI
dimensions and is anchored to the upper left corner of the X Desktop. If
the GUI X and/or Y are not 0, the upper left corner is positioned at the
specified coordinates. If the "Run the frontend in a window" box is checked,
the window will have a frame and can then be dragged to any position on the
desktop.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: When the GUI is full screen, you may see windows rapidly
flipping on top of each other. If this happens you will need to set your
window manager to 'Click to Focus' for windows to stack properly.</CAPTION>
</FIGURE>

The fonts for the GUI and OSD will scale to whatever sizes you use. Most
font sizes can be changed in setup selections or in the .xml files under
<CODE>/usr/local/share/mythtv/</CODE> . Make sure to use fonts large enough
to be read on a TV screen from a distance.</P>
<P>The full screen TV size is based on the X display size. For Xinerama, you
can specify a screen in Setup->General. The TV picture will be stretched
to fit the entire GUI area regardless of the 
<A HREF="#capture_resolution_">capture resolutions</A> used. However, during playback, the "W" key can
to used to correct differences between 16:9 and 4:3.</P>

<H3>Overscan Dimensions</H3>

<P>Because picture edges can be ragged and screen edges aren't straight,
Television is designed to project an image larger than the physical screen.
This is called "overscan". Underscan is fitting the entire image inside the
screen. Underscan is useful for computer monitors so that toolbars and
scrollbars at the edges can be seen.</P>
<P>For best results, match the X display area as close as possible to the edges
of the physical screen. This can only be adjusted by your tv-out device or
by the settings for the television set. Many sets have these adjustments in
a 'service mode'. If you cannot make these adjustments, there will be black
borders around the edges of the X desktop, MythTV GUI and TV playback.</P>
<P>MythTV has settings for "Overscan" in Setup->Playback. These can not, and do
not, cause the image to display beyond the edge of the X display area. The
purpose of these settings are to cut off rough edges and to expand the image
so that objects will appear to be the same size as a normal overscanned TV
picture.</P>

<H2><A NAME="backupdb"></A> <A NAME="ss21.5">21.5</A> <A HREF="#toc21.5">I'd like to save or restore my database. </A>
</H2>

<P>See the <B>mysqldump</B> manpage for more information.
<BLOCKQUOTE><CODE>
<PRE>
$ mysqldump -u mythtv -pmythtv mythconverg -c > mythtv_backup.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To restore: (assuming that you've dropped the database)
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root
mysql>create database mythconverg;
mysql>exit
$ mysql -u mythtv -pmythtv mythconverg &lt; mythtv_backup.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>You may need to alter the MySQL permissions if this database is being shared
with multiple systems.  See the 
<A HREF="#modify_perm_mysql">Modifying access to the MySQL database for multiple systems</A> section for more
information.</P>

<H2><A NAME="ss21.6">21.6</A> <A HREF="#toc21.6">I'd like to delete the MySQL database.</A>
</H2>

<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Performing this step will remove the entire database. You will lose all of your settings and will need to re-run the mc.sql script
to setup the database structure before running the setup program.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root
mysql> drop database mythconverg;
mysql> quit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="btaudio"></A> <A NAME="ss21.7">21.7</A> <A HREF="#toc21.7">btaudio </A>
</H2>

<P>btaudio allows you to obtain the audio data from your tuner card directly
over the PCI bus without using a sound card.  This is useful if you would
like to use multiple tuner cards in a system without adding a sound card for
each one, or if your existing sound card is not capable of full-duplex
operation.</P>
<P>In order to use btaudio, your tuner card will need certain hardware
installed on it, and that hardware must be wired correctly.  The chip that
will allow you to use the btaudio module is the MSP34xx.  However, having a
MSP34xx is no guarantee that you will be able to use the btaudio module.</P>
<P>As of 2003-03-31, this is the current list of cards and their status:
Works with btaudio:</P>
<P>
<UL>
<LI>Hauppauge WinTV-radio with dbx-TV stereo, model 401</LI>
<LI>Hauppauge WinTV-Theater, model 495, 498 (Europe)</LI>
<LI>ATI TV Wonder</LI>
</UL>
</P>
<P>The following cards do not work:
<UL>
<LI>Pinnacle Studio PCTV Pro - note: this has a MSP34xx, but it's not
wired correctly to the BT878 chip.</LI>
<LI>ATI TV Wonder VE</LI>
<LI>Leadtek Winfast 2000 XP (PAL, UK and NTSC)</LI>
<LI>I/O Magic PC-PVR.  No MSP34xx chip.</LI>
</UL>
</P>
<P>The following cards have been reported to work, but have issues:
<UL>
<LI>Avermedia AVerTV Studio (no digital DSP output, "whiney noise" on
analog)</LI>
</UL>
</P>
<P>Once btaudio loads, it should register additional <CODE>/dev/dsp</CODE> and
<CODE>/dev/mixer</CODE> devices.  Typing <CODE>$ dmesg</CODE> will let you know
what's going on.</P>

<H2><A NAME="ss21.8">21.8</A> <A HREF="#toc21.8">Removing unwanted channels.</A>
</H2>

<P>If <B>mythfilldatabase</B> grabbed a channel which you do not want to
include in your TV listings, you can remove the entries from the xmltv
config file and the MySQL database.  This often happens with premium
channels; for example, HBO or Showtime may be available on your cable TV
system, but is scrambled because you're not a subscriber to that channel. 
Since you can never watch it, you want to get rid of it.</P>
<P>First, comment out the channel from the &nbsp;/.mythtv/&lt;sourcename&gt;.xmltv
file by inserting the word "not " (including the space) in front of the
unwanted entry. This will prevent <B>xmltv</B> from grabbing future
listings.</P>
<P>Next, delete the unwanted item from the channel table so that it will not
appear in the EPG or when changing channels.  To delete the data from the
database we need to perform some steps.  First, assuming that HBO is channel
15, we need to find out the internal <CODE>chanid</CODE> used by MySQL:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> select chanid from channel where channum=15;
+--------+
| chanid |
+--------+
|   1015 |
+--------+
1 row in set (0.00 sec)
mysql> delete from channel where chanid = 1015;
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Old program data will be removed over the course of a week. However, you may
want to immediately delete any current program listings for the channel that
has been removed:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql> delete from program where chanid = 1015;
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss21.9">21.9</A> <A HREF="#toc21.9">I'd like to use NFS.</A>
</H2>

<P>You may want to use a central server to store your files.  </P>
<P>On the host machine, (in this case, the hostname is "masterbackend") you'll
want to edit your <CODE>/etc/exports</CODE> file and use something like:
<BLOCKQUOTE><CODE>
<PRE>
/var/video (rw)
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To export the <CODE>/var/video</CODE> directory with read / write privileges.</P>
<P>On the "slave" machine, you'll want to edit the <CODE>/etc/fstab</CODE> file and
add something like:
<BLOCKQUOTE><CODE>
<PRE>
masterbackend:/var/video /var/video nfs rsize=8192,wsize=8192,soft,nfsvers=3
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Then run <CODE># fstab -a</CODE> to re-read the file to mount the file system.</P>
<P>In this case, the source is a machine called "masterbackend" which is
exporting the directory "/var/video", which we're mounting locally at
"/var/video".  The rsize and wsize options are used to increase the
performance of NFS; soft mean that NFS will eventually timeout on an error,
and the nfsvers is required for filesizes over 2GB.</P>

<H2><A NAME="ss21.10">21.10</A> <A HREF="#toc21.10">Automatically starting mythfrontend at system boot time.</A>
</H2>

<P>Here's an example submitted to the mythtv-dev list by Pat Pflaum
<A HREF="mailto:pat@netburp.com">mailto:pat@netburp.com</A> using fvwm:
<BLOCKQUOTE><CODE>
<PRE>
$ cat > .xinitrc
fvwm &amp;
mythfrontend
^D
$ cat > .fvwmrc
Style myth* NoTitle, NoHandles, Sticky, WindowListSkip, SloppyFocus, GrabFocus, BorderWidth 0
^D
$
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The following also works with blackbox:
<BLOCKQUOTE><CODE>
<PRE>
$ cat > .xinitrc
xset -dpms s off &amp;
irxevent &amp;
mythfrontend &amp;
blackbox
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Make sure that your <CODE>.blackboxrc</CODE> file has:
<BLOCKQUOTE><CODE>
<PRE>
session.screen0.focusNewWindows:        True
session.screen0.focusModel:     SloppyFocus
</PRE>
</CODE></BLOCKQUOTE>
 in it.</P>
<P>
<A NAME="mythbackend_autostart"></A> </P>
<H2><A NAME="ss21.11">21.11</A> <A HREF="#toc21.11">Automatically starting mythbackend at system boot time.</A>
</H2>

<H3>Red Hat And Mandrake</H3>

<P>Here's a method for automatically starting mythbackend submitted by Mike
Thomson (
<A HREF="mailto:linux@m-thomson.net">mailto:linux@m-thomson.net</A>) and Stu Tomlinson (
<A HREF="mailto:stu@nosnilmot.com">mailto:stu@nosnilmot.com</A>).</P>
<P>Copy the files from the MythTV <CODE>contrib</CODE> directory or from Mike's web
site (
<A HREF="http://m-thomson.net/mythtv/">http://m-thomson.net/mythtv/</A>) as follows:</P>
<P><CODE>etc.rc.d.init.mythbackend</CODE> should be made executable and copied to
<CODE>/etc/rc.d/init.d/</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
$ cd contrib
$ su
# chmod a+x etc.rc.d.init.d.mythbackend
# cp etc.rc.d.init.d.mythbackend /etc/rc.d/init.d/mythbackend
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><CODE>etc.sysconfig.mythbackend</CODE> should be copied to
<CODE>/etc/sysconfig/</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
$ cd contrib
$ su
# cp etc.sysconfig.mythbackend /etc/sysconfig/mythbackend
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Edit <CODE>/etc/sysconfig/mythbackend</CODE> if you want to change the defaults
(the userid that should start mythbackend, location of the logfile and (if
required) the name and location of the mythbackend binary).</P>
<P>Use <B>chkconfig</B> to make sure the script is called when
entering runlevels 3, 4 or 5:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# chkconfig --level 345 mythbackend on
# exit
$
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3>Log files </H3>

<P>By default, the log file for mythbackend will be written to
<CODE>/var/tmp/mythbackend.log</CODE>. This has been tested and is known to work
on Mandrake and Red Hat, but many people prefer to place logs under
<CODE>/var/log/</CODE>.</P>
<P>To do this, create a group called <CODE>mythtv</CODE> (or anything you prefer)
and add your usual MythTV users to that group. If you changed the user that
starts mythbackend from the default of root you <EM>must</EM> perform this
step.</P>
<P>Create the directory <CODE>/var/log/mythtv</CODE> and set its
permissions as follows:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# mkdir /var/log/mythtv
# chown root:mythtv /var/log/mythtv
# chmod 0775 /var/log/mythtv
# exit
$ ls -ld /var/log/mythtv
drwxrwxr-x    2 root     mythtv       4096 Apr 28 21:58 /var/log/mythtv/
$
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3>Mandrake 9.x</H3>

<P>Mandrake adds one more twist in the form of the <CODE>msec</CODE> utility,
which runs regularly and (at the default or any higher security level) sets
permissions on many files, including those under <CODE>/var/log</CODE>.</P>
<P>To tell msec about the MythTV log files and their directory, you need to
edit the <CODE>/etc/security/msec/perm.local</CODE> file to include the
following:
<BLOCKQUOTE><CODE>
<PRE>
# /etc/security/msec/perm.local
# Local overrides to the msec program
#
# Full file path                user.group              permissions
/var/log/mythtv/                root.mythtv             775
/var/log/mythtv/*               root.mythtv             664
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>A copy of the above has been included in the contrib/ directory.  You may
add it by typing:
<BLOCKQUOTE><CODE>
<PRE>
$ cd contrib
$ su
# cat etc.security.msec.perm.local >> /etc/security/msec/perm.local
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Finally run the <CODE>msec</CODE> tool to check and implement your
changes.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# msec
# exit
$
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: msec can only <EM>reduce</EM> the permissions of files, so if
you don't get the results you expect, check that you're not asking
<CODE>msec</CODE> to add missing permissions to the files or directories you
created.</CAPTION>
</FIGURE>
</P>
<H3>Gentoo</H3>

<P>The portage file for MythTV has scripts that will allow you to run
mythbackend at startup.</P>
<P>To run mythbackend as a daemon which starts at boot time:
<BLOCKQUOTE><CODE>
<PRE>
# rc-update add mythbackend default
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To stop mythbackend as a daemon:
<BLOCKQUOTE><CODE>
<PRE>
# /etc/init.d/mythbackend stop
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To obtain a list of options:
<BLOCKQUOTE><CODE>
<PRE>
# /etc/init.d/mythbackend
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="advanced_backend_config"></A> <A NAME="ss21.12">21.12</A> <A HREF="#toc21.12">Advanced Backend Configurations. </A>
</H2>

<P>MythTV is flexible in the way that you define multiple backend tuner
configurations.  The only hard-and-fast rule is that the Master backend
<EM>must</EM> have a capture device defined, but shouldn't imply that the
capture device in the Master backend must be the first capture card defined in the
database.</P>
<P>One example of an advanced configuration is the round-robin scheme.  Rather
than defining all of the cards on the master, you could first go into setup
on the master to define globals such as the general configuration and the
channel lineup but not the host-specific configuration item like the capture
card.  In this example, we will use a 4 tuner configuration, where two
slaves have one card each and the master has two.
<OL>
<LI>Add the first capture card on one of the slaves.  Complete the
configuration, connecting the input source to the card.  This will get
cardid #1 in the database.  Exit setup.</LI>
<LI>Configure the first capture card on the master backend.  This will get
cardid #2 in the database.  Exit setup.</LI>
<LI>Configure the first capture card on the second slave.  This will be
cardid #3 in the database.  Exit setup.</LI>
<LI>Configure the second capture card on the master backend.  This will
get cardid #4 in the database.  Exit setup.</LI>
</OL>
</P>
<P>Using this scheme, the master backend will not use both capture cards until
one of the following happens:
<UL>
<LI>There are four recordings scheduled for the same time</LI>
<LI>Both slaves are not available</LI>
</UL>
</P>
<P>The scheduler in MythTV checks whether an encoder is available; if a slave
backend isn't running, its encoder isn't available, so the scheduler will
look for the next available encoder.  This makes MythTV very flexible; slave
tuners can come and go, and as long as there are enough tuners for what
you'd like to record it doesn't matter which tuner in particular is going to
be used.</P>
<P>Using this round-robin scheme along with a shared storage directory like
NFS and enabling the Master Backend Override setting will allow you to view
content even if the slave backend that recorded a program is not available.</P>

<H2><A NAME="ss21.13">21.13</A> <A HREF="#toc21.13">What is this transcoder thing, and how do I use it?</A>
</H2>

<P>The transcoder re-encodes files from one MythTV format to another.  The
main purpose of the transcoder is to allow users with hardware
encoders (PVR-250) or systems that can only record in RTjpeg due to
performance reasons (multiple capture cards, slow system, etc) to create
MPEG-4 streams to save space.</P>
<P>The transcoder can be used in two ways:
<UL>
<LI>Automatically re-encode every file once it has completed recording</LI>
<LI> After marking commercials, the transcoder can be run manually to
delete the commercials from the file (thus further saving space)</LI>
</UL>

The two methods are independent.  The first is an automatic process that can be
enabled/disabled through the setup program; the second is a manual method which
must be invoked on each recording individually.</P>
<P>The second method can be used on files that have already been transcoded (or
files which were are already in the correct format), so only the frames
immediately following a cut section will be re-encoded, resulting in a very
minimal loss of quality.</P>
<P>To enable automatic transcoding, do the following:
start the setup program
under the host-specific settings:
set the Transcoder Auto-run checkbox</P>
<P>For either manual or automatic transcoding:
start mythbackend
start mythfrontend
select setup, and the Transcoding recording profile.
now select either RTjpeg or MPEG-4 (selecting any of the hardware
encoders will result in the transcoder not working).
set the other parameters as you'd like.  For best performance, you
should match the audio to the 'Default' profile.  If you plan to
only use the manual transcoder, you can choose to set the video to
be the same as the default profile too (as long as it is MPEG-4 or
RTjpeg)</P>
<P>Everything should now be setup properly.  If you elected to use the
Auto-Run feature, the transcoder will automatically launch after each
recording is complete.  The transcoder thread runs at a low priority, so it
should not impact any critical tasks or other recordings.</P>
<P>If you want to manually transcode a program, simply press 'X' while
watching a recording (you should have already finished marking all
commercials).  If you change your mind, hitting 'X' again will stop the
transcoding.</P>
<P>Once the transcode is complete, mythbackend will replace the old file
with the new as soon as it is no longer in use.</P>

<H2><A NAME="ss21.14">21.14</A> <A HREF="#toc21.14">Changing your hostname.</A>
</H2>

<P>If you need to change the name of the computers used with MythTV you'll
need to perform a sequence of steps.  There are a number of pieces of
information that MythTV keeps track of which are tied to the hostname of the
box, so changing the hostname involves altering the name in the
operating system and in the MySQL database.  In the examples below, the old
name of the system was "frontend1" and we're going to change it to
"kidsroom".</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Changing the hostname using direct SQL update commands will
break things.  You <EM>MUST</EM> use this indirect method.</CAPTION>
</FIGURE>
 
1.  Stop all backends.  If you run <B>mythbackend</B> from a terminal
session, press control-c. If your backends are started with an init
script, you would do something like the following:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# /etc/init.d/mythbackend stop
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>2.  Change the hostname.</P>
<P>For Red Hat and derived distributions, edit the
<CODE>/etc/sysconfig/network</CODE> file.  Look for
<CODE>HOSTNAME=frontend1</CODE> and change this to
<CODE>HOSTNAME=kidsroom</CODE> or whatever you'll be using.  For other
distributions, refer to the documentation, such as the
<PRE>
hostname(1)
</PRE>
 man page.</P>

<P>To alter the
hostname in the current session, run:
<BLOCKQUOTE><CODE>
<PRE>
# hostname kidsroom
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>3.  Dump the database.
<BLOCKQUOTE><CODE>
<PRE>
$ mysqldump -u mythtv -pmythtv mythconverg -c > mythtv_backup.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>4.  Rename the host in the database.  First, ensure that the new hostname
you'll be using isn't already in the database.
<BLOCKQUOTE><CODE>
<PRE>
$ grep kidsroom mythtv_backup.sql
</PRE>
</CODE></BLOCKQUOTE>

Now we're actually going to change the name.  The following should all be
typed on the same line:
<BLOCKQUOTE><CODE>
<PRE>
$ cat mythtv_backup.sql | sed s/\'frontend1\'/\'kidsroom\'/ >> mythtv_restore.sql
</PRE>
</CODE></BLOCKQUOTE>

If you don't feel comfortable using <B>sed</B>, you can open the
<CODE>mythtv_backup.sql</CODE> file in a text editor and perform a global search
and replace.  When saving the file, make sure you use the new name,
<CODE>mythtv_restore.sql</CODE> or the rest of the steps below will fail.</P>
<P>5.  Drop and recreate the database.
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root
mysql>drop database mythconverg;
mysql>create database mythconverg;
mysql>exit      
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>6.  Restore the database using your edited version.
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u mythtv -pmythtv mythconverg &lt; mythtv_restore.sql
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you are running slave backends or frontends, don't forget to re-enable
access as detailed in 
<A HREF="#modify_perm_mysql">Modifying access to the MySQL database for multiple systems</A>. </P>
<P>7.  Start the backends.  If you use init scripts, do the following, otherwise
start them from terminal consoles.
<BLOCKQUOTE><CODE>
<PRE>
# /etc/init.d/mythbackend start
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>8.  Quit and restart all frontends.  Delete the <CODE>mythtv_backup.sql</CODE>
and <CODE>mythtv_restore.sql</CODE> files.</P>

<H2><A NAME="ss21.15">21.15</A> <A HREF="#toc21.15">Can I run MythTV on my TiVo?</A>
</H2>

<H2><A NAME="ss21.16">21.16</A> <A HREF="#toc21.16">Can I run MythTV on my ReplayTV?</A>
</H2>

<P>No.</P>
<P>While it is true that the TiVo runs the Linux kernel, and TiVo has released
their changes to the kernel under the GPL, the TiVo is <EM>not</EM> a
general-purpose computer, and there is no programming information available
for the custom hardware contained within a TiVo.</P>
<P>The ReplayTV runs VxWorks, a Real Time Operating System from Wind River
Systems.</P>
<H2><A NAME="ss21.17">21.17</A> <A HREF="#toc21.17">Can I use wireless between the frontend and the backend?</A>
</H2>

<P>Yes, you may, assuming that your wireless connection has sufficient
bandwidth to maintain the datarate between the frontend and the backend. 
802.11b should be sufficient if the encoded bitrate of the content is less
than the datarate of your wireless connection, which in the case of 802.11b
would be approximately 4 Mbps.  (The advertised rate of 11Mbps gives an
actual throughput of 4 Mbps.)  802.11a and 802.11g, if operating in their
high-speed modes, or proprietary 802.11b "Turbo" schemes should be
adequate.  Multiple wireless frontends, poor signal strength or other
factors can severely impact the viewing experience on the frontend.</P>
<H2><A NAME="ss21.18">21.18</A> <A HREF="#toc21.18">How can I burn shows that I have recorded to a DVD?</A>
</H2>

<P>There are two answers to this question.  The easiest thing to do is to
simply burn the MythTV files onto the DVD and treat the DVD as if it were a
hard drive.  This will allow you to save the programs, but it's likely that
they will <EM>not</EM> be playable in a DVD player because the disc will
simply contain files and not any DVD structure.  If you'd like to create a
DVD that will play in a standard DVD player and your files have been
recorded as MPEG-2 from a device supported by the IVTV driver, the first
step you'll need to perform is to remux the file to make it DVD compliant. 
Next, you'll use <B>dvdauthor</B>, <B>mkisofs</B> to create the ISO
image, and finally <B>dvdrecord</B> to burn that to a blank DVD-R.</P>
<P>The requirements for this procedure are <B>mjpegtools</B> (provides
<B>mplex</B>) and <B>dvdauthor</B> (provides <B>mpeg2desc</B> and
<B>dvdauthor</B>).</P>
<P>This script will perform the necessary steps. You'll need to pass it the
.nuv file and a name for the new DVD project.  You should end up with a
directory which you can <B>mkisofs</B> into a ISO file then burn it.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh

mkfifo aud0
mkfifo vid0
mkfifo dvdmpg

mpeg2desc -a0 &lt; $1 > aud0 &amp;
mpeg2desc -v0 &lt; $1 > vid0 &amp;
mplex -f 8 -V -o dvdmpg aud0 vid0 &amp;
dvdauthor -o $2 -f dvdmpg
dvdauthor -o $2 -T

rm aud0
rm vid0
rm dvdmpg
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>It's also possible to pipe the output of <B>mkisofs</B> directly to
<B>cdrecord</B> without any intermediate files being written to your hard
drive.  For example:
<BLOCKQUOTE><CODE>
<PRE>
#!/bin/sh
TSIZE=`mkisofs -dvd-video -udf -q -print-size .`
mkisofs -dvd-video -udf -V "$1" . | nice -10 cdrecord speed=1 dev=1,1,0 \
driveropts=burnfree -dao -v tsize="$TSIZE"s -
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="MigratingtoDD"></A> <A NAME="ss21.19">21.19</A> <A HREF="#toc21.19">Migrating from XMLTV to DataDirect. </A>
</H2>

<P><B>CVS Only</B></P>
<P>The first step is to create a backup of your database using the
instructions found in 
<A HREF="#backupdb">I'd like to save or restore my database.</A>.</P>
<P>Next, start <B>mysql</B> and perform the following commands:
<BLOCKQUOTE><CODE>
<PRE>
$ mysql -u root mythconverg
mysql>delete from program;
mysql>drop table channel;
mysql>drop table videosource;
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>At this point we need to recreate the two tables that we just deleted.  This
will ensure that the channel numbers will lineup like they used to - if we
had not deleted the tables, the <CODE>autoincrement</CODE> would throw
everything off.  Open the mysqldump file you created in the backup step and
search for the <CODE>CREATE TABLE channel</CODE> and <CODE>CREATE TABLE
videosource</CODE> commands.</P>
<P>Cut-and-paste from the mysqldump file into the <B>mysql</B> monitor.  Here
is an example, but make sure you use the one that's on <EM>your</EM>
machine.
<BLOCKQUOTE><CODE>
<PRE>
mysql>CREATE TABLE videosource (
  sourceid int(10) unsigned NOT NULL auto_increment,
  name varchar(128) NOT NULL default '',
  xmltvgrabber varchar(128) default NULL,
  userid varchar(128) NOT NULL default '',
  freqtable varchar(16) NOT NULL default 'default',
  lineupid varchar(64) default NULL,
  password varchar(64) default NULL,
  PRIMARY KEY  (sourceid),
  UNIQUE KEY name (name)
) TYPE=MyISAM;
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Do the same for the <CODE>CREATE TABLE channel</CODE> section.  Once that's been
completed, exit from <B>mysql</B>.  Run the MythTV setup program and
complete the configuration as detailed in the section called 
<A HREF="#ConfigureDD">Configuring the Zap2It.com DataDirect service.</A> and
in 
<A HREF="#VideoSources">Video Sources</A>.</P>
<P>Once you're done running setup, run <B>mythfilldatabase</B> to populate
the database with new data.</P>
<H2><A NAME="s22">22.</A> <A HREF="#toc22">Example Configurations.</A></H2>

<P>This section contains configurations which you may find useful.</P>
<H2><A NAME="pvr250"></A> <A NAME="ss22.1">22.1</A> <A HREF="#toc22.1">Hauppauge PVR-250/350 hardware MPEG-2 encoder. </A>
</H2>

<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  THE FOLLOWING DOCUMENTATION IS PROVIDED AS-IS AND IS
NOT GUARANTEED TO WORK WITH YOUR DISTRIBUTION.  FOR IVTV DRIVER ASSISTANCE,
SEE THE IVTV MAILING LIST.  
<A HREF="https://lists.sourceforge.net/lists/listinfo/ivtv-devel">https://lists.sourceforge.net/lists/listinfo/ivtv-devel</A>  SEE THE
IVTV FAQ IF YOU HAVE QUESTIONS OR ISSUES.  
<A HREF="http://ivtv.sourceforge.net/">http://ivtv.sourceforge.net/</A></CAPTION>
</FIGURE>

These instructions work for Mandrake 9.1 on a backend machine which is
hosting a single PVR-250 capture card.</P>
<P>Install the Mandrake kernel source.  If you are using a different Mandrake
kernel level (ie, not 2.4.21-0.16mdk as in the example below, then alter the
<B>urpmi</B> command appropriately.)
<BLOCKQUOTE><CODE>
<PRE>
$ uname -a
Linux pvr 2.4.21-0.16mdk #1 Fri Apr 11 06:51:54 CEST 2003 i686 unknown
unknown GNU/Linux

$ su
# urpmi kernel-source
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  You do not need to recompile your kernel.</CAPTION>
</FIGURE>

Download the latest IVTV driver from Sourceforge.  Check 
<A HREF="http://sourceforge.net/projects/ivtv/">http://sourceforge.net/projects/ivtv/</A> for the current version. 
Right now (2004-01-21), it's 0.1.9.  Untar the file.
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf ivtv-0.1.9.tar.gz
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>This should create an ivtv directory.  Switch to it and perform the
following commands:
<BLOCKQUOTE><CODE>
<PRE>
$ cd ivtv/utils
$ wget http://hauppauge.lightpath.net/software/pvr250/pvr250_17_21288.exe
$ su
# ./ivtvfwextract.pl pvr250_17_21288.exe
# exit
$ cd ../driver
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The <B>ivtvfwextract</B> program extracts the firmware required for the
card.  You may want to go to the Hauppauge website and download the latest
Windows driver if the <B>wget</B> command fails.</P>
<P>ivtv also needs to know how your kernel was compiled.  The default Makefile
is not configured for the way Mandrake "does things".  At the top of the
Makefile in the <CODE>driver</CODE> directory is a line like this:
<BLOCKQUOTE><CODE>
<PRE>
KERNELDIR= /lib/modules/$(KERNVER)/build
</PRE>
</CODE></BLOCKQUOTE>

edit it so that it looks like:
<BLOCKQUOTE><CODE>
<PRE>
KERNELDIR= /usr/src/linux
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  If you are running a distribution / kernel which is using
the new version of i2c (version 2.8.x, found in the latest Mandrake and
Cooker) you will need to make the following edit. Look for
<A NAME="i2c"></A> </CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
# uncomment if you use i2c 2.8.0+
#CFLAGS += -DNEW_I2C
</PRE>
</CODE></BLOCKQUOTE>

and remove the "#" from the line containing <CODE>CFLAGS</CODE>.</P>
<P>Next, compile the driver:
<BLOCKQUOTE><CODE>
<PRE>
$ cd ~/ivtv/driver
$ make
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Compile the <B>test_ioctl</B> program:
<BLOCKQUOTE><CODE>
<PRE>
$ cd ../utils
$ make
$ su
# cp test_ioctl /usr/local/bin
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>: You may get warnings about i2c during the compile.  Ignore
them if they look something like this:</CAPTION>
</FIGURE>

<CODE>#warning Using temporary hack for missing I2C driver-ID for saa7114</CODE></P>
<P>However, if you get an actual compile error where the compile doesn't finish
and the error looks like:
<CODE>saa7115.c:1117: error: unknown field 'inc_use' specified in
initializer</CODE>
then you didn't uncomment CFLAGS as specified 
<A HREF="#i2c">above</A>.</P>
<P>Add the following to <CODE>/etc/modules.conf</CODE>:</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  You do not need to add the last line "<CODE>add above...</CODE>"
if you will not be using the IR remote that came with the card.</CAPTION>
</FIGURE>

<BLOCKQUOTE><CODE>
<PRE>
alias char-major-81     videodev
alias char-major-81-0   ivtv
alias char-major-61 lirc_i2c
options ivtv debug=1
options tuner type=2
options msp3400 once=1 simple=1
add below ivtv msp3400 saa7115 tuner
add above ivtv lirc_dev lirc_i2c
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  You must specify the tuner type manually.  See
<CODE>~/ivtv/driver/tuner.h</CODE> for a listing of tuners.  In the above
example, <CODE>tuner type=2</CODE> is a Phillips NTSC.  Use an appropriate tuner
type for your system and video standard.  The <CODE>debug=1</CODE> parameter on
the ivtv line actually means less debugging output will be printed.</CAPTION>
</FIGURE>

At this point we need to ensure that there are no other versions of
<CODE>msp3400.o</CODE> that would be loaded instead of the version that is
created by ivtv.  Note that in the command below we are using the backtick,
usually located on the same key as the tilde "&nbsp;" and not the single quote.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# cd /lib/modules/`uname -r`
# pwd
/lib/modules/2.4.21-0.16mdk
# find . -name "msp3400*" | xargs rm -f
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Next, copy the files that were compiled in the driver directory into the
appropriate modules directory:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# make install
# depmod -ae
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Finally, load the ivtv driver:
<BLOCKQUOTE><CODE>
<PRE>
# modprobe ivtv
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Check that the card is being recognized on the PCI bus:
<BLOCKQUOTE><CODE>
<PRE>
$ lspci -v
&lt;snip>

00:0c.0 Multimedia video controller: Internext Compression Inc iTVC15 MPEG-2
Encoder (rev 01)
        Subsystem: Hauppauge computer works Inc.: Unknown device 4801
        Flags: bus master, medium devsel, latency 32, IRQ 11
        Memory at d0000000 (32-bit, prefetchable) [size=64M]
        Capabilities: &lt;available only to root>
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you don't see your card on the PCI bus, make sure that it's been
installed in a bus-master slot.  For some motherboards, only the PCI slots
closest to the AGP slot are bus-mastering.</P>
<P>Check that the ivtv driver has created a new video device:
<BLOCKQUOTE><CODE>
<PRE>
$ ls -l /dev/v4l/vi*
crw-------    1 mythtv   sys       81, 224 Dec 31  1969 vbi0
crw-------    1 mythtv   sys       81,   0 Dec 31  1969 video0
crw-------    1 mythtv   sys       81,  32 Dec 31  1969 video32
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>In this case, the ivtv device is <CODE>video0</CODE>.</P>
<P>You can now add this card available to MythTV.  Go into your mythtv setup
directory on the machine hosting the hardware MPEG-2 card.
When you add a new capture card, ensure that you are using the
<CODE>video0</CODE> device.  </P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  As of 2003-04-25 the ivtv driver does not support VBI, so
closed-captioning is not available.</CAPTION>
</FIGURE>

Leave the VBI device, audio device and audio sampling rate limit at the
default values.  Change the default input to an appropriate setting for your
configuration.  Change the card type to "Hardware MPEG Encoder Card" and
press ENTER.</P>
<P>The remaining setup is just like a standard V4L card; define a video source
if you have not already done so, and assign the video source to a video card
input on the Input Connections screen.</P>
<P>Some people report issues with the ivtv module not being loaded when
required by MythTV.  To get around this, you can <B>modprobe</B> the ivtv driver
before using it.  The simplest technique is to add the <B>modprobe</B>
command to <CODE>/etc/rc.d/rc.local</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
# echo "/sbin/modprobe ivtv" >> /etc/rc.d/rc.local
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<A NAME="troubleshooting_pvraudio"></A> </P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  some people complain
that their PVR-250/350 card is not capturing audio.  The most likely source
for this is that your system is not loading the correct msp3400.o file; ivtv
uses a custom msp3400.c, and if the resulting module isn't loaded you will
not get sound.  Switch to your <CODE>/lib/modules</CODE> directory and rename
the existing msp3400.o file, then copy the <CODE>msp3400.o</CODE> from the ivtv
driver directory and re-run <B>depmod</B>.  If that still doesn't work,
then check the ivtv mailing list for more information.  You may wish to
perform an <B>updatedb</B> as root and then do a <CODE>locate msp3400</CODE>
to find all the <CODE>msp3400.o.gz</CODE> files that may be on your system.  For
example, Mandrake has a <CODE>msp3400.o.gz</CODE> in the <CODE>3rdparty</CODE>
subdirectory which will take precedence over the custom version created by
ivtv.  You can check if you have the correct msp3400 loaded by typing (as
root): <CODE>modinfo msp3400 | grep "parm: *standard"</CODE>.  If you don't get
a line that says: "parm:        standard int", then you're not loading the
correct msp3400.</CAPTION>
</FIGURE>

Check to ensure that you're loading the correct msp3400 module.
<BLOCKQUOTE><CODE>
<PRE>
 
# modinfo msp3400
filename:    /lib/modules/2.4.22-9mdk/kernel/drivers/media/video/msp3400.o
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Check that the path is correct for your kernel version, and that the driver
being loaded is in <CODE>/media/video</CODE> and not some other directory.</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  Some people report "ghosting" issues with their PVR-250s,
where there is a faint copy of whatever is on the screen appearing to the
right of the image.  If you have this issue, it's fairly obvious.  This is a
firmware issue, apparently.  There are two ways around this:</CAPTION>
</FIGURE>

<OL>
<LI>Run at 720x480 resolution</LI>
<LI>Turn off DNR</LI>
</OL>
</P>
<P>To turn off DNR, add the following to your <CODE>rc.local</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
/path/to/ivtv/utils/test_ioctl --set-codec-params=dnr_mode=0,dnr_temporal=0
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="hauppauge_remote"></A> <A NAME="ss22.2">22.2</A> <A HREF="#toc22.2">Hauppauge PVR-250 remote and MythTV's native LIRC support.</A>
</H2>

<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  THE FOLLOWING DOCUMENTATION IS PROVIDED AS-IS AND IS
NOT GUARANTEED TO WORK WITH YOUR DISTRIBUTION.  FOR LIRC DRIVER ASSISTANCE,
SEE THE LIRC MAILING LIST.  
<A HREF="http://lists.sourceforge.net/lists/listinfo/lirc-list">http://lists.sourceforge.net/lists/listinfo/lirc-list</A></CAPTION>
</FIGURE>

These instructions work for Mandrake 9.2 on a frontend machine which is
hosting a single PVR-250 capture card using MythTV's native LIRC support.</P>
<P>First, you need to ensure that you've installed the kernel source
appropriate for the kernel that you're running.  In this case, we're using
kernel 2.4.22-9, so when installing the kernel-source ensure that you've got
the correct version.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# uname -a
Linux frontend 2.4.22-9mdk #1 sam sep 13 06:54:11 CEST 2003 i686 unknown
unknown GNU/Linux
# rpm -qa|grep kernel-source
kernel-source-2.4.22-9mdk
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you've already installed LIRC from the Mandrake packages, it's going to
be version 0.6.6, and that won't work.  Uninstall it:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# urpme lirc lirc-remotes liblirc-devel
# rm -rf /dev/lirc*
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Check to ensure that you don't have other versions of lirc modules and
programs on your system:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# updatedb
# locate lirc_i2c|grep `uname -r`
/usr/src/linux-2.4.22-9mdk/3rdparty/lirc/lirc_i2c.c
/lib/modules/2.4.22-9mdk/kernel/3rdparty/lirc/lirc_i2c.o.gz

# locate lirc_dev|grep `uname -r`
/usr/src/linux-2.4.22-9mdk/3rdparty/lirc/lirc_dev.c
/usr/src/linux-2.4.22-9mdk/3rdparty/lirc/lirc_dev.h
/usr/src/linux-2.4.22-9mdk/include/linux/modules/lirc_dev.stamp
/usr/src/linux-2.4.22-9mdk/include/linux/modules/lirc_dev.ver
/lib/modules/2.4.22-9mdk/kernel/3rdparty/lirc/lirc_dev.o.gz

# locate irw|grep "/usr"
/usr/bin/irw
/usr/local/bin/irw
/usr/local/man/man1/irw.1

# locate lircd|grep "/usr"
/usr/src/linux-2.4.22-9mdk/3rdparty/lirc/lircd.conf.RM-050
/usr/share/man/man8/lircd.8.bz2
/usr/share/doc/lirc-0.6.6/html/lircd.html
/usr/sbin/lircd
/usr/local/sbin/lircd
/usr/local/man/man8/lircd.8

# locate irxevent|grep "/usr"
/usr/share/man/man1/irxevent.1.bz2
/usr/share/doc/lirc-0.6.6/html/irxevent.html
/usr/share/doc/lirc-0.6.6/irxevent.keys
/usr/bin/irxevent
/usr/local/bin/irxevent
/usr/local/man/man1/irxevent.1
</PRE>
</CODE></BLOCKQUOTE>

As you can see, there were a number of different versions of lirc already
installed on this system.  They must be removed.  We don't care about the
source code or the man pages, only the executables and the kernel modules.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# rm -rf /lib/modules/2.4.22-9mdk/kernel/3rdparty/lirc
# rm -rf /usr/sbin/lircd /usr/local/sbin/lircd
# rm -rf /usr/bin/irxevent /usr/local/bin/irxevent
# rm -rf /usr/bin/irw /usr/local/bin/irw
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download the lirc-0.7.0pre2 tarball:
<BLOCKQUOTE><CODE>
<PRE>
$ wget http://lirc.sourceforge.net/software/snapshots/lirc-0.7.0pre2.tar.bz2
$ tar -xjf lirc-0.7.0pre2.tar.bz2
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Mandrake now includes i2c version 2.8.0 which changes the semantics of some
low-level calls.  You will need to patch LIRC in order for it to work
correctly.  Download the patch and install:
<BLOCKQUOTE><CODE>
<PRE>
$ cd lirc-0.7.0pre2
$ wget http://delvare.nerim.net/i2c/other/lirc-CVS-i2c-2.8.0.patch
$ patch -p1 &lt; lirc-CVS-i2c-2.8.0.patch
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Next, run the LIRC setup program:
<BLOCKQUOTE><CODE>
<PRE>
$ ./setup.sh
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Select "1" (Driver configuration), then scroll down to "5" (TV Card), press
ENTER, then scroll down to "f" (Hauppauge TV card) and press ENTER again. 
Once back at the main menu, press "3" for Save and run configure.</P>
<P>If your build environment is ready, LIRC will create a Makefile for you. 
Switch to root and compile:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# make
# make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  If you receive a compile error stating:
<CODE>lirc_i2c.c:296: unknown field 'owner' specified in initializer</CODE>, you
will need to edit the file and comment out a line in the source code.  See
message 
<A HREF="http://www.gossamer-threads.com/perl/mailarc/gforum.cgi?post=86696">http://www.gossamer-threads.com/perl/mailarc/gforum.cgi?post=86696</A>
for detailed instructions.</CAPTION>
</FIGURE>

As a part of the <CODE>make install</CODE> process, LIRC will create the
appropriate device for you in <CODE>/dev</CODE>.  Check to make sure:
<BLOCKQUOTE><CODE>
<PRE>
$ ls -l /dev/lirc*
crw-r--r--    1 root     root      61,   0 Sep 18 15:36 /dev/lirc
srw-rw-rw-    1 root     root            0 Sep 18 15:38 /dev/lircd=
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Your <CODE>modules.conf</CODE> file should have already been modified if you've
followed the instructions 
<A HREF="#pvr250">above</A> for installing the PVR-250. 
<B>modprobe</B> the lirc_i2c driver, run the <B>lircd</B> program and
then check your <CODE>/var/log/messages</CODE> and <CODE>/var/log/lircd</CODE>
files.
<BLOCKQUOTE><CODE>
<PRE>
$ su
# modprobe lirc_i2c
# lsmod
Module                  Size  Used by    Not tainted
lirc_i2c                5124   0
lirc_dev               10096   1  [lirc_i2c]
...
# lircd
# tail /var/log/messages
Sep 18 15:38:26 frontend kernel: lirc_i2c: chip found @ 0x18 (Hauppauge IR)
Sep 18 15:38:26 frontend kernel: lirc_dev: lirc_register_plugin:sample_rate:
10
...
# tail /var/log/lircd
Sep 18 15:24:52 frontend lircd 0.7.0pre2: lircd(hauppauge) ready
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>To check that your remote is working correctly, run the <B>irw</B> program
and start pressing buttons.  If nothing is happening, you must begin
troubleshooting.  Things to check:
<UL>
<LI>Are there batteries in the remote?  </LI>
<LI>Does the remote work?  You may be able to see the
flashes of IR coming from the remote if you look at it with a video camera.</LI>
<LI>Is the IR dongle cable plugged in?</LI>
<LI>Did you remove all of the old LIRC device drivers?  Run "updatedb" as
root, then "locate lirc_i2c".  The only lirc_i2c should be the one in the
misc/ directory for your kernel version.</LI>
<LI>Did you run depmod?</LI>
<LI>Is your modules.conf setup correctly?</LI>
<LI>Did you modprobe lirc_i2c?</LI>
<LI>Did you run lircd?</LI>
<LI>Do you have an /etc/lircd.conf?</LI>
<LI>Is /dev/lirc a character mode file, major 61, minor 0?  Is it readable
by all groups?</LI>
<LI>If you think you may have had old LIRC device drivers you may need to
reboot to ensure that they're totally out of the system.  Try running
modprobe -r lirc_i2c as root first, then modprobe lirc_i2c and try again.</LI>
<LI>What path does modinfo lirc_i2c and modinfo lirc_dev show?  It
should be in /lib/modules/{your kernel version}/misc/</LI>
</UL>
</P>
<P>If none of the above works, and <B>irw</B> still isn't showing keypresses,
then you will need to ask your question on the LIRC list.</P>
<P>Assuming that <B>irw</B> is showing keypresses, you can continue:
To enable native LIRC support within MythTV, you will need to modify your
<CODE>settings.pro</CODE> file and recompile.  Your <CODE>settings.pro</CODE> should
look like this:
<BLOCKQUOTE><CODE>
<PRE>
# Native lirc support
CONFIG += using_lirc
LIRC_LIBS = -llirc_client
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Recompile and install:
<BLOCKQUOTE><CODE>
<PRE>
$ make distclean; make
$ su
# make install
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you're not using native LIRC support, ensure that the button names that
come up with <B>irw</B> match the ones in the <CODE>.lircrc</CODE> file in
your home directory.  Note that if you are not using native LIRC support,
the <CODE>.lircrc</CODE> file is in your home directory and has a "." as the first
character.</P>
<P>Since we're using native LIRC support within MythTV, copy the
<CODE>configfiles/hauppauge-lircrc-nativelirc</CODE> file into your
<CODE>.mythtv/</CODE> directory and call it <CODE>lircrc</CODE>.  It has a slightly
different format than what you would use if you were using
<B>irxevent</B>.  Also note that it is in your <CODE>.mythtv</CODE> directory
and does <EM>not</EM> have a "." in the filename.  </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ cp configfiles/hauppauge-lircrc-nativelirc ~/.mythtv/lircrc
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Add the commands to load the LIRC device drivers and start <B>lircd</B> to
your <CODE>rc.local</CODE>:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# echo "modprobe lirc_i2c" >> /etc/rc.d/rc.local
# echo "/usr/local/sbin/lircd" >> /etc/rc.d/rc.local
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>You should now have native LIRC support within MythTV.</P>

<H2><A NAME="LVM"></A> <A NAME="ss22.3">22.3</A> <A HREF="#toc22.3">Logical Volume Manager (LVM). </A>
</H2>

<P>LVM greatly increases the flexibility you have in managing your storage
than traditional physical partitions. This section will provide some brief
notes on how to use LVM to create storage space for your video files and how
to add additional disk space in the future. There's lots more that can be
done with LVM, so check the LVM HOWTO 
<A HREF="http://tldp.org/HOWTO/lvm-HOWTO/">http://tldp.org/HOWTO/lvm-HOWTO/</A> document for details.</P>
<P>If you don't understand how to partition a drive, or how to change the
partition type you should stop and look at documentation on how to perform
these steps.</P>
<P><B>BIG FAT WARNING</B>:  Using an incorrect parameter can make your files
inaccessible, prevent your computer from booting, etc.  Be careful!</P>
<P>Make sure your kernel configuration includes LVM support or that it's
available as a module. Today, most vendors include this by default. You'll
also want to ensure that you have a copy of the LVM utilities; check your
distribution, or get the latest versions from 
<A HREF="http://www.sistina.com/products_lvm.htm">http://www.sistina.com/products_lvm.htm</A> and build them manually.</P>
<P>Check that the <B>vgscan</B> program is being run at some point during
your boot sequence - most distributions do this by default. Look for a
message during boot up that looks like this:
<CODE>vgscan -- reading all physical volumes (this may take a while...)</CODE></P>
<P>LVM uses a few concepts you should be familiar with before starting.
<UL>
<LI>PV (Physical Volume).  The actual partition on the hard drive.</LI>
<LI>VG (Volume Group).  The aggregation of all the PVs make a VG.</LI>
<LI>LV (Logical Volume).  Subdivision of the pool of space available in
the VG into individual chunks, like /usr, /var/video, etc.</LI>
</UL>
</P>
<P>The following example assumes that you want to create a LVM partition from a
chunk of space in /dev/hda5, using a reiserfs filesystem and mounted on
/var/video. You later decide to extend this filesystem by adding a new disk:
/dev/hdb.</P>
<P>You need to create at least one LVM partition for a physical volume. Use
<B>fdisk</B> or your favorite partition editor to set the type to LVM
(0x8e). If you're using an entire disk, create one big partition rather than
using the device itself. e.g. use /dev/hdb1 not /dev/hdb.  </P>
<P>In the following example, you have a 15GB disk.  The first 6GB are set as
your boot partition.  <CODE>/dev/hda2</CODE> was added as an extended partition,
and within that partition you created the <CODE>/dev/hda5</CODE> linux (ext2)
partition.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# fdisk /dev/hda

The number of cylinders for this disk is set to 1823.
There is nothing wrong with that, but this is larger than 1024,
and could in certain setups cause problems with:
1) software that runs at boot time (e.g., old versions of LILO)
2) booting and partitioning software from other OSs
   (e.g., DOS FDISK, OS/2 FDISK)

Command (m for help): p

Disk /dev/hda: 15.0 GB, 15000330240 bytes
255 heads, 63 sectors/track, 1823 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/hda1   *         1       764   6136798+  83  Linux
/dev/hda2           765      1823   8506417+   5  Extended
/dev/hda5           765      1823   8506417   83  Linux

Command (m for help): t
Partition number (1-6): 5
Hex code (type L to list codes): 8e

Command (m for help): p

Disk /dev/hda: 15.0 GB, 15000330240 bytes
255 heads, 63 sectors/track, 1823 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes

   Device Boot    Start       End    Blocks   Id  System
/dev/hda1   *         1       764   6136798+  83  Linux
/dev/hda2           765      1823   8506417+   5  Extended
/dev/hda5           765      1823   8506417   8e  Linux LVM

Command (m for help): w

#
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Create the LVM physical volume from the partitions (repeat if you have
multiple partitions to use):
<BLOCKQUOTE><CODE>
<PRE>
# pvcreate /dev/hda5
</PRE>
</CODE></BLOCKQUOTE>

Create a LVM volume group out of this physical volume called "VGforMyth" that is
allocated in chunks that are a multiple of 64MB
<BLOCKQUOTE><CODE>
<PRE>
# vgcreate VGforMyth -s 64m /dev/hda5
</PRE>
</CODE></BLOCKQUOTE>

Create a logical volume of 5GB called "video" and then create the reiserfs
filesystem and mount it:
<BLOCKQUOTE><CODE>
<PRE>
# lvcreate --name video --size 5G VGforMyth
# mkreiserfs /dev/VGforMyth/video
# mount /dev/VGforMyth/video /var/video
</PRE>
</CODE></BLOCKQUOTE>

Now create a 3GB volume for mythmusic files if you like:
<BLOCKQUOTE><CODE>
<PRE>
# lvcreate --name music --size 3G VGforMyth
# mkreiserfs /dev/VGforMyth/music
# mount /dev/VGforMyth/music /var/music
</PRE>
</CODE></BLOCKQUOTE>

Display the volume group status:
<CODE># vgdisplay -v</CODE></P>
<P>Now, lets suppose you want to add a 60GB hard disk to the system as hdb and
allocate 50GB of it to video storage.</P>
<P>First, create a single partition /dev/hdb1 covering the whole disk and make
it type 0x8e using your partition editor.</P>
<P><CODE># fdisk /dev/hdb</CODE>
.... create partition, set type, save and reboot if it says you have to</P>
<P>Create the new LVM physical volume:</P>
<P><CODE># pvcreate /dev/hdb1</CODE></P>
<P>Add the new physical volume to the volume group:</P>
<P><CODE># vgextend VGforMyth /dev/hdb1</CODE></P>
<P>
<FIGURE>
<EPS FILE="stop.eps">
<IMG SRC="stop.png">
<CAPTION><B>NOTE</B>:  You may get errors at this point stating that there are no
physical volumes available for adding to the LV, even though you know for a
fact that there are.  You may need to specify the physical volume in the <CODE>/dev/ide/host/bus/target/lun/etc</CODE> format.</CAPTION>
</FIGURE>

Once you've completed one of the following two procedures, use <B>df</B>
to check that you've got more space.</P>

<H3>ReiserFS</H3>

<P>Make the logical volume used for video bigger:</P>
<P><CODE># lvextend --size +50G /dev/VGforMyth/video</CODE></P>
<P>Unmount, resize and remount the filesystem.  Technically, you don't need to
unmount and remount the ReiserFS. 
<BLOCKQUOTE><CODE>
<PRE>
# umount /var/video
# resize_reiserfs /dev/VGforMyth/video
# mount /dev/VGforMyth/video /var/video
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H3>ext2 or ext3</H3>

<P>LVM comes with a program called <B>e2fsadm</B>.</P>
<P>Unmount, resize and remount the filesystem.  The filesystem <EM>must</EM> be
unmounted during this procedure.
<BLOCKQUOTE><CODE>
<PRE>
# umount /var/video
# e2fsadm --size +50G /dev/VGforMyth/video
# mount /dev/VGforMyth/video /var/video
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="advancedpartitionformatting"></A> <A NAME="ss22.4">22.4</A> <A HREF="#toc22.4">Advanced Partition Formatting. </A>
</H2>

<P>The partitions that your distribution sets up for you may not be
optimized for large files. Using LVM in conjunction with the following
techniques can be quite useful.</P>
<P>Unlike a typical filesystem, a MythTV video partition is usually a very
large filesystem filled with a fairly small number of large files.
Filesystem I/O is usually not an issue, even in multi-tuner and/or
multi-frontend setups.</P>
<P>There is however, one aspect of filesystem performance that can have a
bearing on the performance of MythTV.  In Linux, deleting a file will
utilize I/O bandwidth until the deletion has been completed.  If deleting
the file takes long enough, the video capture buffer may overrun, thereby
resulting in dropped frames.  Some filesystems are faster at deleting files
than others and, for multi-gigbyte MythTV video files, these differences can
be significant.</P>
<P>Fortunately, there are published tests (
<A HREF="http://aurora.zemris.fer.hr/filesystems/big.html">http://aurora.zemris.fer.hr/filesystems/big.html</A>) that provide
insight into filesystem performance under conditions relevant to MythTV
usage.  In addition, some limited testing (archived at 
<A HREF="http://www.gossamer-threads.com/perl/mailarc/gforum.cgi?post=106656;search_string=filesystem;guest=2417820&amp;t=search_engine#106656">http://www.gossamer-threads.com/perl/mailarc/gforum.cgi?post=106656;search_string=filesystem;guest=2417820&amp;t=search_engine#106656</A>)
with very large files (10 gigabytes) was reported in the MythTV Users
mailing list.</P>

<H3>Ext2</H3>

<P>Ext2 was the defacto standard Linux filesystem for many years.  It is
stable, provides good I/O performance and can quickly delete large files. 
The primary disadvantage of Ext2 is that it is not a journaling filesystem,
so a file system consistency check (fsck, which is normally only performed
after a system crash) can take many hours on a filesystem the size of a
typical MythTV partition.</P>

<H3>Ext3</H3>

<P>Ext3 is Ext2 with a journal, so your biggest gain is that in case of a
crash and reboot you won't have to wait very long for your partition to be
remounted.</P>
<P>There are options available when formatting an Ext3 partition, as in:
<BLOCKQUOTE><CODE>
<PRE>
# mkfs.ext3 -T largefile4 /dev/hdb1
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>This example assumes that <CODE>/dev/hdb1</CODE> has already been created using
<B>fdisk</B>. If you're using LVM, <CODE>/dev/hdb1</CODE> may be something like
<CODE>/dev/VGforMyth/video</CODE>.</P>
<P>The "-T largefile4" option creates one inode per 4 megabytes, which can
provide a few percent more storage space.  However, tests indicate that
using the "-T largefile4" option can drastically increase the amount of time
required to delete a large file and thus it should only be used with encoder
settings that produce small video files (YMMV).</P>
<P>You can check on your filesystem using the <B>dumpe2fs</B> program. See
the man page for details.</P>
<H3>ReiserFS</H3>

<P>The Reiser filesystem is another journaling filesystem commonly
distributed with Linux.  It is known to be an extremely efficient filesystem
and it especially excels at managing partitions containing a large number of
small files.  However, tests indicate it is not the fastest at deleting very
large files.  For that reason, it may not be the best choice when using
encoder bitrates that produce very large files.</P>

<H3>JFS</H3>

<P>JFS (Journaling File System) is a journaling filesystem originally
developed by IBM for AIX which was later released as open source.  While not
as common as Ext3 or ReiserFS, it is distributed with RedHat 9 (RH9) and
Fedora Core 1 (RHFC1) and Mandrake as well as other distros.  According to
tests, JFS is the file deletion speed king, deleting virtually any file in
under one second, even files as large as 10 gigabytes.</P>

<H3>XFS</H3>

<P>XFS is a journaling file system originally developed by SGI for Irix, and
later released as open source.  While not a part of the default RedHat Linux
9 or Fedora Core installation (although it is a part of Mandrake), it can be
easily installed via ATrpms.  XFS provides deletion speeds for large files
only slightly slower than JFS.  According to the test results shown at (
<A HREF="http://aurora.zemris.fer.hr/filesystems/big.html">http://aurora.zemris.fer.hr/filesystems/big.html</A>), XFS provide
higher I/O rates than JFS, albeit at a higher CPU loading.  This may cause
issues if you do not have the spare CPU capacity to handle XFS, potentially
leading to dropped frames.</P>
</BODY>
</HTML>
