<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>Installing mythtv: Configuring mythtv.</TITLE>
 <LINK HREF="mythtv-HOWTO-9.html" REL=next>
 <LINK HREF="mythtv-HOWTO-7.html" REL=previous>
 <LINK HREF="mythtv-HOWTO.html#toc8" REL=contents>
</HEAD>
<BODY>
<A HREF="mythtv-HOWTO-9.html">Next</A>
<A HREF="mythtv-HOWTO-7.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc8">Contents</A>
<HR>
<H2><A NAME="s8">8.</A> <A HREF="mythtv-HOWTO.html#toc8">Configuring mythtv.</A></H2>

<P>By this point, all of the prerequisites have been installed,
<B>mysql</B> is running and has had it's initial database setup.  It's now
time to configure mythtv.</P>
<P>Open a shell and switch to the <CODE>/usr/local/share/mythtv</CODE> directory. 
You <B>MUST</B> edit the <CODE>settings.txt</CODE> file so that it's
appropriate for your system.  At a minimum, ensure that the BufferName, RecordFilePrefix
and PIPBuffername variables are set to directories that exist on your system. 
By default, these point to <CODE>/mnt/store</CODE>.  For example, you may wish to create
a <CODE>/var/video</CODE> subdirectory, so you would change <CODE>/mnt/store</CODE>
to <CODE>/var/video</CODE>
<BLOCKQUOTE><CODE>
<PRE>
% su
# mkdir /var/video
# chmod a+rwx /var/video
# exit
</PRE>
</CODE></BLOCKQUOTE>

The <CODE>settings.txt</CODE> file is fairly self-explanatory.  </P>
<P><B>NOTE</B>: although the width and height can be changed to almost
anything, if you start mythtv and don't see video, it is likely that the
video4linux (v4l) subsystem did not like the height and width parameters
specified.  It's best to leave the default as-is until you're sure that
mythtv is operational.</P>
<P>Users in North America can now exit and save the file.  Users in other parts
of the world need to modify the first line and modify the XMLTVGrabber
variable to the correct grabber for their region.  <B>tv_grab_uk</B> for the
UK, etc.  Use the name from the xmltv directory.</P>
<P>Now that you've edited your <CODE>settings.txt</CODE> file, it's time to run the
setup program and perform the initial configuration.</P>
<P>Open a shell, and switch to the setup directory:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
% cd setup
% ./setup
% cd
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The setup program will ask you a few questions and then proceed to run the
XMLTV grabber program.</P>
<P>Now that the setup program has completed, run <B>mythfilldatabase</B> to
get one week of data inserted into the database.</P>
<P><B>NOTE</B>:  <B>mythfilldatabase</B> might take a while to complete,
depending on any number of factors, most of which you can't control.  It's
best to just let the program run to completion.</P>
<P><B>mythfilldatabase --manual</B> is another option; the manual option will
allow you to fine tune channel frequencies  and specify which channels will be added to
the database.</P>

<P>In order to keep your database filled, <B>mythfilldatabase</B> should be
run once a day.</P>
<P>The default in the <B>mythcrontab</B> file is to run the
<B>mythfilldatabase</B> program every day at 1800 (6 PM).  If you want to
change this, then open the <CODE>configfiles/mythcrontab</CODE> file in your
favorite editor and modify it as you like.  Once you're satisfied with the
time that <B>mythfilldatabase</B> will run, save and exit, and return to the shell
prompt.</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
% cd configfiles
% crontab mythcrontab
% crontab -l  NOTE: this is a lowercase L.
# DO NOT EDIT THIS FILE - edit the master and reinstall.
# (mythcrontab installed on Mon Nov 11 17:20:18 2002)
# (Cron version -- $Id$)
0 18 * * * /usr/local/bin/mythfilldatabase
%
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>As you can see, <B>mythfilldatabase</B> will now be run at 1800 (6 PM)
every day.</P>

<HR>
<A HREF="mythtv-HOWTO-9.html">Next</A>
<A HREF="mythtv-HOWTO-7.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc8">Contents</A>
</BODY>
</HTML>
