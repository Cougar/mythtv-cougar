<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.20">
 <TITLE>Installing and using mythtv: Downloading and compiling.</TITLE>
 <LINK HREF="mythtv-HOWTO-6.html" REL=next>
 <LINK HREF="mythtv-HOWTO-4.html" REL=previous>
 <LINK HREF="mythtv-HOWTO.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="mythtv-HOWTO-6.html">Next</A>
<A HREF="mythtv-HOWTO-4.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc5">Contents</A>
<HR>
<H2><A NAME="s5">5.</A> <A HREF="mythtv-HOWTO.html#toc5">Downloading and compiling.</A></H2>

<P>Get mythtv from the 
<A HREF="http://www.mythtv.org">mythtv.org</A>
web site.  Save the tarball to a directory you can find.</P>
<P>Get XMLTV from 
<A HREF="http://xmltv.sourceforge.net">http://xmltv.sourceforge.net</A>.  Download version 0.5.3</P>
<P>Get lame from 
<A HREF="http://www.mp3dev.org/mp3">http://www.mp3dev.org/mp3</A>.  Download the source code to v3.92 by
following the links to sourceforge.net</P>

<H2><A NAME="nonintelcpu_"></A> <A NAME="ss5.1">5.1</A> <A HREF="mythtv-HOWTO.html#toc5.1">Notes on compiling on a system with non-Intel processors. </A>
</H2>

<P>If
you've got a system with an AMD K6-2 or a VIA C3 processor, make the
following change in the <CODE>settings.pro</CODE> file.</P>
<P>Look for 
<PRE>
-march=pentiumpro
</PRE>
 
and replace it with
<PRE>
-march=i586
</PRE>
 
before you compile.</P>
<P>Recent AMD processors, like the Duron, Thunderbird and Athlon don't need this
change.</P>

<H2><A NAME="ss5.2">5.2</A> <A HREF="mythtv-HOWTO.html#toc5.2">Building LAME.</A>
</H2>

<P>Open a shell and switch to the directory where you saved lame.
<BLOCKQUOTE><CODE>
<PRE>
% tar -xzf lame-3.92.tar.gz
% cd lame-3.92
% ./configure
% make
% make test
% su
# make install
</PRE>
</CODE></BLOCKQUOTE>

Check that it worked:
<BLOCKQUOTE><CODE>
<PRE>
# ls -l /usr/local/lib
-rw-r--r--    1 root     root       381706 Nov  4 14:22 libmp3lame.a
-rwxr-xr-x    1 root     root          674 Nov  4 14:22 libmp3lame.la*
lrwxrwxrwx    1 root     root           19 Nov  4 14:22 libmp3lame.so ->
libmp3lame.so.0.0.0*
lrwxrwxrwx    1 root     root           19 Nov  4 14:22 libmp3lame.so.0 ->
libmp3lame.so.0.0.0*
-rwxr-xr-x    1 root     root       360197 Nov  4 14:22
libmp3lame.so.0.0.0*

# exit
%
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss5.3">5.3</A> <A HREF="mythtv-HOWTO.html#toc5.3">Building XMLTV. </A>
</H2>

<P><B>NOTE</B>: Red Hat Linux 8.0 users, you <EM>must</EM> download and
install an updated version of libexpat.  The version that ships with Red Hat
Linux 8.0 (version 1.95.4) is buggy, and will cause problems with XML::Twig.
All other distributions may skip the step and proceed with untar'ing the
xmltv file.</P>
<P>Download version 1.95.5 from sourceforge.net:  
<A HREF="http://sourceforge.net/projects/expat/">http://sourceforge.net/projects/expat/</A></P>
<P>Open a shell prompt:
<BLOCKQUOTE><CODE>
<PRE>
% tar -xzf expat-1.95.5.tar.gz
% cd expat-1.95.5
% ./configure
% make
% su
# make install
# exit
%
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>NOTE</B>:  Red Hat Linux 8.0 users, make sure that you set your LANG as
described in 
<A HREF="mythtv-HOWTO-4.html#RH80-LANG">Section 4</A>.</P>
<P>Continuing on:</P>
<P>Untar the xmltv file:
<BLOCKQUOTE><CODE>
<PRE>
% tar -xjf xmltv-0.5.3.tar.bz2
% cd xmltv-0.5.3
</PRE>
</CODE></BLOCKQUOTE>

Install the xmltv prerequisites:
<BLOCKQUOTE><CODE>
<PRE>
% su -
# perl -MCPAN -e shell
cpan> install XML::Twig
cpan> install Date::Manip
Date::Manip is up to date.
cpan> install LWP
cpan> install XML::Writer
cpan> exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Change to the XMLTV directory and compile it:
<BLOCKQUOTE><CODE>
<PRE>
% cd xmltv-0.5.3
% perl Makefile.PL
</PRE>
</CODE></BLOCKQUOTE>

You can answer "N" to the tv_check, tv_pick_cgi questions.  Say "yes" to
the grabber required for your location.</P>
<P>You may get errors about modules not being installed.  They shouldn't matter
if you're installing North America and have followed the instructions to
this point.
<BLOCKQUOTE><CODE>
<PRE>
% make
% make test
% su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss5.4">5.4</A> <A HREF="mythtv-HOWTO.html#toc5.4">Manually building mythtv.</A>
</H2>

<P>Unpack mythtv
<BLOCKQUOTE><CODE>
<PRE>
% tar -xjf mythtv-0.7.tar.bz2
% cd mythtv-0.7
% ./configure
% make
</PRE>
</CODE></BLOCKQUOTE>

Switch to superuser:
<BLOCKQUOTE><CODE>
<PRE>
% su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="Gentoo_build"></A> <A NAME="ss5.5">5.5</A> <A HREF="mythtv-HOWTO.html#toc5.5">Gentoo. </A>
</H2>

<P>[Documentation being finalized]</P>
<P>There are ebuilds setup for mythtv and for XMLTV.  To use them, do the
following, add the following to your <CODE>/etc/make.conf</CODE>:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
# PORTDIR_OVERLAY is a directory where local ebuilds may be stored without
#     concern that they will be deleted by rsync updates. Default is not
#     defined.
PORTDIR_OVERLAY=/home/[yourusername]/portage
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Next, create the following directories:
<BLOCKQUOTE><CODE>
<PRE>
mkdir -p /home/[yourusername]/portage/video-media/mythtv
mkdir -p /home/[yourusername]/portage/dev-perl/xmltv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download the ebuilds and save them to their respective directories made
above.  Make sure the downloaded file names are the same as those on
bugs.gentoo.org.  The correct source files will fail to download if the
ebuild names are wrong.  The two ebuilds are:</P>
<P>
<UL>
<LI>mythtv: 
<A HREF="http://bugs.gentoo.org/show_bug.cgi?id=10533">http://bugs.gentoo.org/show_bug.cgi?id=10533</A></LI>
<LI>XMLTV: 
<A HREF="http://bugs.gentoo.org/show_bug.cgi?id=10536">http://bugs.gentoo.org/show_bug.cgi?id=10536</A></LI>
</UL>
</P>
<P>emerge mythtv:
<BLOCKQUOTE><CODE>
<PRE>
% emerge /home/[yourusername]/portage/video-media/mythtv/mythtv-0.7.0
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>It should download the source then complain about a missing digest.  To fix
this,</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
% ebuild /home/[yourusername]/portage/video-media/mythtv/mythtv-0.7.0.ebuild digest
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>emerge mythtv again and it should compile and install.</P>
<P>Do the same for xmltv but an additional step will be required first to fool
it into thinking XML-Twig is installed.  </P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
% su
# emerge inject dev-perl/XML-Twig
# emerge /home/[yourusername]/portage/dev-perl/xmltv/xmltv-0.5.2
# ebuild /home/[yourusername]/portage/dev-perl/xmltv/xmltv-0.5.2.ebuild digest
# emerge /home/[yourusername]/portage/dev-perl/xmltv/xmltv-0.5.2
# exit
% 
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss5.6">5.6</A> <A HREF="mythtv-HOWTO.html#toc5.6">Debian.</A>
</H2>

<P>Debian packages for MythTV and some of its add-on modules have been
packaged by Matt Zimmerman 
<A HREF="mailto:mdz@debian.org">mailto:mdz@debian.org</A> and are
available at 
<A HREF="http://dijkstra.csh.rit.edu:8088/~mdz/debian/dists/woody/mythtv/">http://dijkstra.csh.rit.edu:8088/~mdz/debian/dists/woody/mythtv/</A>, including installation instructions.  All of the prerequisites for
MythTV are available as Debian packages.</P>
<P>The mailing list message for this announcement can be accessed at 
<A HREF="http://www.snowman.net/pipermail/mythtv-dev/2002-November/001116.html">http://www.snowman.net/pipermail/mythtv-dev/2002-November/001116.html</A>.</P>

<HR>
<A HREF="mythtv-HOWTO-6.html">Next</A>
<A HREF="mythtv-HOWTO-4.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc5">Contents</A>
</BODY>
</HTML>
