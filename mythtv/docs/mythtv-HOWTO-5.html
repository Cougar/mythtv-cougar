<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Installing and using MythTV: Downloading and compiling.</TITLE>
 <LINK HREF="mythtv-HOWTO-6.html" REL=next>
 <LINK HREF="mythtv-HOWTO-4.html" REL=previous>
 <LINK HREF="mythtv-HOWTO.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="mythtv-HOWTO-6.html">Next</A>
<A HREF="mythtv-HOWTO-4.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc5">Contents</A>
<HR>
<H2><A NAME="s5">5.</A> <A HREF="mythtv-HOWTO.html#toc5">Downloading and compiling.</A></H2>

<P>Get MythTV from the 
<A HREF="http://www.mythtv.org">mythtv.org</A>
web site.  There are two installation methods you may choose from.  The
first is to download the latest release in tarball format and compile.  The
tarball release of MythTV should work on a wide variety of systems and
should be the preferred method for new users.  If you wish to use the CVS
version of MythTV you may obtain it from CVS this way:
<A NAME="cvs"></A> 
<BLOCKQUOTE><CODE>
<PRE>
$ mkdir mythtv
$ cd mythtv
$ cvs -d :pserver:mythtv@cvs.mythtv.org:/var/lib/mythcvs login
Logging in to :pserver:mythtv@cvs.mythtv.org:/var/lib/mythcvs
CVS password: mythtv
$ cvs -z3 -d :pserver:mythtv@cvs.mythtv.org:/var/lib/mythcvs checkout mythtv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The other MythTV modules may be downloaded from CVS the same way; replace
"mythtv" with "mythweather", "mythgallery", "mythmusic", etc.</P>
<P>If you wish to stay up-to-date with CVS, you may replace "checkout mythtv"
with <CODE>update mythtv</CODE> after you've done your initial download.</P>
<P><B>NOTE</B>: If you are going to use CVS to compile MythTV rather than
using the distribution tarball, it is <B>strongly</B> recommended that you
join the 
<A HREF="http://www.mythtv.org/mailman/listinfo/mythtv-commits/">http://www.mythtv.org/mailman/listinfo/mythtv-commits/</A> and 
<A HREF="http://www.mythtv.org/mailman/listinfo/mythtv-dev/">http://www.mythtv.org/mailman/listinfo/mythtv-dev/</A> mailing lists.</P>
<P>Get XMLTV from 
<A HREF="http://xmltv.sourceforge.net">http://xmltv.sourceforge.net</A>.  Download version 0.5.27 if you're in
North America.</P>
<P>
<HR>
<PRE>
NOTE for Mandrake users:  If you have added a "PLF" mirror, you may skip the
next step and type:

# urpmi libmp3lame0 libmp3lame0-devel

NOTE for Red Hat users: If you are installing with apt or yum, you may skip this step, it will be taken care
of. Otherwise get lame and lame-devel from FreshRPMS: http://freshrpms.net/rpm/lame/

After downloading, be sure to install both:
# rpm -Uvh lame*
</PRE>
<HR>
</P>
<P>Get lame from 
<A HREF="http://www.mp3dev.org/mp3">http://www.mp3dev.org/mp3</A>.  Download the source code to v3.93.1 by
following the links to sourceforge.net</P>

<H2><A NAME="nonintelcpu_"></A> <A NAME="ss5.1">5.1</A> <A HREF="mythtv-HOWTO.html#toc5.1">Notes on compiling on a system with non-Intel processors. </A>
</H2>

<P>If you've got a system with an AMD K6-2 or a VIA C3 processor, make the
following change in the <CODE>settings.pro</CODE> file.</P>
<P>Look for 
<PRE>
-march=pentiumpro
</PRE>
 
and replace it with
<PRE>
-march=i586
</PRE>
 
before you compile.</P>
<P>Recent AMD processors, like the Duron, Thunderbird and Athlon don't need this
change.</P>

<H2><A NAME="ss5.2">5.2</A> <A HREF="mythtv-HOWTO.html#toc5.2">Building LAME.</A>
</H2>

<P>Open a shell and switch to the directory where you saved lame.
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf lame-3.93.1.tar.gz
$ cd lame-3.93.1
$ ./configure
$ make
$ make test
$ su
# make install
</PRE>
</CODE></BLOCKQUOTE>

Check that it worked:
<BLOCKQUOTE><CODE>
<PRE>
# ls -l /usr/local/lib
-rw-r--r--    1 root     root       381706 Nov  4 14:22 libmp3lame.a
-rwxr-xr-x    1 root     root          674 Nov  4 14:22 libmp3lame.la*
lrwxrwxrwx    1 root     root           19 Nov  4 14:22 libmp3lame.so ->
libmp3lame.so.0.0.0*
lrwxrwxrwx    1 root     root           19 Nov  4 14:22 libmp3lame.so.0 ->
libmp3lame.so.0.0.0*
-rwxr-xr-x    1 root     root       360197 Nov  4 14:22
libmp3lame.so.0.0.0*

# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>

<H2><A NAME="ss5.3">5.3</A> <A HREF="mythtv-HOWTO.html#toc5.3">XMLTV. </A>
</H2>

<H3>Red Hat Linux 9:</H3>

<P>RPMs for <B>XMLTV</B> and all of its dependencies can be obtained from
<A HREF="http://atrpms.physik.fu-berlin.de/name/xmltv/">http://atrpms.physik.fu-berlin.de/name/xmltv/</A>. The web page has a
list of all the dependent packages you must download and install.
<BLOCKQUOTE><CODE>
<PRE>
# rpm -Uvh xmltv* perl*
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you install from this location you may skip to 
<A HREF="#manually_building_mythtv">Manually building MythTV</A>.</P>
<H3>Mandrake</H3>

<P>RPMs for <B>XMLTV</B> and all of its dependencies are located in
Mandrake's "contrib".  If you have added a contrib mirror, try installing
<B>XMLTV</B>:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi xmltv xmltv-grabbers
</PRE>
</CODE></BLOCKQUOTE>

If this does not work, it is possible that contrib for your Mandrake version
does not have <B>XMLTV</B>, so you may install the XMLTV prerequisites by typing:
<BLOCKQUOTE><CODE>
<PRE>
# urpmi perl-xml-twig perl-xml-writer perl-datemanip perl-libwww-perl
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>and skipping straight to the XMLTV compilation step.</P>

<H3>Other distributions and manual installation.</H3>

<P><B>NOTE</B>: SuSE 8.1 users, you <EM>must</EM> download and install an
updated version of libexpat.  The version that ships with SuSE 8.1 (version
1.95.4) is buggy, and will cause problems with XML::Twig. All other
distributions may skip this step and proceed with 
<A HREF="#untarring_xmltv">untar'ing</A> the xmltv file.</P>
<P>If you get errors installing XML::Twig or other XMLTV prerequisites,  
try deleting the old versions of libexpat
<BLOCKQUOTE><CODE>
<PRE>
$ su
# rm -f /usr/lib/libexpat*
# /sbin/ldconfig
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Download version 1.95.5 from sourceforge.net:  
<A HREF="http://sourceforge.net/projects/expat/">http://sourceforge.net/projects/expat/</A></P>
<P>Open a shell prompt:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xzf expat-1.95.5.tar.gz
$ cd expat-1.95.5
$ ./configure
$ make
$ su
# make install
# /sbin/ldconfig
# exit
$ 
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Continuing on:</P>
<P>
<A NAME="untarring_xmltv"></A> Untar the xmltv file:
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf xmltv-0.5.27.tar.bz2
</PRE>
</CODE></BLOCKQUOTE>

Install the xmltv prerequisites:</P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
$ su
# perl -MCPAN -e shell
cpan> install XML::Twig
cpan> install Date::Manip
Date::Manip is up to date.
cpan> install LWP
cpan> install XML::Writer
cpan> exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>Change to the XMLTV directory and compile it:
<BLOCKQUOTE><CODE>
<PRE>
$ cd xmltv-0.5.27
$ perl Makefile.PL
</PRE>
</CODE></BLOCKQUOTE>

You can answer "N" to the tv_check, tv_pick_cgi questions.  Say "yes" to
the grabber required for your location.</P>
<P>You may get errors about modules not being installed.  They shouldn't matter
if you're installing North America and have followed the instructions to
this point.
<BLOCKQUOTE><CODE>
<PRE>
$ make
$ make test
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>
<A NAME="manually_building_mythtv"></A> </P>
<H2><A NAME="ss5.4">5.4</A> <A HREF="mythtv-HOWTO.html#toc5.4">Manually building MythTV.</A>
</H2>

<P>Unpack MythTV
<BLOCKQUOTE><CODE>
<PRE>
$ tar -xjf mythtv-0.14.tar.bz2
$ cd mythtv-0.14
$ ./configure
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>On a single cpu machine, you would type the following to compile MythTV:
<BLOCKQUOTE><CODE>
<PRE>
$ qmake mythtv.pro
$ make
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you want to build MythTV on a multi-CPU machine (or with distcc), you may
run into issues with the standard build in MythTV. The easiest solution is
to build the libraries first.  In the following example, we will have two
concurrent jobs executing.  Do not set the number of jobs too high, or your
compile will actually take longer to complete than it would if you did a
"normal" build.
<BLOCKQUOTE><CODE>
<PRE>
$ qmake mythtv.pro
$ make qmake
$ make -C libs -j2
$ make -j2
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>If you are using distcc, and you had two other host machines (red, blue)
running distcc, you would do something like:
<BLOCKQUOTE><CODE>
<PRE>
$ export DISTCC_HOSTS='localhost red blue'
$ qmake mythtv.pro
$ make qmake
$ make -C libs -j3 CC=distcc
$ make -j3 CC=distcc
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P>The actual speed-up, if any, is dependant on a number of factors, such as
number of CPUs / hosts, etc.</P>
<P>Switch to superuser:
<BLOCKQUOTE><CODE>
<PRE>
$ su
# make install
# exit
</PRE>
</CODE></BLOCKQUOTE>
</P>
<P><B>NOTE</B>:  subsequent configuration steps assume that you are within
the MythTV directory that you <CODE>cd</CODE>'d to above.</P>

<H3><A NAME="frontend-only"></A> Frontend-only configuration </H3>

<P>Since MythTV uses a client/server architecture, multiple frontend
computers can simultaneously access content on a Myth system.  Live TV,
watching and scheduling recordings, etc. are all possible from multiple
frontends.</P>
<P>To get a better picture of what is needed to run a frontend, note the
following:
<LI>You do NOT need the MySQL server installed on your remote frontend</LI>
<LI>You do NOT need XMLTV installed on your remote frontend</LI>
<LI>You do NOT need to run the MythTV setup program on
your frontend machine</LI>
</P>
<P>Other than the exclusion of the MySQL server and XMLTV, the MythTV
compilation procedure is the same as when you're setting up both a backend
and a frontend.  However, you <EM>will</EM> need to install the database
access libraries.</P>
<P>Once MythTV is compiled and installed, you must change your
<CODE>/usr/local/share/mythtv/mysql.txt</CODE> or <CODE>~/.mythtv/mysql.txt</CODE>
file's "DBHostName" field to point to your master backend's IP address.</P>
<P>Run the MythTV setup program on your master backend. Under the "General"
menu, change the IP address of the current machine (by default, "127.0.0.1")
to the real external IP address - 127.0.0.1 is the loopback address and no
external machine can access it. Change the Master Server IP setting to the
same IP address as well.</P>

<H2><A NAME="Gentoo_build"></A> <A NAME="ss5.5">5.5</A> <A HREF="mythtv-HOWTO.html#toc5.5">Gentoo. </A>
</H2>

<P>Installation of MythTV on Gentoo consists of simply emerging the desired
ebuild because all of the packages are now part of the official Portage tree.
<BLOCKQUOTE><CODE>
<PRE>
$ su -
# emerge --sync # make sure portage is up to date.
# vi /etc/make.conf
</PRE>
</CODE></BLOCKQUOTE>

Add mysql to your USE variable.  i.e. <CODE>USE="mysql ...."</CODE>
<BLOCKQUOTE><CODE>
<PRE>
# emerge mythtv
</PRE>
</CODE></BLOCKQUOTE>
</P>
<HR>
<A HREF="mythtv-HOWTO-6.html">Next</A>
<A HREF="mythtv-HOWTO-4.html">Previous</A>
<A HREF="mythtv-HOWTO.html#toc5">Contents</A>
</BODY>
</HTML>
