#!/bin/sh
#
# configure script for mythgallery 
# (copied from "pathetic" script for mythmusic)
#

# default parameters
opengl="no"
exif="no"

for opt do
  case "$opt" in
  --enable-opengl) opengl="yes"
  ;;
  --enable-exif) exif="yes"
  ;;
  esac
done

if test x"$1" = x"-h" -o x"$1" = x"--help" ; then
cat << EOF

Usage: configure [options]
Options: [defaults in brackets after descriptions]

Standard options:
  --help                   print this message
  --enable-opengl          enable OpenGL visualizers [default=no]
  --enable-exif            enable reading of EXIF headers [default=no]
EOF
exit 1
fi

echo "Creating config.h, config.pro"

echo ""
echo "Configuration settings: "
echo " "

echo "/*" >  ./mythgallery/config.h
echo "    Automatically generated by configure - do not modify" >> ./mythgallery/config.h
echo "*/" >> ./mythgallery/config.h

echo "#" > ./mythgallery/config.pro
echo "#    Automatically generated by configure - modify only under penalty of death" >> ./mythgallery/config.pro
echo "#" >> ./mythgallery/config.pro

if test "$opengl" = "yes" ; then
  echo "        OpenGL support will be included"
  echo "#define OPENGL_SUPPORT 1" >> ./mythgallery/config.h
  echo "CONFIG += opengl" >> ./mythgallery/config.pro
  echo "HEADERS += glsingleview.h" >> ./mythgallery/config.pro
  echo "SOURCES += glsingleview.cpp" >> ./mythgallery/config.pro
fi

if test "$opengl" = "no" ; then
  echo "        OpenGL support will not be included"
fi

if test "$exif" = "yes" ; then
  echo "        EXIF support will be included"
  echo "#define EXIF_SUPPORT 1" >> ./mythgallery/config.h
  echo "LIBS += -lexif" >> ./mythgallery/config.pro

  if `pkg-config --atleast-version 0.6.9 libexif` ; then
     echo "#define NEW_LIB_EXIF 1" >> ./mythgallery/config.h
  fi
fi

if test "$exif" = "no" ; then
  echo "        EXIF support will not be included"
fi


