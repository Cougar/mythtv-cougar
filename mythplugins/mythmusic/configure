#!/bin/sh
#
# Pathetic configure script for mythmusic
#

# default parameters
opengl="no"
fftw_lib="no"

for opt do
  case "$opt" in
  --enable-opengl) opengl="yes"
  ;;
  --enable-fftw) fftw_lib="yes"
  ;;
  esac
done

if test x"$1" = x"-h" -o x"$1" = x"--help" ; then
cat << EOF

Usage: configure [options]
Options: [defaults in brackets after descriptions]

echo "Standard options:"
echo "  --help                   print this message"
echo "  --enable-fftw            enable fftw visualizers [default=no]"
echo "  --enable-opengl         disable OpenGL visualizers [default=no]"

EOF
exit 1
fi

echo "Creating config.h, config.pro"

echo ""
echo "Configuration settings: "
echo " "

echo "/*" >  ./mythmusic/config.h
echo "    Automatically generated by configure - do not modify" >> ./mythmusic/config.h
echo "*/" >> ./mythmusic/config.h

echo "#" > ./mythmusic/config.pro
echo "#    Automatically generated by configure - modify only under penalty of death" >> ./mythmusic/config.pro
echo "#" >> ./mythmusic/config.pro

if test "$opengl" = "yes" ; then
  echo "        OpenGL support will be included"
  echo "#define OPENGL_SUPPORT 1" >> ./mythmusic/config.h
  echo "LIBS += -lGL -lGLU" >> ./mythmusic/config.pro
fi

if test "$opengl" = "no" ; then
  echo "        OpenGL support will not be included"
fi

if test "$fftw_lib" = "yes" ; then
  echo "        FFTW support will be included"
  echo "#define FFTW_SUPPORT 1" >> ./mythmusic/config.h
  echo "LIBS += -lrfftw -lfftw" >> ./mythmusic/config.pro
fi

if test "$fftw_lib" = "no" ; then
  echo "        FFTW support will not be included"
fi

echo ""

